---
layout: posts
title: IP地址、子网掩码、网关
mathjax: true
date: 2022-04-10 15:48:27
categories:
  - Linux
  - 运维
tags:
  - Linux
---


#### 什么是IP地址？

假如有一群人在一个密闭房间里面，用什么方式能够快速的叫到某一个人呢？没错,一个简单的方式，就是每个人编一个号码，例如，叫到一号，就知道是谁了。

在网络世界中也是一样的，要想快速访问某一台设备，就需要每台设备有一个编号，而这个编号就是网络设备的IP地址。在这个房间里面，如果有两个人的编号相同，那么会怎么样，肯定就是当叫到这个编号的时候，不知道叫的是谁，所以一个房间里面不允许有两个编号相同的人，在一个局域网里面不允许有两个IP地址相同的设备，如果有就被称为IP冲突，会严重危害到网络的稳定。

扩展一下，在一栋大楼里面，有好多个这样的密闭房间，每个密闭的房间也都有一群人，那么要怎么定位到某一个房间里面的一个人呢？

答案肯定也还是编号，给每个房间编号，例如1号房间里面的1号，这样就能定位到特定的那一个人了，这时候我们把房间号也加入到人的编号当中去，房间号和人的编号用一个"."间隔开来，例如1.1号，说明就这个人就是1号房间里面的1号人。

网络设备中的IP地址也是如此，例如192.168.1.100，我们可以这样理解，192.168.1号房间，也就是我们会提到的网段，100就是在这个网段里面的编号100的设备。

#### 什么是子网掩码？

根据上面提出的编号：192.168.1.100，会引发一个新的疑问，为什么房间号是：192.168.1，而人的编号是100，可不可以把房间号设置成为192.168，人的编号设置成为1.100呢？

答案当然是可以的，但是这样设置会引发一个问题，同样192.168.1.100这个编号就会有歧义，可以表示192.168.1房间里面的100号人，也可以表示192.168号房间里面的1.100号人，这时候就要引入另外一个规则，告诉人们多少就是房间编号，多少就是人的编号，而这个规则就是子网掩码。

都知道网络时间就是数字世界，所以这个规则设计得很讨巧，长度设置和编号一样长，通过和编号的于运算，最后告诉人们那些是房间号，那些事是人的编号。

举个例子：子网掩码是255.255.255.0这个最常用的规则意思是255.255.255这前三位是房间号，后面0那一位是人编号，再比如192.168.1.100这个IP地址和255.255.0.0这个子网掩码，说明192.168是房间号，也就是网段，而1.100是人的编号，也就是设备在这个网段的编号。

换句话说:子网掩码的作用就是确定设备出于哪个网段。子网掩码 255.255.0.0 表示前两位是网络部分,后两位是主机部分. 所以子网掩码相同且前两位相同的IP (例如:192.168.0.12 与 192.168.1.13) 在同一网段. 

#### 什么是网关？

接着上面的问题，一群人在一个密闭房间里面，已经每一个人都有了一个编号，就是网络设备中的IP地址，那么这时候需求升级了，房间里面的人需要和房间外面的人们进行沟通对话，这时候怎么办呢，就需要一个会穿墙术的超能力者当传话筒，在这个房间里面穿梭，把房间里面的人的话传到外面去，把外面的人回应传回给房间里面的人。

这个有超能力的人就是网络世界中的网关，他负责把内部网络的讯息传递到外网， 把外网信息传递回来，对于一个家庭网络而言，这个角色不正是我们的路由器吗？

路由器是唯一一个和宽带连接的设备，家里所有的设备都要经过路由器才能连接到宽带，进行上网冲浪。所以网关也就是我们家庭宽带网络中的路由器，如果网关设置错误，就好像你把要传递出去的话语传给了一个没有超能力的人，自然也就无法把话语传达到房间外面。

所以这里所说的穿墙只的就是两个设备不在同一网段,如果在同一网段就可以利用交换机通信,如果不是就需要路由器,也就会用到网关的概念.

网关就是跨网段通讯的“关口”。当数据包从本网段设备传输到路由器时，首先要保证网关一致。网关可以使用本网段中任何一个地址，但是有一个不成文的规定，一般网关使用本网段中第一个可用的地址，这是为了避免与局域网中其他设备IP产生冲突。所以上面例子中的局域网1中，所有设备的网关都应该是10.0.0.1。局域网2中所有设备的网关都应该是12.0.0.1。有了网关，局域网内的设备才可以通过路由器与其他网段的设备进行通讯。

