---
title: js文件上传
mathjax: true
categories:
  - JavaScript
  - 应用案例
tags:
  - JavaScript

date: 2021-08-19 13:17:24
---

[在web应用程序中使用文件](https://developer.mozilla.org/zh-CN/docs/Web/API/File/Using_files_from_web_applications)

#### 选择文件

```html
<input type="file" id="input">
```

```javascript
const selectedFile = document.getElementById('input').files[0];
```

通过事件选择文件

```javascript
document.getElementById('input').addEventListener('change',function(e){
  const file = this.files[0]
})
```

#### 上传选择的文件

```javascript
const input = document.getElementById('input')
const fd = new FormData();
fd.append('data', input.files[0]);

fetch('http://xxx.xxx.xxx', {
  method: 'POST',
  body:fd
}).then(res => res.json())
```

#### 创建文件并上传

[Blob](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)

```javascript
const input = document.getElementById('input')
const fd = new FormData();
const blob = new Blob(["[]"], { type: 'plain/text' });
fd.append('data', blob,'script.txt');

fetch('http://xxx.xxx.xxx', {
  method: 'POST',
  body:fd
}).then(res => res.json())
```

