---
layout: posts
title: CSS艺术 绘制形状
date: 2022-03-07 09:16:42
categories:
  - CSS
tags:
  - CSS
---


#### 椭圆

border-radius 可以指定数值或百分比,当使用百分比的时候,可以让 border 按各自边长计算圆角,实现椭圆

```javascript
.box {
  width: 200px;
  height: 100px;
  background: goldenrod;
  border-radius: 50%;
}
```

**半橢圓**

border-radius 是一个简写的属性, 它的完整属性可以表述四个角的圆角

border-top-left-radius
border-top-right-radius
border-bottom-left-radius
border-bottom-right-radius

属性的两个长度或百分比值定义了椭圆的四分之一外边框的边缘角落的形状。第一个值是水平半径，第二个是垂直半径。如果省略第二个值，它是从第一个复制。如果任一长度为零，角落里是方的，不圆润。水平半径的百分比是指边界框的宽度，而垂直半径的百分比是指边界框的高度。

这样我们只需要指定上边两个角或下边两个角的圆角即可

```css
.box {
  width: 200px;
  height: 100px;
  background: goldenrod;
  border-top-left-radius: 50% 100%;
  border-top-right-radius:50% 100%;
}
```

可以是使用简写的属性, border-radius 可以用 `/` 分隔两组值,左边代表四个角的水平半径,右边代表垂直半径

而且不同的个数代表不同的位置,这与 border 类似

<span style='display:inline-block;width:200px'>50%</span>             top-left:50% | top-right:50% | bottom-right:50% | bottom-left:50%
<span style='display:inline-block;width:200px'>50% 40%</span>         top-left:50% | top-right:40% | bottom-right:50% | bottom-left:40%
<span style='display:inline-block;width:200px'>50% 40% 30%</span>     top-left:50% | top-right:40% | bottom-right:30% | bottom-left:40%
<span style='display:inline-block;width:200px'>50% 40% 30% 20%</span> top-left:50% | top-right:40% | bottom-right:30% | bottom-left:20%

所以分析一下这个半椭圆

![](0001.png)

+ 水平方向上面的两个角是 `50%`,  暂时可以写为 `50% 50% 0 0 / xx xx xx xx`
+ 垂直方向上面两个角是 `100%`,现在变为 `50% 50% 0 0 / 100% 100% 0 0`
+ 因为半椭圆的垂直方向占据了整个元素的高度,所以不能使用简写属性, 必须要指定上面两垂直半径是100%, 这样弧度才会从底部延伸到顶部
  现在垂直半径后两个为0,意味着对应的水平半径即使给了也不会生效,因为不能只通过一个半轴长度画椭圆,最终能够属性会变为 `50% / 100% 100% 0 0`

```css
.box {
  width: 200px;
  height: 100px;
  background: goldenrod;
  border-radius: 50%/ 100% 100% 0 0;
}
```

同理如果你想画一个垂直方向的半椭圆

```css
.box {
  width: 200px;
  height: 100px;
  background: goldenrod;
  border-radius: 100% 0 0 100%/50%;
}
```

1/4 椭圆也是同样的道理,只需指定一个角上的半径 

```css
.box {
  width: 200px;
  height: 100px;
  background: goldenrod;
  border-radius: 100% 0 0 0;
}
```

[这个网址](https://simurai.com/archive/buttons/#)里你可以看到各种通过圆角制作的精美按钮

![](0002.png)


#### 平行四边形/菱形

你可能很容易想到使用 `skew`, 但是有一些细节需要注意, 如果 `skew` 作用在一个有文字的元素上, 那么里面的文字也会被拉伸

想解决这个问题, 可能会想到使用两个元素嵌套, 让里面的元素使用反向 `skew`, 让文字重新边正

有没有一种方式,可以不嵌套元素,还能让文字不受影响, 办法就是使用 **伪元素**, 因为伪元素和元素本身不属于嵌套关系,所以更容易处理

```css
.el {
  position: relative;
  /* 写文字相关的样式 */
}

/* 写背景形状相关的样式 */
.el::after {
  content: "";
  position: absolute;
  left:0;
  top:0;
  right:0;
  bottom: 0;
  /* 放在文字元素下面 */
  z-index: -1;
}
```

对于菱形, 是四边相等的平行四边形, 最容易想到的就是旋转一个正方形

```css
width: 100px;
height: 100px;
transform: rotate(45deg);
```

但是中心线长度不相等平行四边形会遇到一点麻烦, 最核心的一个问题就是, 拉伸后的高度应该等于宽度, 以下面这个 宽为100,高为40 的长方形为例

![](0003.png)

想求的是 AGF 的角度, 那么只要求出 FGE 就可以了, `sinFGE = AG / FG` 所以 `FCE = srcsin(40/100)` 

再把 FCE 转成角度 `FCE = srcsin(40/100) * 360 / (2 * PI) = 23.5781(deg)`

那么 `AGF = (90 - 23.57)deg`

```css
width: 100px;
height: 40px;
transform: skew(-66.43deg);
```

![](0004.png)


#### 菱形剪裁

有时候希望一张图片能剪裁成菱形的形状, 我们已经知道菱形如何制作,所以很容易想到用两个元素嵌套

第一步把外层的元素旋转并处理成菱形, 里面的元素反向旋转修正, 又因为拉伸之后图片的上下可能填不满,所以需要通过缩放填满外层元素


```html
<div id='box'>
  <img />
</div>
```

```css
.box {
  transform: rotate(-78deg) skew(-66.43deg);
  overflow: hidden;
}
.box img{
  transform: skew(66.43deg) scale(3);
}
```

![](0005.png)

除了这种比较传统的方法, 现在我们有了一个新的属性可以完成这个效果 `clip-path`,  可以指定点的位置并链接成图形, 如果使用百分比会按照自身的尺寸解析

```css
img{
  width: 320px;
  height: 180px;
  clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%);
  transition: 1s clip-path;
}

img:hover {
  clip-path: polygon(0 0,100% 0,100% 100%,0 100%);

}
```