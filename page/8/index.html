<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="å‰ç«¯ web react" />
       
      <meta name="description" content="å‰ç«¯æŠ€æœ¯ä¸ç”Ÿæ´»ã€‚" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> å››æœˆå…«æ—¥</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">
 
<link rel="stylesheet" href="/css/fonts/remixicon.css">
 
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="/js/pace.min.js"></script>
       
 

      <link rel="stylesheet" href="/css/bulma.min.css" />
      <script src="/js/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/katex.min.css">

<link rel="stylesheet" href="/css/style.css">
<!-- hexo injector head_end end --></head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">å››æœˆå…«æ—¥</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['æ„¿ä½ è¶³å¤Ÿå¼ºå¤§ï¼Œä¹Ÿè¦è¶³å¤Ÿæ¸©æŸ”', 'æœ€è½»çš„å¹¶ä¸æ˜¯ä¸€æ ¹ç¾½æ¯›ï¼Œè€Œæ˜¯ä¸€åŒé£é¸Ÿçš„ç¿…è†€', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="posts-other/Dockeréƒ¨ç½²Jira"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/84719102d07f/"
    >Docker éƒ¨ç½²Jira + ç ´è§£</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/84719102d07f/" class="article-date">
  <time datetime="2022-03-04T14:00:05.000Z" itemprop="datePublished">2022-03-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E4%BB%96/">å…¶ä»–</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="åˆ›å»ºå¿…è¦ç›®å½•"><a href="#åˆ›å»ºå¿…è¦ç›®å½•" class="headerlink" title="åˆ›å»ºå¿…è¦ç›®å½•"></a>åˆ›å»ºå¿…è¦ç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p docker-compose/jira</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºdocker-compose-yml"><a href="#åˆ›å»ºdocker-compose-yml" class="headerlink" title="åˆ›å»ºdocker-compose.yml"></a>åˆ›å»ºdocker-compose.yml</h4><ul>
<li>ä¿®æ”¹æ˜ å°„è·¯å¾„ä¸ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ç›¸å¯¹è·¯å¾„</li>
<li>JIRA_PROXY_NAME &#x3D; åŸŸå</li>
<li>JIRA_PROXY_PORT &#x3D; å¤–éƒ¨ç«¯å£</li>
<li>JIRA_PROXY_SCHEME &#x3D; åè®®</li>
<li>POSTGRES_PASSWORD ä¿®æ”¹æ•°æ®åº“å¯†ç </li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jira:</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgresql</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">image:</span> <span class="string">teamatldocker/jira:8.19.0</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">jiranet</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./jiradata:/var/atlassian/jira</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;1170:8080&#x27;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;JIRA_DATABASE_URL=postgresql://jira@postgresql/jiradb&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;JIRA_DB_PASSWORD=w.521@@ong.COM&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;SETENV_JVM_MINIMUM_MEMORY=2048m&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;SETENV_JVM_MAXIMUM_MEMORY=4096m&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;JIRA_PROXY_NAME=jira.iftrue.club&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;JIRA_PROXY_PORT=1170&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;JIRA_PROXY_SCHEME=http&#x27;</span></span><br><span class="line">    <span class="attr">logging:</span></span><br><span class="line">      <span class="comment"># limit logs retained on host to 25MB</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&quot;500k&quot;</span></span><br><span class="line">        <span class="attr">max-file:</span> <span class="string">&quot;50&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">postgresql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:12-alpine</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">jiranet</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./postgresqldata:/var/lib/postgresql/data</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_USER=jira&#x27;</span></span><br><span class="line">      <span class="comment"># CHANGE THE PASSWORD!</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_PASSWORD=w.521@@ong.COM&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_DB=jiradb&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_ENCODING=UNICODE&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_COLLATE=C&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;POSTGRES_COLLATE_TYPE=C&#x27;</span></span><br><span class="line">    <span class="attr">logging:</span></span><br><span class="line">      <span class="comment"># limit logs retained on host to 25MB</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&quot;500k&quot;</span></span><br><span class="line">        <span class="attr">max-file:</span> <span class="string">&quot;50&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">jiradata:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">postgresqldata:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">jiranet:</span></span><br></pre></td></tr></table></figure>

<h4 id="ç ´è§£"><a href="#ç ´è§£" class="headerlink" title="ç ´è§£"></a>ç ´è§£</h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/xiaonandl/atlassian-agent">ä¸‹è½½</a> atlassian-agent.jar æ–‡ä»¶å‹ç¼©åŒ…ï¼Œå¹¶è§£å‹</p>
</li>
<li><p>å°† <code>atlassian-agent.jar</code> å¤åˆ¶åˆ°å®¹å™¨å†… <code>docker cp ./atlassian-agent.jar jiraå®¹å™¨åç§°:/opt/jira</code></p>
</li>
<li><p>åœ¨ <code>docker-compose/jira</code> ç›®å½•ä¸‹æ‰§è¡Œ <code>docker-compose up</code> å¯åŠ¨åŠ¨å®¹å™¨</p>
</li>
<li><p>è¿›å…¥å®¹å™¨ <code>docker exec -it jira</code> å®¹å™¨åç§° <code>/bin/bash</code></p>
</li>
<li><p>ä¿®æ”¹ç¯å¢ƒå˜é‡ <code>cd /opt/jira/bin vi setenv.sh</code></p>
</li>
</ul>
<p><img src="/posts/84719102d07f/0001.png"></p>
<p>export JAVA_OPTS ä¿®æ”¹ä¸º export JAVA_OPTS&#x3D;â€-javaagent:&#x2F;opt&#x2F;jira&#x2F;atlassian-agent.jar ${JAVA_OPTS}â€</p>
<ul>
<li><p>é‡å¯å®¹å™¨, åœ¨æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ° <code>========= agent working =========</code> å­—æ ·è¡¨ç¤ºæˆåŠŸ</p>
</li>
<li><p>å†æ¬¡è¿›å…¥å®¹å™¨ æ‰§è¡Œ <code>java -jar atlassian-agent.jar -p jsm -m aaa@bbb.com -n my_name -o https://zhile.io -s ABCD-1234-EFGH-5678</code></p>
</li>
</ul>
<p><strong>ç‰¹åˆ«æ³¨æ„ -p å‚æ•°è®¾ç½®ï¼Œé€šè¿‡ java -jar atlassian-agent.jar æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ï¼Œæ¯ç§äº§å“æœ‰ä¸åŒçš„æ ‡è¯†</strong></p>
<p>-m é‚®ç®±ä»»æ„å¡«å†™<br>-n åç§°ä»»æ„å¡«å†™<br>-o ç½‘å€ä»»æ„å¡«å†™<br>-s server id å†å®‰è£…æ—¶æŸ¥çœ‹</p>
<p>å¤åˆ¶æ‰§è¡Œå‘½ä»¤ä¹‹åäº§ç”Ÿçš„æ¿€æ´»ç ï¼Œå¤åˆ¶åˆ°æ¿€æ´»ç çš„çª—å£å®Œæˆæ¿€æ´»ã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-design/pattern/â‘¢è£…é¥°è€…æ¨¡å¼"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/66e875fc8f29/"
    >â‘¢æ‚„æ— å£°æ¯çš„æ‰©å±•-è£…é¥°è€…æ¨¡å¼</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/66e875fc8f29/" class="article-date">
  <time datetime="2022-01-03T04:49:16.000Z" itemprop="datePublished">2022-01-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>ç®€å•è¯´è£…é¥°å¯ä»¥è®©ä½ ä¸ç”¨ä¿®æ”¹åº•å±‚ä»£ç ç»™å¯¹è±¡èµ‹äºˆæ–°çš„èŒè´£ã€‚</p>
<h4 id="ä»åˆ†ç¦»æ”¹å˜ï¼Œæ›´è¿›ä¸€æ­¥"><a href="#ä»åˆ†ç¦»æ”¹å˜ï¼Œæ›´è¿›ä¸€æ­¥" class="headerlink" title="ä»åˆ†ç¦»æ”¹å˜ï¼Œæ›´è¿›ä¸€æ­¥"></a>ä»åˆ†ç¦»æ”¹å˜ï¼Œæ›´è¿›ä¸€æ­¥</h4><p>çœ‹äº†å‰ä¸¤ä¸ªè®¾è®¡æ¨¡å¼ï¼Œç›¸ä¿¡ä½ ä¸€å®šæ„Ÿè§‰åˆ°ç»§æ‰¿åªèƒ½è§£å†³é™æ€æ—¶å¯¹ç±»çš„æ‰©å±•ï¼Œå¦‚æœæƒ³åŠ¨æ€çš„å¯¹ç±»çš„è¡Œä¸ºæ‰©å±•å°±éœ€è¦ç”¨åˆ°ç»„åˆã€‚</p>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»å¯ä»¥ç”¨ç­–ç•¥æ¨¡å¼åˆ†ç¦»æ”¹å˜çš„éƒ¨åˆ†ï¼Œè¿˜æœ‰ä»€ä¹ˆåšä¸åˆ°çš„ä¹ˆï¼Ÿ çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¥¶èŒ¶åº—æœ‰å‡ åç§å“ç§çš„é¥®æ–™ï¼Œä»–ä»¬éƒ½éœ€è¦ç»§æ‰¿è‡ªä¸€ä¸ªæŠ½è±¡ç±» Beverageï¼Œå› ä¸ºæ¯ç§é¥®æ–™æœ‰è‡ªå·±çš„äº§å“è¯´æ˜ï¼Œå¹¶ä¸”å„è‡ªå®ç°äº†ä¸€ä¸ªè®¡ç®—é‡‘é¢çš„æ–¹æ³• costã€‚</li>
<li>æ¯ç§å¥¶èŒ¶é™¤äº†è‡ªå·±ç‰¹æœ‰çš„é…æ–™å¤–ï¼Œè¿˜å¯ä»¥é¢å¤–ä»˜è´¹æ·»åŠ é…æ–™ï¼Œæ¯”å¦‚åŠ ä¸¤ä»½çš„çç ï¼ŒåŠ ä¸€ä»½æ¤°æœï¼Œå¹¶ä¸”éœ€è¦è®¡ç®—æ€»ä»·ã€‚</li>
</ul>
<p>å¦‚æœæƒ³æšä¸¾å‡ºåº—å†…çš„æ¯ä¸€ç§äº§å“æ˜¯ä¸ç°å®çš„ï¼Œé‚£æ—¶éå¸¸åºå¤§çš„ä¸€ä¸ªæ’åˆ—ç»„åˆï¼Œå› ä¸ºä¸å¯èƒ½çŸ¥é“å®¢æˆ·è¦åŠ é‚£äº›é…æ–™ã€‚å¹¶ä¸”ä¸¥é‡çš„è¿åäº†è®¾è®¡ä¸­çš„ä¸¤ä¸ªåŸåˆ™ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BeverageAbstract</span> &#123;</span><br><span class="line">  description = <span class="string">&quot;some description&quot;</span>;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœèŒ¶åŠ ç‰›å¥¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitTeaWithMilk</span> <span class="keyword">extends</span> <span class="title class_ inherited__">BeverageAbstract</span> &#123;&#125;</span><br><span class="line"><span class="comment">// æŸ æª¬èŒ¶åŠ ä¸¤ä»½çç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LemonTeaWith2Pearls</span> <span class="keyword">extends</span> <span class="title class_ inherited__">BeverageAbstract</span> &#123;&#125;</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶ä¸èƒ½æšä¸¾è€ƒè™‘æ˜¯ä¸æ˜¯åº”è¯¥æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ Beverage ç±»ï¼Œç”¨äºå®ç°æŠ½è±¡ç±» BeverageAbstractï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰çš„é…æ–™éƒ½æ·»åŠ åœ¨ Beverage ä¸Šï¼Œå¹¶è®°å½•é…æ–™çš„æ•°é‡ã€‚<br>å­ç±»ä¼šè°ƒç”¨çˆ¶ç±» cost æ–¹æ³•è®¡ç®—æ‰€æœ‰é…æ–™ï¼Œå¹¶åŠ ä¸Šè‡ªå·±å“ç§çš„ä»·æ ¼ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BeverageAbstract</span> &#123;</span><br><span class="line">  description = <span class="string">&quot;some description&quot;</span>;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Beverage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">BeverageAbstract</span> &#123;</span><br><span class="line">  milk = <span class="number">2</span>;</span><br><span class="line">  milkCount = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">setMilk</span>(<span class="params">count: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">milkCount</span> = count;</span><br><span class="line">  &#125;</span><br><span class="line">  coffee = <span class="number">5</span>;</span><br><span class="line">  coffeeCount = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">setCoffee</span>(<span class="params">count: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">coffeeCount</span> = count;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">milkCount</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      total += <span class="variable language_">this</span>.<span class="property">milkCount</span> * <span class="variable language_">this</span>.<span class="property">milk</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">coffeeCount</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      total += <span class="variable language_">this</span>.<span class="property">coffeeCount</span> * <span class="variable language_">this</span>.<span class="property">coffee</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitTea</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Beverage</span> &#123;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> + <span class="variable language_">super</span>.<span class="title function_">cost</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitTea = <span class="keyword">new</span> <span class="title class_">FruitTea</span>();</span><br><span class="line">fruitTea.<span class="title function_">setMilk</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitTea.<span class="title function_">cost</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitTea2 = <span class="keyword">new</span> <span class="title class_">FruitTea</span>();</span><br><span class="line">fruitTea2.<span class="title function_">setMilk</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitTea.<span class="title function_">cost</span>());</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„è®¾è®¡è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼š</p>
<ul>
<li>å¹¶ä¸æ˜¯æ‰€æœ‰çš„é…æ–™éƒ½éœ€è¦ç»§æ‰¿ï¼Œæ¯ç§é¥®æ–™éƒ½æœ‰è‡ªå·±ç‰¹æœ‰çš„é…æ–™ã€‚</li>
<li>ä¸€ä½†éœ€è¦æ–°çš„é…æ–™æˆ–æ–°çš„å“ç§æˆ–ä»·é’±çš„æ”¹å˜ï¼Œå°±éœ€è¦ä¿®æ”¹çˆ¶ç±»ã€‚</li>
<li>å½“æœ‰æ–°çš„å“ç§å‡ºç°çš„æ—¶å€™ï¼Œä»–å¯èƒ½ç»§æ‰¿äº†ä¸å¿…è¦çš„æ–¹æ³•ã€‚</li>
</ul>
<h4 id="å®šä¹‰è£…é¥°è€…"><a href="#å®šä¹‰è£…é¥°è€…" class="headerlink" title="å®šä¹‰è£…é¥°è€…"></a>å®šä¹‰è£…é¥°è€…</h4><p>è®¾è®¡ç±»çš„ä¸€ä¸ªåŸåˆ™æ˜¯ <strong>â¤â€ğŸ”¥ ç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¹Ÿå°±æ˜¯ç±»è®¾è®¡ä¸­æåˆ°çš„å¼€æ”¾å…³é—­åŸåˆ™</strong>ã€‚</p>
<p>å¼€æ”¾ä¸”å…³é—­å¹¶ä¸å†²çªï¼Œæƒ³æƒ³è§‚å¯Ÿä¸­æ¨¡å¼ä¸­çš„æ¡ˆä¾‹ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ç±»çš„æ–¹æ³•æ·»åŠ è§‚å¯Ÿè€…ï¼Œè€Œä¸æ”¹å˜åŸæœ‰çš„ç±»çš„æ–¹æ³•ã€‚å¹¶ä¸éœ€è¦æ¯ä¸€ä¸ªç±»éƒ½éµå¾ªå¼€æ”¾å…³é—­åŸåˆ™ï¼Œé¿å…è¿‡åº¦è®¾è®¡ï¼Œåªéœ€è¦é’ˆå¯¹å¯èƒ½ç»å¸¸ä¼šå‘ç”Ÿå˜åŒ–çš„ç±»åº”ç”¨å¼€å‘-å…³é—­åŸåˆ™ã€‚</p>
<p><strong>è£…é¥°è€…æ¨¡å¼ï¼šåŠ¨æ€çš„å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œè‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆ</strong>ã€‚</p>
<p>å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼ŒæŒ‰ä»¥ä¸‹çš„æ–¹å¼æ€è€ƒï¼š</p>
<ul>
<li>æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªæœèŒ¶ç±» FruitTea</li>
<li>éœ€è¦åŠ ä¸¤ä»½é¢å¤–çš„ç‰›å¥¶ï¼Œç”¨ä¸¤ä¸ªç‰›å¥¶é…æ–™çš„ç±»å»ä¿®é¥°å®ƒ</li>
<li>éœ€è¦åŠ ä¸€ä»½é¢å¤–çš„å’–å•¡ï¼Œç”¨ä¸€ä¸ªå’–å•¡é…æ–™çš„ç±»å»ä¿®é¥°å®ƒ</li>
<li>ä¾èµ–ä¿®é¥°è€…çš„ cost æ–¹æ³•è®¡ç®—ä»·æ ¼</li>
<li>åœ¨ç¼–ç çš„æ—¶å€™ä¸ºäº†æ˜ç¡®ä¿®é¥°è€…å’Œè¢«ä¿®é¥°è€…çš„å…³ç³»ï¼Œ<strong>éœ€è¦è®©ä¿®é¥°è€…å’Œè¢«ä¿®é¥°è€…ç»§æ‰¿åŒæ ·çš„ç±»æˆ–å®ç°ç›¸åŒçš„æ¥å£ï¼Œå› ä¸ºè¢«ä¿®é¥°çš„ç±»ä»ç„¶è¢«è§†ä½œåŸæœ‰çš„ç±»ï¼Œå®ƒçš„å±æ€§ä»¥åŠæ–¹æ³•çš„ä½œç”¨ä¸åº”è¯¥å‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯æ‰©å±•äº†æ–¹æ³•å®ç°ã€‚</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">cost</span>(): <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">getDescription</span>(): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MilkDecorator</span> <span class="keyword">implements</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  <span class="attr">beverage</span>: <span class="title class_">BeverageInterface</span>;</span><br><span class="line">  description = <span class="string">&quot;MilkDecorator&quot;</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">beverage: BeverageInterface</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">beverage</span> = beverage;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getDescription</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">description</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> + <span class="variable language_">this</span>.<span class="property">beverage</span>.<span class="title function_">cost</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CoffeeDecorator</span> <span class="keyword">implements</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  <span class="attr">beverage</span>: <span class="title class_">BeverageInterface</span>;</span><br><span class="line">  description = <span class="string">&quot;CoffeeDecorator&quot;</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">beverage: BeverageInterface</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">beverage</span> = beverage;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getDescription</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">description</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span> + <span class="variable language_">this</span>.<span class="property">beverage</span>.<span class="title function_">cost</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitTea</span> <span class="keyword">implements</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  description = <span class="string">&quot;FruitTea&quot;</span>;</span><br><span class="line">  <span class="title function_">getDescription</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">description</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fruitTea = <span class="keyword">new</span> <span class="title class_">FruitTea</span>();</span><br><span class="line"><span class="comment">// åŸä»·fruitTea</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitTea.<span class="title function_">cost</span>());</span><br><span class="line"><span class="comment">// æ·»åŠ é…æ–™ä¸€ä»½ç‰›å¥¶ ä¸€ä»½å’–å•¡</span></span><br><span class="line">fruitTea = <span class="keyword">new</span> <span class="title class_">MilkDecorator</span>(fruitTea);</span><br><span class="line">fruitTea = <span class="keyword">new</span> <span class="title class_">CoffeeDecorator</span>(fruitTea);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitTea.<span class="title function_">cost</span>());</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å·²ç»åˆ†ç¦»äº†è£…é¥°ç€å¯¹è±¡,ä½†æ˜¯ä½¿ç”¨è£…é¥°è€…æ¨¡å¼æ˜¯åŸºäºä¸€ä¸‹å‡ ä¸ªå‰æï¼š</p>
<ul>
<li>è¢«ä¿®é¥°çš„å¯¹è±¡æ˜¯å¯ä»¥æŠ½è±¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¢«ä¿®é¥°çš„å¯¹è±¡ä¸ä¼šè½»æ˜“æ”¹å˜ï¼Œè¿™æ ·é’ˆå¯¹å®ƒçš„ä¿®é¥°ç±»æ‰æœ‰æ„ä¹‰</li>
<li>ä¿®é¥°å¯¹è±¡æ˜¯ä¸å…³å¿ƒå¤–éƒ¨çŠ¶æ€çš„ï¼Œå®ƒåªå…³å¿ƒè¢«ä¿®é¥°çš„å¯¹è±¡ï¼Œå› ä¸ºä½ æƒ³è®©ä»–æ§åˆ¶ä¿®é¥°é“¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ›´å¥½çš„è®¾è®¡ã€‚</li>
<li><strong>è¢«è£…é¥°çš„å¯¹è±¡å¯èƒ½æ‹¥æœ‰ç‰¹å®šçš„ç±»å‹ï¼Œåœ¨ä½¿ç”¨è£…é¥°çš„æ—¶å€™éœ€è¦å°å¿ƒï¼Œé¿å…åŠŸèƒ½æˆ–ç±»å‹ä¸¢å¤±ã€‚</strong></li>
</ul>
<h4 id="ä¸-ES6-ä¿®é¥°å™¨çš„åŒºåˆ«"><a href="#ä¸-ES6-ä¿®é¥°å™¨çš„åŒºåˆ«" class="headerlink" title="ä¸ ES6 ä¿®é¥°å™¨çš„åŒºåˆ«"></a>ä¸ ES6 ä¿®é¥°å™¨çš„åŒºåˆ«</h4><p>ES6 æä¾›ä¿®é¥°å™¨æ–¹ææ¡ˆï¼Œåœ¨ babel è½¬è¯‘åæ”¯æŒï¼Œå¯ä»¥ä¿®é¥°ç±»æˆ–ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†å¹¶ä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">cost</span>(): <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">getDescription</span>(): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">milkDecorator</span>(<span class="params">target: () =&gt; <span class="built_in">number</span></span>): <span class="function">() =&gt;</span> <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="number">2</span> + <span class="title function_">target</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitTea</span> <span class="keyword">implements</span> <span class="title class_">BeverageInterface</span> &#123;</span><br><span class="line">  description = <span class="string">&quot;FruitTea&quot;</span>;</span><br><span class="line">  <span class="title function_">getDescription</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">description</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitTeaWithMilk</span> <span class="keyword">extends</span> <span class="title class_ inherited__">FruitTea</span> &#123;</span><br><span class="line">  <span class="meta">@milkDecorator</span></span><br><span class="line">  <span class="title function_">cost</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">cost</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fruitTea = <span class="keyword">new</span> <span class="title class_">FruitTeaWithMilk</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitTea.<span class="title function_">cost</span>());</span><br></pre></td></tr></table></figure>


<ul>
<li>ç»§æ‰¿å±äºæ‰©å±•å½¢å¼ä¹‹ä¸€ï¼Œä½†ä¸è§å¾—æ˜¯è¾¾åˆ°å¼¹æ€§è®¾è®¡çš„æœ€ä½³æ–¹å¼ã€‚</li>
<li>åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­ï¼Œåº”è¯¥å…è®¸è¡Œä¸ºå¯ä»¥è¢«æ‰©å±•ï¼Œè€Œæ— é¡»ä¿®æ”¹ç°æœ‰çš„ä»£ç ã€‚</li>
<li>ç»„åˆå’Œå§”æ‰˜å¯ç”¨äºåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åŠ ä¸Šæ–°çš„è¡Œä¸ºã€‚</li>
<li>é™¤äº†ç»§æ‰¿ï¼Œè£…é¥°è€…æ¨¡å¼ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ‰©å±•è¡Œä¸ºã€‚</li>
<li>è£…é¥°è€…æ¨¡å¼æ„å‘³ç€ä¸€ç¾¤è£…é¥°è€…ç±»ï¼Œè¿™äº›ç±»ç”¨æ¥åŒ…è£…å…·ä½“ç»„ä»¶ã€‚</li>
<li>å¼€æ”¾ä¸€å…³é—­åŸåˆ™</li>
<li>è£…é¥°è€…ç±»åæ˜ å‡ºè¢«è£…é¥°çš„ç»„ä»¶ç±»å‹(äº‹å®ä¸Šï¼Œä»–ä»¬å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œéƒ½ç»è¿‡æ¥å£æˆ–ç»§æ‰¿å®)</li>
<li>è£…é¥°è€…å¯ä»¥åœ¨è¢«è£…é¥°è€…çš„è¡Œä¸ºå‰é¢ä¸&#x2F;æˆ–åé¢åŠ ä¸Šè‡ªå·±çš„è¡Œä¸ºï¼Œç”šè‡³å°†è¢«è£…é¥°è€…çš„è¡Œä¸ºæ•´ä¸ªå–ä»£æ‰ï¼Œè€Œè¾¾åˆ°ç‰¹å®šçš„ç›®çš„ã€‚</li>
<li>ä½ å¯ä»¥ç”¨æ— æ•°ä¸ªè£…é¥°è€…åŒ…è£…ä¸€ä¸ªç»„ä»¶ã€‚</li>
<li>è£…é¥°è€…ä¸€èˆ¬å¯¹ç»„ä»¶çš„å®¢æˆ·æ˜¯é€æ˜çš„ï¼Œé™¤éå®¢æˆ·ç¨‹åºä¾èµ–äºç»„ä»¶çš„å…·ä½“ç±»å‹ã€‚</li>
<li>è£…é¥°è€…ä¼šå¯¼è‡´è®¾è®¡ä¸­å‡ºç°è®¸å¤šå°å¯¹è±¡ï¼Œå¦‚æœè¿‡åº¦ä½¿ç”¨ï¼Œä¼šè®©ç¨‹åºå˜å¾—å¾ˆå¤æ‚ã€‚</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-db/DQLè¯­è¨€"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/64b5a8e1f0ec/"
    >MySQL DQLæŸ¥è¯¢è¯­è¨€</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/64b5a8e1f0ec/" class="article-date">
  <time datetime="2021-12-09T01:55:38.000Z" itemprop="datePublished">2021-12-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>DQL (Data Query Language)æ•°æ®æŸ¥è¯¢è¯­è¨€;</p>
<h4 id="åŸºæœ¬æŸ¥è¯¢"><a href="#åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="åŸºæœ¬æŸ¥è¯¢"></a>åŸºæœ¬æŸ¥è¯¢</h4><p>1ã€æŸ¥è¯¢çš„ç»“æœé›† æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨<br>2ã€select æŸ¥è¯¢åˆ—è¡¨  ç±»ä¼¼äº<code>System.out.println(æ‰“å°å†…å®¹)</code>;</p>
<p>selectåé¢è·Ÿçš„æŸ¥è¯¢åˆ—è¡¨ï¼Œå¯ä»¥æœ‰å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸­é—´ç”¨é€—å·éš”å¼€<br>ä¾‹å¦‚ï¼šselect å­—æ®µ1,å­—æ®µ2,è¡¨è¾¾å¼ from è¡¨;</p>
<p><code>System.out.println()</code>çš„æ‰“å°å†…å®¹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªã€‚</p>
<p>3ã€æ‰§è¡Œé¡ºåº</p>
<p>â‘  fromå­å¥<br>â‘¡ selectå­å¥</p>
<p>4ã€æŸ¥è¯¢åˆ—è¡¨å¯ä»¥æ˜¯ï¼šå­—æ®µã€è¡¨è¾¾å¼ã€å¸¸é‡ã€å‡½æ•°ç­‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">#ä¸€ã€æŸ¥è¯¢å¸¸é‡</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span> ;</span><br><span class="line"></span><br><span class="line">#äºŒã€æŸ¥è¯¢è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">%</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">#ä¸‰ã€æŸ¥è¯¢å•ä¸ªå­—æ®µ</span><br><span class="line"><span class="keyword">SELECT</span> `last_name` <span class="keyword">FROM</span> `employees`;</span><br><span class="line"></span><br><span class="line">#å››ã€æŸ¥è¯¢å¤šä¸ªå­—æ®µ</span><br><span class="line"><span class="keyword">SELECT</span> `last_name`,`email`,`employee_id` <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">#äº”ã€æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `employees`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#F12:å¯¹é½æ ¼å¼</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    `last_name`,</span><br><span class="line">    `first_name`,</span><br><span class="line">    `last_name`,</span><br><span class="line">    `commission_pct`,</span><br><span class="line">    `hiredate`,</span><br><span class="line">    `salary` </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    employees ;</span><br><span class="line">    </span><br><span class="line">#å…­ã€æŸ¥è¯¢å‡½æ•°ï¼ˆè°ƒç”¨å‡½æ•°ï¼Œè·å–è¿”å›å€¼ï¼‰</span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> VERSION();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>();</span><br><span class="line"></span><br><span class="line">#ä¸ƒã€èµ·åˆ«å</span><br><span class="line">#æ–¹å¼ä¸€ï¼šä½¿ç”¨<span class="keyword">as</span>å…³é”®å­—</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>() <span class="keyword">AS</span> ç”¨æˆ·å;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>() <span class="keyword">AS</span> &quot;ç”¨æˆ·å&quot;;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>() <span class="keyword">AS</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">AS</span> &quot;å§“ å&quot; <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ–¹å¼äºŒï¼šä½¿ç”¨ç©ºæ ¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()   ç”¨æˆ·å;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()   &quot;ç”¨æˆ·å&quot;;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()   <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name   &quot;å§“ å&quot; <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å…«ã€<span class="operator">+</span>çš„ä½œç”¨</span><br><span class="line"><span class="comment">-- éœ€æ±‚ï¼šæŸ¥è¯¢ first_name å’Œlast_name æ‹¼æ¥æˆçš„å…¨åï¼Œæœ€ç»ˆèµ·åˆ«åä¸ºï¼šå§“ å</span></span><br><span class="line"></span><br><span class="line">#æ–¹æ¡ˆ<span class="number">1</span>ï¼šä½¿ç”¨<span class="operator">+</span>    passÃ—</span><br><span class="line"><span class="keyword">SELECT</span> first_name<span class="operator">+</span>last_name <span class="keyword">AS</span> &quot;å§“ å&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ–¹æ¡ˆ<span class="number">2</span>ï¼šä½¿ç”¨concatæ‹¼æ¥å‡½æ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(first_name,last_name) <span class="keyword">AS</span> &quot;å§“ å&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Javaä¸­+çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">1ã€åŠ æ³•è¿ç®—</span></span><br><span class="line"><span class="comment">	100+1.5      &#x27;a&#x27;+2    1.3+&#x27;2&#x27;</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">2ã€æ‹¼æ¥ç¬¦</span></span><br><span class="line"><span class="comment">	è‡³å°‘æœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">	&quot;hello&quot;+&#x27;a&#x27;</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">mysqlä¸­+çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">1ã€åŠ æ³•è¿ç®—</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">â‘ ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•°å€¼å‹</span></span><br><span class="line"><span class="comment">100+1.5</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">â‘¡å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ä¸ºå­—ç¬¦å‹</span></span><br><span class="line"><span class="comment">å°†å­—ç¬¦å‹æ•°æ®å¼ºåˆ¶è½¬æ¢æˆæ•°å€¼å‹,å¦‚æœæ— æ³•è½¬æ¢ï¼Œåˆ™ç›´æ¥å½“åš0å¤„ç†</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#x27;å¼ æ— å¿Œ&#x27;+100===&gt;100</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">â‘¢å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ä¸ºnull</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">null+null====ã€‹null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">null+100====ã€‹ null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">#ä¹ã€<span class="keyword">distinct</span>çš„ä½¿ç”¨ å»é‡</span><br><span class="line"></span><br><span class="line">#éœ€æ±‚ï¼šæŸ¥è¯¢å‘˜å·¥æ¶‰åŠåˆ°çš„éƒ¨é—¨ç¼–å·æœ‰å“ªäº›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#åã€æŸ¥çœ‹è¡¨çš„ç»“æ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">DESC</span> employees;</span><br><span class="line"><span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>æ˜¾ç¤ºå‡ºè¡¨ <code>employees</code> çš„å…¨éƒ¨åˆ—ï¼Œå„ä¸ªåˆ—ä¹‹é—´ç”¨é€—å·è¿æ¥ï¼Œåˆ—å¤´æ˜¾ç¤ºæˆ <code>OUT_PUT</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(employee_id,<span class="string">&#x27;,&#x27;</span>,first_name,<span class="string">&#x27;,&#x27;</span>,last_name,<span class="string">&#x27;,&#x27;</span>,salary,<span class="string">&#x27;,&#x27;</span>,IFNULL(commission_pct,<span class="string">&#x27;&#x27;</span>))  <span class="keyword">AS</span> &quot;OUT_PUT&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">#ifnull(è¡¨è¾¾å¼<span class="number">1</span>ï¼Œè¡¨è¾¾å¼<span class="number">2</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¡¨è¾¾å¼1ï¼šå¯èƒ½ä¸ºnullçš„å­—æ®µæˆ–è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">è¡¨è¾¾å¼2ï¼šå¦‚æœè¡¨è¾¾å¼1ä¸ºnullï¼Œåˆ™æœ€ç»ˆç»“æœæ˜¾ç¤ºçš„å€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šå¦‚æœè¡¨è¾¾å¼1ä¸ºnullï¼Œåˆ™æ˜¾ç¤ºè¡¨è¾¾å¼2ï¼Œå¦åˆ™æ˜¾ç¤ºè¡¨è¾¾å¼1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> commission_pct,IFNULL(commission_pct,<span class="string">&#x27;ç©º&#x27;</span>) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h4 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h4><p>select æŸ¥è¯¢åˆ—è¡¨<br>from  è¡¨å<br>where ç­›é€‰æ¡ä»¶;</p>
<p>æ‰§è¡Œé¡ºåºï¼š<br>â‘ fromå­å¥<br>â‘¡whereå­å¥<br>â‘¢selectå­å¥</p>
<p>1ã€æŒ‰å…³ç³»è¡¨è¾¾å¼ç­›é€‰</p>
<p>å…³ç³»è¿ç®—ç¬¦ï¼š&gt;   &lt;    &gt;&#x3D;   &lt;&#x3D;     &#x3D;     &lt;&gt;<br>              è¡¥å……ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨!&#x3D;,ä½†ä¸å»ºè®®</p>
<p>2ã€æŒ‰é€»è¾‘è¡¨è¾¾å¼ç­›é€‰</p>
<p>é€»è¾‘è¿ç®—ç¬¦ï¼šand    or   not<br>          è¡¥å……ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨&amp;&amp;  ||   !  ï¼Œä½†ä¸å»ºè®®</p>
<p>3ã€æ¨¡ç³ŠæŸ¥è¯¢</p>
<p>like<br>in<br>between and<br>is null</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">#ä¸€ã€æŒ‰å…³ç³»è¡¨è¾¾å¼ç­›é€‰</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯<span class="number">100</span>çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">&lt;&gt;</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢å·¥èµ„<span class="operator">&lt;</span><span class="number">15000</span>çš„å§“åã€å·¥èµ„</span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&lt;</span><span class="number">15000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#äºŒã€æŒ‰é€»è¾‘è¡¨è¾¾å¼ç­›é€‰</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯ <span class="number">50</span><span class="number">-100</span>ä¹‹é—´å‘˜å·¥å§“åã€éƒ¨é—¨ç¼–å·ã€é‚®ç®±</span><br><span class="line">#æ–¹å¼<span class="number">1</span>ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id,email</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">&lt;</span><span class="number">50</span> <span class="keyword">OR</span> department_id<span class="operator">&gt;</span><span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id,email</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span>(department_id<span class="operator">&gt;=</span><span class="number">50</span> <span class="keyword">AND</span> department_id<span class="operator">&lt;=</span><span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢å¥–é‡‘ç‡<span class="operator">&gt;</span><span class="number">0.03</span> æˆ–è€… å‘˜å·¥ç¼–å·åœ¨<span class="number">60</span><span class="number">-110</span>ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct<span class="operator">&gt;</span><span class="number">0.03</span> <span class="keyword">OR</span> (employee_id <span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> employee_id<span class="operator">&lt;=</span><span class="number">110</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">#<span class="number">1</span>ã€<span class="keyword">like</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šä¸€èˆ¬å’Œé€šé…ç¬¦æ­é…ä½¿ç”¨ï¼Œå¯¹å­—ç¬¦å‹æ•°æ®è¿›è¡Œéƒ¨åˆ†åŒ¹é…æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">å¸¸è§çš„é€šé…ç¬¦ï¼š</span></span><br><span class="line"><span class="comment">_ ä»»æ„å•ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">% ä»»æ„å¤šä¸ªå­—ç¬¦,æ”¯æŒ0-å¤šä¸ª</span></span><br><span class="line"><span class="comment">like/not like </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«å­—ç¬¦açš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«æœ€åä¸€ä¸ªå­—ç¬¦ä¸ºeçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">3</span>ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºeçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;e%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">4</span>ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºxçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;__x%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">5</span>ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«ç¬¬äºŒä¸ªå­—ç¬¦ä¸º_çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;_\_%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;_$_%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>ã€<span class="keyword">in</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šæŸ¥è¯¢æŸå­—æ®µçš„å€¼æ˜¯å¦å±äºæŒ‡å®šçš„åˆ—è¡¨ä¹‹å†…</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">a  in(å¸¸é‡å€¼1,å¸¸é‡å€¼2,å¸¸é‡å€¼3,...)</span></span><br><span class="line"><span class="comment">a not in(å¸¸é‡å€¼1,å¸¸é‡å€¼2,å¸¸é‡å€¼3,...)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">in/not in</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯<span class="number">30</span><span class="operator">/</span><span class="number">50</span><span class="operator">/</span><span class="number">90</span>çš„å‘˜å·¥åã€éƒ¨é—¨ç¼–å·</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">1</span>ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(<span class="number">30</span>,<span class="number">50</span>,<span class="number">90</span>);</span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">OR</span> department_id <span class="operator">=</span> <span class="number">50</span></span><br><span class="line"><span class="keyword">OR</span> department_id <span class="operator">=</span> <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢å·¥ç§ç¼–å·ä¸æ˜¯SH_CLERKæˆ–IT_PROGçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">#æ–¹å¼<span class="number">1</span>ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="keyword">NOT</span> <span class="keyword">IN</span>(<span class="string">&#x27;SH_CLERK&#x27;</span>,<span class="string">&#x27;IT_PROG&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">2</span>ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span>(job_id <span class="operator">=</span><span class="string">&#x27;SH_CLERK&#x27;</span></span><br><span class="line"><span class="keyword">OR</span> job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">3</span>ã€<span class="keyword">between</span> <span class="keyword">and</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šåˆ¤æ–­æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ä»‹äºxxä¹‹é—´</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">between and/not between and</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯<span class="number">30</span><span class="number">-90</span>ä¹‹é—´çš„éƒ¨é—¨ç¼–å·ã€å‘˜å·¥å§“å</span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">1</span>ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> department_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">BETWEEN</span> <span class="number">30</span> <span class="keyword">AND</span> <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">#æ–¹å¼<span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id<span class="operator">&gt;=</span><span class="number">30</span> <span class="keyword">AND</span> department_id<span class="operator">&lt;=</span><span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢å¹´è–ªä¸æ˜¯<span class="number">100000</span><span class="number">-200000</span>ä¹‹é—´çš„å‘˜å·¥å§“åã€å·¥èµ„ã€å¹´è–ª</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>)) å¹´è–ª</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>))<span class="operator">&lt;</span><span class="number">100000</span> <span class="keyword">OR</span> salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>))<span class="operator">&gt;</span><span class="number">200000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>)) å¹´è–ª</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>)) <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">100000</span> <span class="keyword">AND</span> <span class="number">200000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">4</span>ã€<span class="keyword">is</span> <span class="keyword">null</span><span class="operator">/</span><span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">IS</span> <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line">#<span class="comment">----------------å¯¹æ¯”------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="operator">=</span>		åªèƒ½åˆ¤æ–­æ™®é€šçš„å†…å®¹</span><br><span class="line"></span><br><span class="line"><span class="keyword">IS</span>              åªèƒ½åˆ¤æ–­<span class="keyword">NULL</span>å€¼</span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;=&gt;</span>             å®‰å…¨ç­‰äºï¼Œæ—¢èƒ½åˆ¤æ–­æ™®é€šå†…å®¹ï¼Œåˆèƒ½åˆ¤æ–­<span class="keyword">NULL</span>å€¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;=&gt;</span> <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="operator">&lt;=&gt;</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h4 id="æ’åºæŸ¥è¯¢"><a href="#æ’åºæŸ¥è¯¢" class="headerlink" title="æ’åºæŸ¥è¯¢"></a>æ’åºæŸ¥è¯¢</h4><p>select æŸ¥è¯¢åˆ—è¡¨<br>from è¡¨å<br>ã€where ç­›é€‰æ¡ä»¶ã€‘<br>order by æ’åºåˆ—è¡¨</p>
<p>æ‰§è¡Œé¡ºåºï¼š</p>
<p>â‘ fromå­å¥<br>â‘¡whereå­å¥<br>â‘¢selectå­å¥<br>â‘£order by å­å¥</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>1ã€æ’åºåˆ—è¡¨å¯ä»¥æ˜¯å•ä¸ªå­—æ®µã€å¤šä¸ªå­—æ®µã€è¡¨è¾¾å¼ã€å‡½æ•°ã€åˆ—æ•°ã€ä»¥åŠä»¥ä¸Šçš„ç»„åˆ<br>2ã€å‡åº ï¼Œé€šè¿‡ asc   ï¼Œé»˜è®¤è¡Œä¸º<br>   é™åº ï¼Œé€šè¿‡ desc</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#ä¸€ã€æŒ‰å•ä¸ªå­—æ®µæ’åº</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šå°†å‘˜å·¥ç¼–å·<span class="operator">&gt;</span><span class="number">120</span>çš„å‘˜å·¥ä¿¡æ¯è¿›è¡Œå·¥èµ„çš„å‡åº</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary ;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šå°†å‘˜å·¥ç¼–å·<span class="operator">&gt;</span><span class="number">120</span>çš„å‘˜å·¥ä¿¡æ¯è¿›è¡Œå·¥èµ„çš„é™åº</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> employee_id<span class="operator">&gt;</span><span class="number">120</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">#äºŒã€æŒ‰è¡¨è¾¾å¼æ’åº</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šå¯¹æœ‰å¥–é‡‘çš„å‘˜å·¥ï¼ŒæŒ‰å¹´è–ªé™åº</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>,salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>))  å¹´è–ª</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>)) <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¸‰ã€æŒ‰åˆ«åæ’åº</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šå¯¹æœ‰å¥–é‡‘çš„å‘˜å·¥ï¼ŒæŒ‰å¹´è–ªé™åº</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>,salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>))  å¹´è–ª</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> å¹´è–ª <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">#å››ã€æŒ‰å‡½æ•°çš„ç»“æœæ’åº</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŒ‰å§“åçš„å­—æ•°é•¿åº¦è¿›è¡Œå‡åº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> LENGTH(last_name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#äº”ã€æŒ‰å¤šä¸ªå­—æ®µæ’åº</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢å‘˜å·¥çš„å§“åã€å·¥èµ„ã€éƒ¨é—¨ç¼–å·ï¼Œå…ˆæŒ‰å·¥èµ„å‡åºï¼Œå†æŒ‰éƒ¨é—¨ç¼–å·é™åº</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">ASC</span>,department_id <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å…­ã€è¡¥å……é€‰å­¦ï¼šæŒ‰åˆ—æ•°æ’åº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span> <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> first_name;</span><br></pre></td></tr></table></figure>

<h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><p>å‡½æ•°ï¼šç±»ä¼¼äºjavaä¸­å­¦è¿‡çš„â€œæ–¹æ³•â€ï¼Œ<br>ä¸ºäº†è§£å†³æŸä¸ªé—®é¢˜ï¼Œå°†ç¼–å†™çš„ä¸€ç³»åˆ—çš„å‘½ä»¤é›†åˆå°è£…åœ¨ä¸€èµ·ï¼Œå¯¹å¤–ä»…ä»…æš´éœ²æ–¹æ³•åï¼Œä¾›å¤–éƒ¨è°ƒç”¨</p>
<p>1ã€è‡ªå®šä¹‰æ–¹æ³•(å‡½æ•°)<br>2ã€è°ƒç”¨æ–¹æ³•(å‡½æ•°)â˜…<br>    å«ä»€ä¹ˆ  ï¼šå‡½æ•°å<br>    å¹²ä»€ä¹ˆ  ï¼šå‡½æ•°åŠŸèƒ½</p>
<h5 id="å•è¡Œå‡½æ•°"><a href="#å•è¡Œå‡½æ•°" class="headerlink" title="å•è¡Œå‡½æ•°"></a>å•è¡Œå‡½æ•°</h5><ul>
<li><p>å­—ç¬¦å‡½æ•°<br>  <code>concat</code><br>  <code>substr</code><br>  <code>lengthï¼ˆstrï¼‰</code><br>  <code>char_length</code><br>  <code>upper</code><br>  <code>lower</code><br>  <code>trim</code><br>  <code>left</code><br>  <code>right</code><br>  <code>lpad</code><br>  <code>rpad</code><br>  <code>instr</code><br>  <code>strcmp</code></p>
</li>
<li><p>æ•°å­¦å‡½æ•°<br>  <code>abs</code><br>  <code>ceil</code><br>  <code>floor</code><br>  <code>round</code><br>  <code>truncate</code><br>  <code>mod</code></p>
</li>
<li><p>æ—¥æœŸå‡½æ•°<br>  <code>now</code><br>  <code>curtime</code><br>  <code>curdate</code><br>  <code>datediff</code><br>  <code>date_format</code><br>  <code>str_to_date</code></p>
</li>
<li><p>æµç¨‹æ§åˆ¶å‡½æ•°<br>  <code>if</code><br>  <code>case</code></p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ã€CONCAT æ‹¼æ¥å­—ç¬¦</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;hello,&#x27;</span>,first_name,last_name)  å¤‡æ³¨ <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€LENGTH è·å–å­—èŠ‚é•¿åº¦</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;hello,éƒ­è¥„&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€<span class="keyword">CHAR_LENGTH</span> è·å–å­—ç¬¦ä¸ªæ•°</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;hello,éƒ­è¥„&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ã€SUBSTRING æˆªå–å­ä¸²</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼šèµ·å§‹ç´¢å¼•ä»1å¼€å§‹ï¼ï¼ï¼</span></span><br><span class="line"><span class="comment">substr(str,èµ·å§‹ç´¢å¼•ï¼Œæˆªå–çš„å­—ç¬¦é•¿åº¦)</span></span><br><span class="line"><span class="comment">substr(str,èµ·å§‹ç´¢å¼•)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;å¼ ä¸‰ä¸°çˆ±ä¸Šäº†éƒ­è¥„&#x27;</span>,<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;å¼ ä¸‰ä¸°çˆ±ä¸Šäº†éƒ­è¥„&#x27;</span>,<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>ã€INSTRè·å–å­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;ä¸‰æ‰“ç™½éª¨ç²¾aaaç™½éª¨ç²¾bbç™½éª¨ç²¾&#x27;</span>,<span class="string">&#x27;ç™½éª¨ç²¾&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>ã€TRIMå»å‰åæŒ‡å®šçš„å­—ç¬¦ï¼Œé»˜è®¤æ˜¯å»ç©ºæ ¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27; è™š  ç«¹    &#x27;</span>)  <span class="keyword">AS</span> a;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;x&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;xxxxxxè™šxxxç«¹xxxxxxxxxxxxxxxxxx&#x27;</span>)  <span class="keyword">AS</span> a;</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>ã€LPAD<span class="operator">/</span>RPAD  å·¦å¡«å……<span class="operator">/</span>å³å¡«å……</span><br><span class="line"><span class="keyword">SELECT</span> LPAD(<span class="string">&#x27;æœ¨å©‰æ¸…&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> RPAD(<span class="string">&#x27;æœ¨å©‰æ¸…&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>ã€UPPER<span class="operator">/</span>LOWER  å˜å¤§å†™<span class="operator">/</span>å˜å°å†™</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨çš„å§“åï¼Œè¦æ±‚æ ¼å¼ï¼šå§“é¦–å­—ç¬¦å¤§å†™ï¼Œå…¶ä»–å­—ç¬¦å°å†™ï¼Œåæ‰€æœ‰å­—ç¬¦å¤§å†™ï¼Œä¸”å§“å’Œåä¹‹é—´ç”¨_åˆ†å‰²ï¼Œæœ€åèµ·åˆ«åâ€œOUTPUTâ€</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(SUBSTR(first_name,<span class="number">1</span>,<span class="number">1</span>)),first_name <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(SUBSTR(first_name,<span class="number">2</span>)),first_name <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(last_name) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="built_in">UPPER</span>(SUBSTR(first_name,<span class="number">1</span>,<span class="number">1</span>)),<span class="built_in">LOWER</span>(SUBSTR(first_name,<span class="number">2</span>)),<span class="string">&#x27;_&#x27;</span>,<span class="built_in">UPPER</span>(last_name)) &quot;OUTPUT&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>ã€STRCMP æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦å¤§å°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> STRCMP(<span class="string">&#x27;aec&#x27;</span>,<span class="string">&#x27;aec&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>ã€<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>  æˆªå–å­ä¸²</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;é¸ æ‘©æ™º&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;é¸ æ‘©æ™º&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#äºŒã€æ•°å­¦å‡½æ•°</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>ã€ABS ç»å¯¹å€¼</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-2.4</span>);</span><br><span class="line"><span class="number">2</span>ã€CEIL å‘ä¸Šå–æ•´  è¿”å›<span class="operator">&gt;=</span>è¯¥å‚æ•°çš„æœ€å°æ•´æ•°</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">-1.09</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">0.09</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">1.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€FLOOR å‘ä¸‹å–æ•´ï¼Œè¿”å›<span class="operator">&lt;=</span>è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•°</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">-1.09</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">0.09</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">1.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ã€ROUND å››èˆäº”å…¥</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">1.8712345</span>);</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">1.8712345</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>ã€<span class="keyword">TRUNCATE</span> æˆªæ–­</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TRUNCATE</span>(<span class="number">1.8712345</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>ã€MOD å–ä½™</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">-10</span>,<span class="number">3</span>);</span><br><span class="line">a<span class="operator">%</span>b <span class="operator">=</span> a<span class="operator">-</span>(<span class="type">INT</span>)a<span class="operator">/</span>b<span class="operator">*</span>b</span><br><span class="line"><span class="number">-10</span><span class="operator">%</span><span class="number">3</span> <span class="operator">=</span> <span class="number">-10</span> <span class="operator">-</span> (<span class="number">-10</span>)<span class="operator">/</span><span class="number">3</span><span class="operator">*</span><span class="number">3</span>   <span class="operator">=</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">-10</span><span class="operator">%</span><span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">10</span><span class="operator">%</span><span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">-10</span><span class="operator">%</span><span class="number">-3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">10</span><span class="operator">%</span><span class="number">-3</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¸‰ã€æ—¥æœŸå‡½æ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>ã€NOW</span><br><span class="line"><span class="keyword">SELECT</span> NOW();</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€CURDATE</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CURDATE();</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€CURTIME</span><br><span class="line"><span class="keyword">SELECT</span> CURTIME();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ã€DATEDIFF</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(<span class="string">&#x27;1998-7-16&#x27;</span>,<span class="string">&#x27;2019-7-13&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>ã€DATE_FORMAT</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(<span class="string">&#x27;1998-7-16&#x27;</span>,<span class="string">&#x27;%Yå¹´%Mæœˆ%dæ—¥ %Hå°æ—¶%iåˆ†é’Ÿ%sç§’&#x27;</span>) å‡ºç”Ÿæ—¥æœŸ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(hiredate,<span class="string">&#x27;%Yå¹´%Mæœˆ%dæ—¥ %Hå°æ—¶%iåˆ†é’Ÿ%sç§’&#x27;</span>)å…¥èŒæ—¥æœŸ </span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>ã€STR_TO_DATE æŒ‰æŒ‡å®šæ ¼å¼è§£æå­—ç¬¦ä¸²ä¸ºæ—¥æœŸç±»å‹</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> hiredate<span class="operator">&lt;</span>STR_TO_DATE(<span class="string">&#x27;3/15 1998&#x27;</span>,<span class="string">&#x27;%m/%d %Y&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å››ã€æµç¨‹æ§åˆ¶å‡½æ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>ã€IFå‡½æ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> IF(<span class="number">100</span><span class="operator">&gt;</span><span class="number">9</span>,<span class="string">&#x27;å¥½&#x27;</span>,<span class="string">&#x27;å&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#éœ€æ±‚ï¼šå¦‚æœæœ‰å¥–é‡‘ï¼Œåˆ™æ˜¾ç¤ºæœ€ç»ˆå¥–é‡‘ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ˜¾ç¤º<span class="number">0</span></span><br><span class="line"><span class="keyword">SELECT</span> IF(commission_pct <span class="keyword">IS</span> <span class="keyword">NULL</span>,<span class="number">0</span>,salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>commission_pct)  å¥–é‡‘,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€<span class="keyword">CASE</span>å‡½æ•°</span><br><span class="line"></span><br><span class="line">â‘ æƒ…å†µ<span class="number">1</span> ï¼šç±»ä¼¼äºswitchè¯­å¥ï¼Œå¯ä»¥å®ç°ç­‰å€¼åˆ¤æ–­</span><br><span class="line"><span class="keyword">CASE</span> è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">WHEN</span> å€¼<span class="number">1</span> <span class="keyword">THEN</span> ç»“æœ<span class="number">1</span></span><br><span class="line"><span class="keyword">WHEN</span> å€¼<span class="number">2</span> <span class="keyword">THEN</span> ç»“æœ<span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">ELSE</span> ç»“æœn</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹ï¼š</span><br><span class="line">éƒ¨é—¨ç¼–å·æ˜¯<span class="number">30</span>ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º<span class="number">2</span>å€</span><br><span class="line">éƒ¨é—¨ç¼–å·æ˜¯<span class="number">50</span>ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º<span class="number">3</span>å€</span><br><span class="line">éƒ¨é—¨ç¼–å·æ˜¯<span class="number">60</span>ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º<span class="number">4</span>å€</span><br><span class="line">å¦åˆ™ä¸å˜</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º éƒ¨é—¨ç¼–å·ï¼Œæ–°å·¥èµ„ï¼Œæ—§å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,salary,</span><br><span class="line"><span class="keyword">CASE</span> department_id</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">30</span> <span class="keyword">THEN</span> salary<span class="operator">*</span><span class="number">2</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">50</span> <span class="keyword">THEN</span> salary<span class="operator">*</span><span class="number">3</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">60</span> <span class="keyword">THEN</span> salary<span class="operator">*</span><span class="number">4</span></span><br><span class="line"><span class="keyword">ELSE</span> salary</span><br><span class="line"><span class="keyword">END</span>  newSalary</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â‘¡æƒ…å†µ<span class="number">2</span>ï¼šç±»ä¼¼äºå¤šé‡IFè¯­å¥ï¼Œå®ç°åŒºé—´åˆ¤æ–­</span><br><span class="line"><span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> æ¡ä»¶<span class="number">1</span> <span class="keyword">THEN</span> ç»“æœ<span class="number">1</span></span><br><span class="line"><span class="keyword">WHEN</span> æ¡ä»¶<span class="number">2</span> <span class="keyword">THEN</span> ç»“æœ<span class="number">2</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">ELSE</span> ç»“æœn</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹ï¼šå¦‚æœå·¥èµ„<span class="operator">&gt;</span><span class="number">20000</span>,æ˜¾ç¤ºçº§åˆ«A</span><br><span class="line">      å·¥èµ„<span class="operator">&gt;</span><span class="number">15000</span>,æ˜¾ç¤ºçº§åˆ«B</span><br><span class="line">      å·¥èµ„<span class="operator">&gt;</span><span class="number">10000</span>,æ˜¾ç¤ºçº§åˆ«C</span><br><span class="line">      å¦åˆ™ï¼Œæ˜¾ç¤ºD</span><br><span class="line">      </span><br><span class="line"> <span class="keyword">SELECT</span> salary,</span><br><span class="line"> <span class="keyword">CASE</span> </span><br><span class="line"> <span class="keyword">WHEN</span> salary<span class="operator">&gt;</span><span class="number">20000</span> <span class="keyword">THEN</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line"> <span class="keyword">WHEN</span> salary<span class="operator">&gt;</span><span class="number">15000</span> <span class="keyword">THEN</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line"> <span class="keyword">WHEN</span> salary<span class="operator">&gt;</span><span class="number">10000</span> <span class="keyword">THEN</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line"> <span class="keyword">ELSE</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line"> <span class="keyword">END</span></span><br><span class="line"> <span class="keyword">AS</span>  a</span><br><span class="line"> <span class="keyword">FROM</span> employees;   </span><br></pre></td></tr></table></figure>

<h5 id="åˆ†ç»„å‡½æ•°"><a href="#åˆ†ç»„å‡½æ•°" class="headerlink" title="åˆ†ç»„å‡½æ•°"></a>åˆ†ç»„å‡½æ•°</h5><p>è¯´æ˜ï¼šåˆ†ç»„å‡½æ•°å¾€å¾€ç”¨äºå®ç°å°†ä¸€ç»„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œåˆç§°ä¸ºèšåˆå‡½æ•°æˆ–ç»Ÿè®¡å‡½æ•°</p>
<p>åˆ†ç»„å‡½æ•°æ¸…å•ï¼š</p>
<p>sum(å­—æ®µå)ï¼šæ±‚å’Œ<br>avg(å­—æ®µå)ï¼šæ±‚å¹³å‡æ•°<br>max(å­—æ®µå)ï¼šæ±‚æœ€å¤§å€¼<br>min(å­—æ®µå)ï¼šæ±‚æœ€å°å€¼<br>count(å­—æ®µå)ï¼šè®¡ç®—éç©ºå­—æ®µå€¼çš„ä¸ªæ•°</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<p>sum,avg ä¸€èˆ¬å¤„ç†æ•°å€¼ç±»å‹ï¼Œmax,min,count å¯ä»¥å¤„ç†ä»»æ„ç±»å‹ï¼Œä»¥ä¸Šåˆ†ç»„å‡½æ•°éƒ½å¿½ç•¥nullå€¼ã€‚</p>
<p>å¯ä»¥å’Œ distinct æ­é…å®ç°å»é‡çš„è¿ç®—</p>
<p>countå‡½æ•°ä¸€èˆ¬ä½¿ç”¨count(*)ç”¨ä½œç»Ÿè®¡è¡Œæ•°</p>
<p>å’Œåˆ†ç»„å‡½æ•°ä¸€åŒæŸ¥è¯¢çš„å­—æ®µæœ‰é™åˆ¶ï¼Œåªèƒ½æ˜¯ group by åé¢çš„å‡½æ•°</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#æ¡ˆä¾‹<span class="number">1</span> ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ï¼Œæ‰€æœ‰å‘˜å·¥çš„å·¥èµ„å’Œã€å·¥èµ„å¹³å‡å€¼ã€æœ€ä½å·¥èµ„ã€æœ€é«˜å·¥èµ„ã€æœ‰å·¥èµ„çš„ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary),<span class="built_in">AVG</span>(salary),<span class="built_in">MIN</span>(salary),<span class="built_in">MAX</span>(salary),<span class="built_in">COUNT</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæ·»åŠ ç­›é€‰æ¡ä»¶</span><br><span class="line">	#â‘ æŸ¥è¯¢empè¡¨ä¸­è®°å½•æ•°ï¼š</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(employee_id) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">	#â‘¡æŸ¥è¯¢empè¡¨ä¸­æœ‰ä½£é‡‘çš„äººæ•°ï¼š</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	#â‘¢æŸ¥è¯¢empè¡¨ä¸­æœˆè–ªå¤§äº<span class="number">2500</span>çš„äººæ•°ï¼š</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary<span class="operator">&gt;</span><span class="number">2500</span>;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	#â‘£æŸ¥è¯¢æœ‰é¢†å¯¼çš„äººæ•°ï¼š</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(manager_id) <span class="keyword">FROM</span> employees;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">#countçš„è¡¥å……ä»‹ç»â˜…</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">1</span>ã€ç»Ÿè®¡ç»“æœé›†çš„è¡Œæ•°ï¼Œæ¨èä½¿ç”¨<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>ã€æ­é…<span class="keyword">distinct</span>å®ç°å»é‡çš„ç»Ÿè®¡</span><br><span class="line"></span><br><span class="line">#éœ€æ±‚ï¼šæŸ¥è¯¢æœ‰å‘˜å·¥çš„éƒ¨é—¨ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> department_id) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ€è€ƒï¼šæ¯ä¸ªéƒ¨é—¨çš„æ€»å·¥èµ„ã€å¹³å‡å·¥èµ„ï¼Ÿ</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary)  <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary)  <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary) ,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h4><p>select æŸ¥è¯¢åˆ—è¡¨<br>from è¡¨å<br>where ç­›é€‰æ¡ä»¶<br>group by åˆ†ç»„åˆ—è¡¨<br>having åˆ†ç»„åç­›é€‰<br>order by æ’åºåˆ—è¡¨;</p>
<p>æ‰§è¡Œé¡ºåºï¼š<br>â‘ fromå­å¥<br>â‘¡whereå­å¥<br>â‘¢group by å­å¥<br>â‘£havingå­å¥<br>â‘¤selectå­å¥<br>â‘¥order byå­å¥</p>
<p>ç‰¹ç‚¹ï¼š<br>â‘ æŸ¥è¯¢åˆ—è¡¨å¾€å¾€æ˜¯  åˆ†ç»„å‡½æ•°å’Œè¢«åˆ†ç»„çš„å­—æ®µ â˜…<br>â‘¡åˆ†ç»„æŸ¥è¯¢ä¸­çš„ç­›é€‰åˆ†ä¸ºä¸¤ç±»<br>            ç­›é€‰çš„åŸºè¡¨    ä½¿ç”¨çš„å…³é”®è¯        ä½ç½®<br>åˆ†ç»„å‰ç­›é€‰        åŸå§‹è¡¨        where            group by çš„å‰é¢</p>
<p>åˆ†ç»„åç­›é€‰        åˆ†ç»„åçš„ç»“æœé›†  having            group byçš„åé¢</p>
<p>whereâ€”â€”group by â€”â€”having</p>
<p>é—®é¢˜ï¼šåˆ†ç»„å‡½æ•°åšæ¡ä»¶åªå¯èƒ½æ”¾åœ¨havingåé¢ï¼ï¼ï¼</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1</span>ï¼‰ç®€å•çš„åˆ†ç»„</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„å‘˜å·¥å¹³å‡å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢æ¯ä¸ªé¢†å¯¼çš„æ‰‹ä¸‹äººæ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>),manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>ï¼‰å¯ä»¥å®ç°åˆ†ç»„å‰çš„ç­›é€‰</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢é‚®ç®±ä¸­åŒ…å«aå­—ç¬¦çš„ æ¯ä¸ªéƒ¨é—¨çš„æœ€é«˜å·¥èµ„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) æœ€é«˜å·¥èµ„,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæŸ¥è¯¢æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹æœ‰å¥–é‡‘çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) å¹³å‡å·¥èµ„,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">3</span>ï¼‰å¯ä»¥å®ç°åˆ†ç»„åçš„ç­›é€‰</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°<span class="operator">&gt;</span><span class="number">5</span></span><br><span class="line">#åˆ†æ<span class="number">1</span>ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) å‘˜å·¥ä¸ªæ•°,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"></span><br><span class="line">#åˆ†æ<span class="number">2</span>ï¼šåœ¨åˆšæ‰çš„ç»“æœåŸºç¡€ä¸Šï¼Œç­›é€‰å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°<span class="operator">&gt;</span><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) å‘˜å·¥ä¸ªæ•°,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span>  <span class="built_in">COUNT</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">2</span>ï¼šæ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„<span class="operator">&gt;</span><span class="number">12000</span>çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> job_id,<span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct  <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹<span class="number">3</span>ï¼šé¢†å¯¼ç¼–å·<span class="operator">&gt;</span><span class="number">102</span>çš„    æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹çš„æœ€ä½å·¥èµ„å¤§äº<span class="number">5000</span>çš„æœ€ä½å·¥èµ„</span><br><span class="line">#åˆ†æ<span class="number">1</span>ï¼šæŸ¥è¯¢æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹å‘˜å·¥çš„æœ€ä½å·¥èµ„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) æœ€ä½å·¥èµ„,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id;</span><br><span class="line"></span><br><span class="line">#åˆ†æ<span class="number">2</span>ï¼šç­›é€‰åˆšæ‰<span class="number">1</span>çš„ç»“æœ</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) æœ€ä½å·¥èµ„,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id<span class="operator">&gt;</span><span class="number">102</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary)<span class="operator">&gt;</span><span class="number">5000</span> ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">4</span>ï¼‰å¯ä»¥å®ç°æ’åº</span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„<span class="operator">&gt;</span><span class="number">6000</span>çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„,æŒ‰æœ€é«˜å·¥èµ„å‡åº</span><br><span class="line">#åˆ†æ<span class="number">1</span>ï¼šæŒ‰å·¥ç§åˆ†ç»„ï¼ŒæŸ¥è¯¢æ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) æœ€é«˜å·¥èµ„,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span>  <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#åˆ†æ<span class="number">2</span>ï¼šç­›é€‰åˆšæ‰çš„ç»“æœï¼Œçœ‹å“ªä¸ªæœ€é«˜å·¥èµ„<span class="operator">&gt;</span><span class="number">6000</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) æœ€é«˜å·¥èµ„,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span>  <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">6000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#åˆ†æ<span class="number">3</span>ï¼šæŒ‰æœ€é«˜å·¥èµ„å‡åº</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) æœ€é«˜å·¥èµ„,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span>  <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">6000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">MAX</span>(salary) <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">5</span>ï¼‰æŒ‰å¤šä¸ªå­—æ®µåˆ†ç»„</span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ä¸ªå·¥ç§æ¯ä¸ªéƒ¨é—¨çš„æœ€ä½å·¥èµ„,å¹¶æŒ‰æœ€ä½å·¥èµ„é™åº</span><br><span class="line">#æç¤ºï¼šå·¥ç§å’Œéƒ¨é—¨éƒ½ä¸€æ ·ï¼Œæ‰æ˜¯ä¸€ç»„</span><br><span class="line"></span><br><span class="line">å·¥ç§	éƒ¨é—¨  å·¥èµ„</span><br><span class="line"><span class="number">1</span>	<span class="number">10</span>	<span class="number">10000</span></span><br><span class="line"><span class="number">1</span>       <span class="number">20</span>      <span class="number">2000</span></span><br><span class="line"><span class="number">2</span>	<span class="number">20</span></span><br><span class="line"><span class="number">3</span>       <span class="number">20</span></span><br><span class="line"><span class="number">1</span>       <span class="number">10</span></span><br><span class="line"><span class="number">2</span>       <span class="number">30</span></span><br><span class="line"><span class="number">2</span>       <span class="number">20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) æœ€ä½å·¥èµ„,job_id,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id,department_id;</span><br></pre></td></tr></table></figure>


<h4 id="é“¾æ¥æŸ¥è¯¢"><a href="#é“¾æ¥æŸ¥è¯¢" class="headerlink" title="é“¾æ¥æŸ¥è¯¢"></a>é“¾æ¥æŸ¥è¯¢</h4><p>è¯´æ˜ï¼šåˆç§°å¤šè¡¨æŸ¥è¯¢ï¼Œå½“æŸ¥è¯¢è¯­å¥æ¶‰åŠåˆ°çš„å­—æ®µæ¥è‡ªäºå¤šä¸ªè¡¨æ—¶ï¼Œå°±ä¼šç”¨åˆ°è¿æ¥æŸ¥è¯¢</p>
<p>ç¬›å¡å°”ä¹˜ç§¯ç°è±¡ï¼šè¡¨1 æœ‰mè¡Œï¼Œè¡¨2æœ‰nè¡Œï¼Œç»“æœ&#x3D;m*nè¡Œ</p>
<p>å‘ç”ŸåŸå› ï¼šæ²¡æœ‰æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶<br>å¦‚ä½•é¿å…ï¼šæ·»åŠ æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶</p>
<ul>
<li><p>åˆ†ç±»ï¼š</p>
<ul>
<li>æŒ‰å¹´ä»£åˆ†ç±»ï¼š<ul>
<li>sql92æ ‡å‡†:ä»…ä»…æ”¯æŒå†…è¿æ¥<ul>
<li>å†…è¿æ¥ï¼š<ul>
<li>ç­‰å€¼è¿æ¥</li>
<li>éç­‰å€¼è¿æ¥</li>
<li>è‡ªè¿æ¥</li>
</ul>
</li>
</ul>
</li>
<li>sql99æ ‡å‡†ã€æ¨èã€‘ï¼šæ”¯æŒå†…è¿æ¥+å¤–è¿æ¥ï¼ˆå·¦å¤–å’Œå³å¤–ï¼‰+äº¤å‰è¿æ¥</li>
</ul>
</li>
<li>æŒ‰åŠŸèƒ½åˆ†ç±»ï¼š<ul>
<li>å†…è¿æ¥ï¼š<ul>
<li>ç­‰å€¼è¿æ¥</li>
<li>éç­‰å€¼è¿æ¥</li>
<li>è‡ªè¿æ¥</li>
</ul>
</li>
<li>å¤–è¿æ¥ï¼š<ul>
<li>å·¦å¤–è¿æ¥</li>
<li>å³å¤–è¿æ¥</li>
<li>å…¨å¤–è¿æ¥</li>
</ul>
</li>
<li>äº¤å‰è¿æ¥</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="å†…é“¾æ¥"><a href="#å†…é“¾æ¥" class="headerlink" title="å†…é“¾æ¥"></a>å†…é“¾æ¥</h5><p>è¯­æ³•:<br>select æŸ¥è¯¢åˆ—è¡¨<br>from è¡¨1 åˆ«å,è¡¨2 åˆ«å<br>where è¿æ¥æ¡ä»¶<br>and ç­›é€‰æ¡ä»¶<br>group by åˆ†ç»„åˆ—è¡¨<br>having åˆ†ç»„åç­›é€‰<br>order by æ’åºåˆ—è¡¨</p>
<p>æ‰§è¡Œé¡ºåºï¼š</p>
<p>1ã€fromå­å¥<br>2ã€whereå­å¥<br>3ã€andå­å¥<br>4ã€group byå­å¥<br>5ã€havingå­å¥<br>6ã€selectå­å¥<br>7ã€order byå­å¥</p>
<p>SQL92å’ŒSQL99çš„åŒºåˆ«ï¼š<br>    SQL99ï¼Œä½¿ç”¨JOINå…³é”®å­—ä»£æ›¿äº†ä¹‹å‰çš„é€—å·ï¼Œå¹¶ä¸”å°†è¿æ¥æ¡ä»¶å’Œç­›é€‰æ¡ä»¶è¿›è¡Œäº†åˆ†ç¦»ï¼Œæé«˜é˜…è¯»æ€§ï¼ï¼ï¼</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line"><span class="keyword">SELECT</span> æŸ¥è¯¢åˆ—è¡¨</span><br><span class="line"><span class="keyword">FROM</span> è¡¨å<span class="number">1</span> åˆ«å</span><br><span class="line">ã€<span class="keyword">INNER</span>ã€‘ <span class="keyword">JOIN</span>  è¡¨å<span class="number">2</span> åˆ«å</span><br><span class="line"><span class="keyword">ON</span> è¿æ¥æ¡ä»¶</span><br><span class="line"><span class="keyword">WHERE</span> ç­›é€‰æ¡ä»¶</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> åˆ†ç»„åˆ—è¡¨</span><br><span class="line"><span class="keyword">HAVING</span> åˆ†ç»„åç­›é€‰</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> æ’åºåˆ—è¡¨;</span><br><span class="line"></span><br><span class="line">#ä¸€ï¼‰ç­‰å€¼è¿æ¥</span><br><span class="line">#â‘ ç®€å•è¿æ¥</span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥åå’Œéƒ¨é—¨å</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d </span><br><span class="line"> <span class="keyword">JOIN</span>  employees e </span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span>d.department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#â‘¡æ·»åŠ ç­›é€‰æ¡ä»¶</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·<span class="operator">&gt;</span><span class="number">100</span>çš„éƒ¨é—¨åå’Œæ‰€åœ¨çš„åŸå¸‚å</span><br><span class="line"><span class="keyword">SELECT</span> department_name,city</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.`location_id` <span class="operator">=</span> l.`location_id`</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_id`<span class="operator">&gt;</span><span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#â‘¢æ·»åŠ åˆ†ç»„<span class="operator">+</span>ç­›é€‰</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢æ¯ä¸ªåŸå¸‚çš„éƒ¨é—¨ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) éƒ¨é—¨ä¸ªæ•°,l.`city`</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.`location_id`<span class="operator">=</span>l.`location_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> l.`city`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#â‘£æ·»åŠ åˆ†ç»„<span class="operator">+</span>ç­›é€‰<span class="operator">+</span>æ’åº</span><br><span class="line">#æ¡ˆä¾‹<span class="number">1</span>ï¼šæŸ¥è¯¢éƒ¨é—¨ä¸­å‘˜å·¥ä¸ªæ•°<span class="operator">&gt;</span><span class="number">10</span>çš„éƒ¨é—¨åï¼Œå¹¶æŒ‰å‘˜å·¥ä¸ªæ•°é™åº</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) å‘˜å·¥ä¸ªæ•°,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.`department_id`</span><br><span class="line"><span class="keyword">HAVING</span> å‘˜å·¥ä¸ªæ•°<span class="operator">&gt;</span><span class="number">10</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> å‘˜å·¥ä¸ªæ•° <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#äºŒï¼‰éç­‰å€¼è¿æ¥</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·åœ¨<span class="number">10</span><span class="number">-90</span>ä¹‹é—´çš„å‘˜å·¥çš„å·¥èµ„çº§åˆ«ï¼Œå¹¶æŒ‰çº§åˆ«è¿›è¡Œåˆ†ç»„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sal_grade;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) ä¸ªæ•°,grade</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> sal_grade g</span><br><span class="line"><span class="keyword">ON</span> e.`salary` <span class="keyword">BETWEEN</span> g.`min_salary` <span class="keyword">AND</span> g.`max_salary`</span><br><span class="line"><span class="keyword">WHERE</span> e.`department_id` <span class="keyword">BETWEEN</span> <span class="number">10</span> <span class="keyword">AND</span> <span class="number">90</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> g.grade;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¸‰ï¼‰è‡ªè¿æ¥</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥åå’Œå¯¹åº”çš„é¢†å¯¼å</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e.`last_name`,m.`last_name`</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m</span><br><span class="line"><span class="keyword">ON</span> e.`manager_id`<span class="operator">=</span>m.`employee_id`;</span><br></pre></td></tr></table></figure>


<h5 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h5><p>è¯´æ˜ï¼šæŸ¥è¯¢ç»“æœä¸ºä¸»è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ï¼Œå¦‚æœä»è¡¨æœ‰åŒ¹é…é¡¹ï¼Œåˆ™æ˜¾ç¤ºåŒ¹é…é¡¹ï¼›å¦‚æœä»è¡¨æ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™æ˜¾ç¤º null</p>
<p>åº”ç”¨åœºæ™¯ï¼šä¸€èˆ¬ç”¨äºæŸ¥è¯¢ä¸»è¡¨ä¸­æœ‰ä½†ä»è¡¨æ²¡æœ‰çš„è®°å½•</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>1ã€å¤–è¿æ¥åˆ†ä¸»ä»è¡¨ï¼Œä¸¤è¡¨çš„é¡ºåºä¸èƒ½ä»»æ„è°ƒæ¢<br>2ã€å·¦è¿æ¥çš„è¯ï¼Œleft join å·¦è¾¹ä¸ºä¸»è¡¨<br>å³è¿æ¥çš„è¯ï¼Œright join å³è¾¹ä¸ºä¸»è¡¨</p>
<p>è¯­æ³•ï¼š</p>
<p>select æŸ¥è¯¢åˆ—è¡¨<br>from è¡¨ 1 åˆ«å<br>left|right|full ã€outerã€‘ join è¡¨ 2 åˆ«å<br>on è¿æ¥æ¡ä»¶<br>where ç­›é€‰æ¡ä»¶;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ‰€æœ‰å¥³ç¥è®°å½•ï¼Œä»¥åŠå¯¹åº”çš„ç”·ç¥åï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„ç”·ç¥ï¼Œåˆ™æ˜¾ç¤ºä¸ºnull</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¦è¿æ¥</span></span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">LEFT JOIN boys bo ON b.`boyfriend_id` = bo.`<span class="built_in">id</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å³è¿æ¥</span></span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">RIGHT JOIN  beauty b ON b.`boyfriend_id` = bo.`<span class="built_in">id</span>`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹2ï¼šæŸ¥å“ªä¸ªå¥³ç”Ÿæ²¡æœ‰ç”·æœ‹å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¦è¿æ¥</span></span><br><span class="line">SELECT b.`name`</span><br><span class="line">FROM beauty b</span><br><span class="line">LEFT JOIN boys bo ON b.`boyfriend_id` = bo.`<span class="built_in">id</span>`</span><br><span class="line">WHERE bo.`<span class="built_in">id</span>`  IS NULL;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å³è¿æ¥</span></span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">RIGHT JOIN  beauty b ON b.`boyfriend_id` = bo.`<span class="built_in">id</span>`</span><br><span class="line">WHERE bo.`<span class="built_in">id</span>`  IS NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹3ï¼šæŸ¥è¯¢å“ªä¸ªéƒ¨é—¨æ²¡æœ‰å‘˜å·¥ï¼Œå¹¶æ˜¾ç¤ºå…¶éƒ¨é—¨ç¼–å·å’Œéƒ¨é—¨å</span></span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) éƒ¨é—¨ä¸ªæ•°</span><br><span class="line">FROM departments d</span><br><span class="line">LEFT JOIN employees e ON d.`department_id` = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<h4 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h4><p>è¯´æ˜ï¼šå½“ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ä¸­åˆåµŒå¥—äº†å¦ä¸€ä¸ªå®Œæ•´çš„ select è¯­å¥ï¼Œåˆ™è¢«åµŒå¥—çš„ select è¯­å¥ç§°ä¸ºå­æŸ¥è¯¢æˆ–å†…æŸ¥è¯¢<br>å¤–é¢çš„ select è¯­å¥ç§°ä¸ºä¸»æŸ¥è¯¢æˆ–å¤–æŸ¥è¯¢ã€‚</p>
<p>åˆ†ç±»ï¼š</p>
<p>æŒ‰å­æŸ¥è¯¢å‡ºç°çš„ä½ç½®è¿›è¡Œåˆ†ç±»ï¼š</p>
<p>1ã€select åé¢<br>è¦æ±‚ï¼šå­æŸ¥è¯¢çš„ç»“æœä¸ºå•è¡Œå•åˆ—ï¼ˆæ ‡é‡å­æŸ¥è¯¢ï¼‰<br>2ã€from åé¢<br>è¦æ±‚ï¼šå­æŸ¥è¯¢çš„ç»“æœå¯ä»¥ä¸ºå¤šè¡Œå¤šåˆ—<br>3ã€where æˆ– having åé¢ â˜…<br>è¦æ±‚ï¼šå­æŸ¥è¯¢çš„ç»“æœå¿…é¡»ä¸ºå•åˆ—<br>å•è¡Œå­æŸ¥è¯¢<br>å¤šè¡Œå­æŸ¥è¯¢<br>4ã€exists åé¢<br>è¦æ±‚ï¼šå­æŸ¥è¯¢ç»“æœå¿…é¡»ä¸ºå•åˆ—ï¼ˆç›¸å…³å­æŸ¥è¯¢ï¼‰<br>ç‰¹ç‚¹ï¼š<br>1ã€å­æŸ¥è¯¢æ”¾åœ¨æ¡ä»¶ä¸­ï¼Œè¦æ±‚å¿…é¡»æ”¾åœ¨æ¡ä»¶çš„å³ä¾§<br>2ã€å­æŸ¥è¯¢ä¸€èˆ¬æ”¾åœ¨å°æ‹¬å·ä¸­<br>3ã€å­æŸ¥è¯¢çš„æ‰§è¡Œä¼˜å…ˆäºä¸»æŸ¥è¯¢<br>4ã€å•è¡Œå­æŸ¥è¯¢å¯¹åº”äº† å•è¡Œæ“ä½œç¬¦ï¼š&gt; &lt; &gt;&#x3D; &lt;&#x3D; &#x3D; &lt;&gt;<br>å¤šè¡Œå­æŸ¥è¯¢å¯¹åº”äº† å¤šè¡Œæ“ä½œç¬¦ï¼šany&#x2F;some all in</p>
<h5 id="å•è¡Œå­æŸ¥è¯¢"><a href="#å•è¡Œå­æŸ¥è¯¢" class="headerlink" title="å•è¡Œå­æŸ¥è¯¢"></a>å•è¡Œå­æŸ¥è¯¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸€ï¼‰å•è¡Œå­æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹1ï¼šè°çš„å·¥èµ„æ¯” Abel é«˜?</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢Abelçš„å·¥èµ„</span></span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name  = <span class="string">&#x27;Abel&#x27;</span></span><br><span class="line"><span class="comment">#â‘¡æŸ¥è¯¢salary&gt;â‘ çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">SELECT last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name  &lt;&gt; <span class="string">&#x27;Abel&#x27;</span></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹2ï¼šè¿”å›job_idä¸141å·å‘˜å·¥ç›¸åŒï¼Œsalaryæ¯”143å·å‘˜å·¥å¤šçš„å‘˜å·¥å§“åï¼Œjob_id å’Œå·¥èµ„</span></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢141å·å‘˜å·¥çš„job_id</span></span><br><span class="line">SELECT job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id = 141</span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¡æŸ¥è¯¢143å·å‘˜å·¥çš„salary</span></span><br><span class="line"></span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id = 143</span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¢æŸ¥è¯¢job_id=â‘  and salary&gt;â‘¡çš„ä¿¡æ¯</span></span><br><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = (</span><br><span class="line">	SELECT job_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 141</span><br><span class="line">) AND salary&gt;(</span><br><span class="line"></span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 143</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="å¤šè¡Œå­æŸ¥è¯¢"><a href="#å¤šè¡Œå­æŸ¥è¯¢" class="headerlink" title="å¤šè¡Œå­æŸ¥è¯¢"></a>å¤šè¡Œå­æŸ¥è¯¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"><span class="keyword">in</span>:åˆ¤æ–­æŸå­—æ®µæ˜¯å¦åœ¨æŒ‡å®šåˆ—è¡¨å†…</span><br><span class="line">x <span class="keyword">in</span>(10,30,50)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">any/some:åˆ¤æ–­æŸå­—æ®µçš„å€¼æ˜¯å¦æ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ª</span><br><span class="line"></span><br><span class="line">x&gt;any(10,30,50)</span><br><span class="line">x&gt;min()</span><br><span class="line"></span><br><span class="line">x=any(10,30,50)</span><br><span class="line">x <span class="keyword">in</span>(10,30,50)</span><br><span class="line"></span><br><span class="line">all:åˆ¤æ–­æŸå­—æ®µçš„å€¼æ˜¯å¦æ»¡è¶³é‡Œé¢æ‰€æœ‰çš„</span><br><span class="line"></span><br><span class="line">x &gt;all(10,30,50)</span><br><span class="line">x &gt;max()</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹1ï¼šè¿”å›location_idæ˜¯1400æˆ–1700çš„éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥å§“å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢location_idæ˜¯1400æˆ–1700çš„éƒ¨é—¨</span></span><br><span class="line">SELECT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id IN(1400,1700)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¡æŸ¥è¯¢department_id = â‘ çš„å§“å</span></span><br><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#é¢˜ç›®ï¼šè¿”å›å…¶å®ƒéƒ¨é—¨ä¸­æ¯”job_idä¸ºâ€˜IT_PROGâ€™éƒ¨é—¨ä»»ä¸€å·¥èµ„ä½çš„å‘˜å·¥çš„å‘˜å·¥å·ã€å§“åã€job_id ä»¥åŠsalary</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢job_idä¸ºâ€˜IT_PROGâ€™éƒ¨é—¨çš„å·¥èµ„</span></span><br><span class="line">SELECT DISTINCT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¡æŸ¥è¯¢å…¶ä»–éƒ¨é—¨çš„å·¥èµ„&lt;ä»»æ„ä¸€ä¸ªâ‘ çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ANY(</span><br><span class="line"></span><br><span class="line">	SELECT DISTINCT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç­‰ä»·äº</span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line"></span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹3ï¼šè¿”å›å…¶å®ƒéƒ¨é—¨ä¸­æ¯”job_idä¸ºâ€˜IT_PROGâ€™éƒ¨é—¨æ‰€æœ‰å·¥èµ„éƒ½ä½çš„å‘˜å·¥ çš„å‘˜å·¥å·ã€å§“åã€job_id ä»¥åŠsalary</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢job_idä¸ºâ€˜IT_PROGâ€™éƒ¨é—¨çš„å·¥èµ„</span></span><br><span class="line">SELECT DISTINCT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¡æŸ¥è¯¢å…¶ä»–éƒ¨é—¨çš„å·¥èµ„&lt;æ‰€æœ‰â‘ çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ALL(</span><br><span class="line"></span><br><span class="line">	SELECT DISTINCT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç­‰ä»·äº</span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line"></span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒã€æ”¾åœ¨selectåé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹ï¼›æŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯50çš„å‘˜å·¥ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">(</span><br><span class="line">	SELECT COUNT(*)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id = 50</span><br><span class="line">)  ä¸ªæ•°;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‰ã€æ”¾åœ¨fromåé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„çš„å·¥èµ„çº§åˆ«</span></span><br><span class="line"><span class="comment">#â‘ æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span></span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#â‘¡å°†â‘ å’Œsal_gradeä¸¤è¡¨è¿æ¥æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line">SELECT dep_ag.department_id,dep_ag.ag,g.grade</span><br><span class="line">FROM sal_grade g</span><br><span class="line">JOIN (</span><br><span class="line"></span><br><span class="line">	SELECT AVG(salary) ag,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line"></span><br><span class="line">) dep_ag ON dep_ag.ag BETWEEN g.min_salary AND g.max_salary;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å››ã€æ”¾åœ¨existsåé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹1 ï¼šæŸ¥è¯¢æœ‰æ— åå­—å«â€œå¼ ä¸‰ä¸°â€çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">SELECT EXISTS(</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name = <span class="string">&#x27;Abel&#x27;</span></span><br><span class="line"></span><br><span class="line">) æœ‰æ— Abel;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æ²¡æœ‰å¥³æœ‹å‹çš„ç”·ç¥ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">USE girls;</span><br><span class="line"></span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE bo.`<span class="built_in">id</span>` NOT IN(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty b</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE NOT EXISTS(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty b</span><br><span class="line">	WHERE bo.id = b.boyfriend_id</span><br><span class="line">);</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-source/react/â‘¡è®¾è®¡ç†å¿µ"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/6125c216c845/"
    >Reactæºç åˆ†æ â‘¡ è®¾è®¡ç†å¿µ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/6125c216c845/" class="article-date">
  <time datetime="2021-12-06T03:02:35.000Z" itemprop="datePublished">2021-12-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">æºç åˆ†æ</a> / <a class="article-category-link" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="çŠ¶æ€æ¸²æŸ“UI"><a href="#çŠ¶æ€æ¸²æŸ“UI" class="headerlink" title="çŠ¶æ€æ¸²æŸ“UI"></a>çŠ¶æ€æ¸²æŸ“UI</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">UI</span> = <span class="title function_">react</span>(state);</span><br></pre></td></tr></table></figure>

<p>React ç¨‹åºè®¾è®¡å“²å­¦</p>
<ul>
<li>å°†è®¾è®¡å¥½çš„ UI åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§</li>
<li>ç¡®å®š UI state çš„æœ€å°ï¼ˆä¸”å®Œæ•´ï¼‰è¡¨ç¤º</li>
<li>ç¡®å®š state æ”¾ç½®çš„ä½ç½®</li>
<li>æ·»åŠ åå‘æ•°æ®æµï¼Œä½å±‚å±‚çº§ç»„ä»¶æ›´æ–°é«˜å±‚çº§ç»„ä»¶çŠ¶æ€</li>
</ul>
<h4 id="ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿"><a href="#ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿" class="headerlink" title="ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿"></a>ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿</h4><p>Props å’Œç»„åˆä¸ºä½ æä¾›äº†æ¸…æ™°è€Œå®‰å…¨åœ°å®šåˆ¶ç»„ä»¶å¤–è§‚å’Œè¡Œä¸ºçš„çµæ´»æ–¹å¼ã€‚æ³¨æ„ï¼šç»„ä»¶å¯ä»¥æ¥å—ä»»æ„ propsï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒReact å…ƒç´ ä»¥åŠå‡½æ•°ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦åœ¨ç»„ä»¶é—´å¤ç”¨é UI çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å»ºè®®å°†å…¶æå–ä¸ºä¸€ä¸ªå•ç‹¬çš„ JavaScript æ¨¡å—ï¼Œå¦‚å‡½æ•°ã€å¯¹è±¡æˆ–è€…ç±»ã€‚ç»„ä»¶å¯ä»¥ç›´æ¥å¼•å…¥ï¼ˆimportï¼‰è€Œæ— éœ€é€šè¿‡ extend ç»§æ‰¿å®ƒä»¬ã€‚</p>
<h4 id="Fiber"><a href="#Fiber" class="headerlink" title="Fiber"></a>Fiber</h4><p>Fiber å…¶å®å°±æ˜¯Virtual DOMçš„ä¸€ç§å®ç°ï¼Œç›¸æ¯”äºé€šè¿‡React.createElementåˆ›å»ºçš„ Virtual DOMï¼ŒFiberåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†æ›´å¤šçš„å±æ€§ï¼Œä¾‹å¦‚ return, current ç­‰æŒ‡é’ˆï¼Œç”¨äºå°†Fiberå¯¹è±¡é“¾æ¥ä¸ºé“¾è¡¨ã€‚æœ€ç»ˆå½¢æˆä¸€é¢—æ ‘çŠ¶ç»“æ„ï¼Œä¹Ÿå°±æ˜¯Fiberæ ‘ï¼Œä»–å¯¹åº”ç€çœŸå®DOMæ ‘çš„ç»“æ„ã€‚</p>
<p>è€ŒFiberå¯¹è±¡ä¸Šçš„å±æ€§è¿˜ä¸æ­¢è¿™äº›ï¼Œè¿˜æœ‰åƒupdateQueueæ›´æ–°é˜Ÿåˆ—ç­‰å±æ€§ï¼Œä½†åˆ°ç›®å‰ä½ç½®çŸ¥é“Fiberæ˜¯å¯¹DOMæ ‘çš„ä¸€ç§æè¿°ï¼Œå·²ç»è¶³å¤Ÿäº†ã€‚è€Œè®©Reactè®¾è®¡Fiberçš„åŸå› ï¼Œåˆ™æ˜¯å› ä¸ºä¸‹é¢çš„åè°ƒè¿‡ç¨‹ã€‚</p>
<h4 id="åè°ƒ-reconciler"><a href="#åè°ƒ-reconciler" class="headerlink" title="åè°ƒ reconciler"></a>åè°ƒ reconciler</h4><p>è¿™ä¸€æ¦‚å¿µåº”è¯¥æ˜¯å½“æˆ‘ä»¬å¯¹Reactæ‰§è¡Œè¿‡ç¨‹æ·±å…¥æ€è€ƒçš„æ—¶å€™æœ€å®¹æ˜“æƒ³åˆ°çš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡JSXåˆ›å»ºçš„Virtual DOM å¦‚ä½•ä¸çœŸå®çš„ DOM åŒæ­¥ï¼ŒçœŸå®DOMå±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œåˆå¦‚ä½•è¢«è®°å½•åˆ° Virtual DOM ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åš<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/reconciliation.html">åè°ƒ</a>ã€‚ </p>
<p>reconciler æ¨¡å—ï¼Œç”¨äºå¤„ç†åè°ƒç›¸å…³çš„äº‹åŠ¡ã€‚Diffç®—æ³•ä¹Ÿåœ¨è¿™ä¸ªæœŸé—´å‘ç”Ÿã€‚</p>
<p>React15ä¹‹å‰çš„åè°ƒè¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå«stack reconcilerã€‚</p>
<p>JSçš„æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„,ç”±äºæµè§ˆå™¨å™¨è§¦å‘çš„äº‹ä»¶ï¼ˆç”¨æˆ·äº¤äº’è§¦å‘çš„äº‹ä»¶å›è°ƒï¼‰æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€ä»¥ä¼šç­‰å¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œåœ¨æ›´æ–°æ¯”è¾ƒè€—æ—¶çš„ä»»åŠ¡æ—¶ï¼Œä¼šé˜»å¡ç”¨æˆ·çš„äº¤äº’ã€‚</p>
<p>ä¹Ÿè®¸ä¼šè€ƒè™‘å°†è€—æ—¶ä»»åŠ¡æ”¾åˆ°å¼‚æ­¥ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œä½†æœ€ç»ˆè¿˜æ˜¯ä¼šå›åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•å°±æ˜¯ä»»åŠ¡åˆ†å‰²ï¼Œå½“å…¶ä»–ä¼˜å…ˆçº§æ¯”è¾ƒé«˜çš„ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œå°†æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ‰“æ–­è®©å‡ºæ‰§è¡Œæƒã€‚ä¹‹åå†ä»ä¸­æ–­çš„éƒ¨åˆ†å¼€å§‹å¼‚æ­¥æ‰§è¡Œå‰©ä¸‹çš„è®¡ç®—ã€‚</p>
<p>ä¸ºäº†å°†è€çš„åŒæ­¥æ›´æ–°çš„æ¶æ„å˜ä¸ºå¼‚æ­¥å¯ä¸­æ–­æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦ä¸€å¥—æ•°æ®ç»“æ„è®©å®ƒæ—¢èƒ½å¯¹åº”çœŸå®çš„domåˆèƒ½ä½œä¸ºåˆ†éš”çš„å•å…ƒï¼Œè¿™å°±æ˜¯Fiberã€‚</p>
<h4 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h4><p>æœ‰äº†Fiberï¼Œå°±éœ€è¦ç”¨æµè§ˆå™¨çš„æ—¶é—´ç‰‡å¼‚æ­¥æ‰§è¡Œè¿™äº›Fiberçš„å·¥ä½œå•å…ƒï¼Œæµè§ˆå™¨æœ‰ä¸€ä¸ªapiå«åšrequestIdleCallbackï¼Œå®ƒå¯ä»¥åœ¨æµè§ˆå™¨ç©ºé—²çš„æ—¶å€™æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªapiæ‰§è¡Œreactçš„æ›´æ–°ï¼Œè®©é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼˜å…ˆå“åº”ä¸å°±å¯ä»¥äº†å—ï¼Œä½†äº‹å®æ˜¯ requestIdleCallback å­˜åœ¨ç€æµè§ˆå™¨çš„å…¼å®¹æ€§å’Œè§¦å‘ä¸ç¨³å®šçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨jså®ç°ä¸€å¥—æ—¶é—´ç‰‡è¿è¡Œçš„æœºåˆ¶ï¼Œåœ¨reactä¸­è¿™éƒ¨åˆ†å«åšschedulerã€‚</p>
<p>ä¸‹é¢ç”¨ä¼ªä»£ç ç†è§£ä¸€ä¸‹ <strong>åˆ†å‰²ï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œè®©å‡ºæ‰§è¡Œæƒ</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstFiber <span class="comment">// ä»£è¡¨Fiberæ ‘çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">let</span> nextFiber = firstFiber <span class="comment">// ç”¨äºéå†å­èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">performUnitOfWork</span> ()&#123;</span><br><span class="line">  <span class="comment">// å¤„ç†èŠ‚ç‚¹ç›¸å…³é€»è¾‘</span></span><br><span class="line">  <span class="keyword">return</span> nextFiber.<span class="property">next</span>; <span class="comment">// è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">workLoop</span>(<span class="params">deadline</span>)&#123;</span><br><span class="line">  <span class="keyword">while</span>(nextFiber &amp;&amp; !shouldYield)&#123;</span><br><span class="line">    nextFiber = <span class="title function_">performUnitOfWork</span>();</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰å‰©ä½™æ—¶é—´å¤„ç†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// åˆ™æš‚åœæ‰§è¡Œï¼Œè®©å‡ºä¸»çº¿ç¨‹ï¼Œç»™ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡</span></span><br><span class="line">    shouldYield = deadline &lt; <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">requestIdleCallback</span>(workLoop)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestIdleCallback</span>(workLoop)</span><br></pre></td></tr></table></figure>
<h4 id="Lane"><a href="#Lane" class="headerlink" title="Lane"></a>Lane</h4><p>æœ‰äº†å¼‚æ­¥è°ƒåº¦ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»†ç²’åº¦çš„ç®¡ç†å„ä¸ªä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œè®©é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œï¼Œå„ä¸ªFiberå·¥ä½œå•å…ƒè¿˜èƒ½æ¯”è¾ƒä¼˜å…ˆçº§ï¼Œç›¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡å¯ä»¥ä¸€èµ·æ›´æ–°ã€‚</p>
<h4 id="ä»£æ•°æ•ˆåº”"><a href="#ä»£æ•°æ•ˆåº”" class="headerlink" title="ä»£æ•°æ•ˆåº”"></a>ä»£æ•°æ•ˆåº”</h4><p>ï¼ˆalgebraic effectsï¼‰ å¯èƒ½ç¿»è¯‘æˆ <strong>å¯ä»¥å½“åšå‚æ•°ä¼ é€’çš„å‰¯ä½œç”¨</strong> æ›´å®¹æ˜“ç†è§£ã€‚ å®ƒæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºå°†å‰¯ä½œç”¨ä»å‡½æ•°è°ƒç”¨ä¸­åˆ†ç¦»ã€‚</p>
<p>ä»å®ç”¨çš„è§’åº¦ä¸Šä¸¾ä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯è¿›è¡Œä¸€å¤§æ®µç²¾å¦™çš„è¿ç®—ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">biz</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> infoId = <span class="comment">/* do some calc */</span> id; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> info = <span class="keyword">await</span> <span class="title function_">getInfo</span>(infoId);   <span class="comment">// å‰¯ä½œç”¨ï¼Œä¸ server é€šä¿¡</span></span><br><span class="line">  <span class="keyword">const</span> dataId = <span class="comment">/* do some calc */</span> info.<span class="property">dataId</span>; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">getData</span>(dataId);         <span class="comment">// å‰¯ä½œç”¨ï¼Œéå¹‚ç­‰æ“ä½œ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="comment">/* do some calc */</span> data.<span class="property">finalCalcData</span>;  <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡è¿ç®—é€»è¾‘å¾ˆä¼˜ç¾ï¼Œä½†ç¾ä¸­ä¸è¶³çš„æ˜¯æœ‰ä¸¤æ®µå‰¯ä½œç”¨ï¼Œå¯¼è‡´å®ƒä¸èƒ½æˆä¸ºä¸€ä¸ªå¹²å‡€çš„çº¯å‡½æ•°è¢«å•å…ƒæµ‹è¯•ã€‚è€Œä¸”è¿™é‡Œä¼šå¯¼è‡´ä¸¥é‡çš„é€»è¾‘è€¦åˆï¼šã€åšä»€ä¹ˆã€ä¸ã€æ€ä¹ˆåšã€æ²¡æœ‰æ‹†çš„å¾ˆå¹²å‡€ï¼šä½ çš„ä¸€å¤§æ®µè®¡ç®—é€»è¾‘æ˜¯åœ¨å¤„ç†åšä»€ä¹ˆï¼›ä¸¤ä¸ªå‰¯ä½œç”¨æ›´å…³å¿ƒæ€ä¹ˆåšï¼šæ¯”å¦‚çº¿ä¸Šæ˜¯æ¥å£è°ƒç”¨ï¼Œå•æµ‹é‡Œæ˜¯ mock æ•°æ®ï¼›ä½†æ˜¯ç”±äºè¿™ä¸¤å—å‰¯ä½œç”¨ä»£ç ï¼Œå¯¼è‡´æ•´ä¸ªç³…æ‚çš„é€»è¾‘éƒ½æ— æ³•å¤ç”¨ã€‚ç›´æ¥æŠŠä¸¤ä¸ªå‰¯ä½œç”¨ä¼ è¿›æ¥ä¸å°±è¡Œäº†ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">biz</span>(<span class="params">id, getInfo, getData</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> infoId = <span class="comment">/* do some calc */</span> id; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> info = <span class="keyword">await</span> <span class="title function_">getInfo</span>(infoId);   <span class="comment">// å‰¯ä½œç”¨ï¼Œä¸ server é€šä¿¡</span></span><br><span class="line">  <span class="keyword">const</span> dataId = <span class="comment">/* do some calc */</span> info.<span class="property">dataId</span>; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">getData</span>(dataId);         <span class="comment">// å‰¯ä½œç”¨ï¼Œéå¹‚ç­‰æ“ä½œ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="comment">/* do some calc */</span> data.<span class="property">finalCalcData</span>;  <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¯çš„ï¼Œè¿™æ ·ç¡®å®å¯ä»¥å¤ç”¨ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªå«å‡½æ•°æŸ“è‰²çš„é—®é¢˜æ²¡æœ‰è§£å†³ï¼šæ˜æ˜æ˜¯ä¸€å¤§æ®µå¹²å‡€çš„åŒæ­¥è¿ç®—é€»è¾‘ï¼Œå› ä¸º getInfo æ˜¯å¼‚æ­¥çš„ï¼Œå¯¼è‡´æ•´ä¸ªå‡½æ•°éƒ½å¾—åŠ ä¸ª asyncã€‚è€Œä¸”å¾ˆæœ‰å¯èƒ½åœ¨æˆ‘å•å…ƒæµ‹è¯•é‡Œï¼Œè¿™ä¸ª getInfo æ˜¯ç›´æ¥åŒæ­¥å–å†…å­˜æ•°æ®ï¼Œè¿˜å¾—å› æ­¤å¼„ä¸ª Promiseâ€¦â€¦è¿™æ—¶å€™å¦‚æœ JS é‡Œæœ‰è¿™æ ·ä¸€ç§è¯­æ³•å°±å¥½äº†ï¼š</p>
<p>å½“å‡½æ•°æ‰§è¡Œåˆ°<code>perform</code>çš„æ—¶å€™ï¼Œä¼šè¢«æš‚åœï¼Œå¹¶è¢«<code>handle</code>æ•è·ï¼Œå½“å¼‚æ­¥æ‰§è¡Œçš„ç»“æœè¢«è¿”å›ï¼Œå‡½æ•°åœ¨ç»§ç»­æ‰§è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">biz</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> infoId = <span class="comment">/* do some calc */</span> id; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> info = perform &#123; <span class="attr">type</span>: <span class="string">&#x27;getInfo&#x27;</span>, <span class="attr">payload</span>: infoId &#125;;</span><br><span class="line">  <span class="keyword">const</span> dataId = <span class="comment">/* do some calc */</span> info.<span class="property">dataId</span>; <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">  <span class="keyword">const</span> data = perform &#123; <span class="attr">type</span>: <span class="string">&#x27;getData&#x27;</span>, <span class="attr">payload</span>: dataId &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="comment">/* do some calc */</span> data.<span class="property">finalCalcData</span>;  <span class="comment">// è¿™é‡Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€å¤§æ®µè®¡ç®—é€»è¾‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£å¸¸ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">runBiz</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">biz</span>();</span><br><span class="line">  &#125; <span class="title function_">handle</span>(<span class="params">effect</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (effect.<span class="property">type</span> === <span class="string">&#x27;getInfo&#x27;</span>) &#123;</span><br><span class="line">      resume <span class="keyword">await</span> <span class="title function_">getInfo</span>(effect.<span class="property">payload</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (effect.<span class="property">type</span> === <span class="string">&#x27;getData&#x27;</span>) &#123;</span><br><span class="line">      resume <span class="keyword">await</span> <span class="title function_">getData</span>(effect.<span class="property">payload</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•å…ƒæµ‹è¯•é€»è¾‘</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testBiz</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">biz</span>();</span><br><span class="line">  &#125; <span class="title function_">handle</span>(<span class="params">effect</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (effect.<span class="property">type</span> === <span class="string">&#x27;getInfo&#x27;</span>) &#123;</span><br><span class="line">      resume testInfo;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (effect.<span class="property">type</span> === <span class="string">&#x27;getData&#x27;</span>) &#123;</span><br><span class="line">      resume testData;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†ç¦»å‰¯ä½œç”¨åœ¨å‡½æ•°ç¼–ç¨‹ä¸­éå¸¸å¸¸è§ï¼Œ<code>redux-saga</code>ä¹Ÿä¼šå°†å‰¯ä½œç”¨åˆ†ç¦»å‡ºæ¥ï¼Œåªè´Ÿè´£å‘èµ·è¯·æ±‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">fetchUser</span>(<span class="params">action</span>)&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">yield</span> <span class="title function_">call</span>(<span class="title class_">Api</span>.<span class="property">fetchUser</span>,action.<span class="property">payload</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">put</span>(&#123;<span class="attr">type</span>:<span class="string">&quot;SUCCESS&quot;</span>,<span class="attr">user</span>:user&#125;)</span><br><span class="line">  &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">put</span>(&#123;<span class="attr">type</span>:<span class="string">&quot;ERROR&quot;</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸šåŠ¡é€»è¾‘ä»£ç å³æ‘†è„±äº†å‰¯ä½œç”¨ï¼Œå®Œæˆäº†åšä»€ä¹ˆä¸æ€ä¹ˆåšçš„è§£è€¦ï¼›åˆå®Œå…¨ä¸å¿…æ‹…å¿ƒå¼‚æ­¥å‰¯ä½œç”¨å¸¦æ¥çš„æŸ“è‰²é—®é¢˜ï¼Œå¯ä»¥æ„‰å¿«çš„å•æµ‹å’Œå¤ç”¨äº†ã€‚Suspenseä¹Ÿæ˜¯è¿™ç§æ¦‚å¿µçš„å»¶ä¼¸:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ProductResource</span> = <span class="title function_">createResource</span>(fetchProduct);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Product</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="title class_">ProductResource</span>.<span class="title function_">read</span>( <span class="comment">// ç”¨åŒæ­¥çš„æ–¹å¼æ¥ç¼–å†™å¼‚æ­¥ä»£ç !</span></span><br><span class="line">          props.<span class="property">id</span></span><br><span class="line">    );</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;p.price&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Product</span> <span class="attr">id</span>=<span class="string">&#123;123&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° <code>ProductResource.read</code> å®Œå…¨æ˜¯åŒæ­¥çš„å†™æ³•ï¼ŒæŠŠè·å–æ•°æ®çš„éƒ¨åˆ†å®Œå…¨åˆ†ç¦»å‡ºäº† <code>Product</code> ç»„ä»¶ä¹‹å¤–ã€‚åœ¨æºç ä¸­ï¼Œ <code>ProductResource.read</code> ä¼šåœ¨è·å–æ•°æ®ä¹‹å‰ä¼šthrowä¸€ä¸ªç‰¹æ®Šçš„ <code>Promise</code>ï¼Œ ç”±äº <code>scheduler</code> çš„å­˜åœ¨ï¼Œ <code>scheduler</code> å¯ä»¥æ•è·è¿™ä¸ª <code>promise</code>ï¼Œæš‚åœæ›´æ–°ç­‰æ•°æ®è·å–ä¹‹åäº¤è¿˜æ‰§è¡Œæƒã€‚<code>ProductResource</code> å¯ä»¥æ˜¯ <code>localStorage</code> ç”šè‡³æ˜¯ <code>redis</code> ã€ <code>mysql</code> ç­‰æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶å³æœåŠ¡ï¼Œå¯èƒ½ä»¥åä¼šæœ‰ <code>server Component</code> çš„å‡ºç°ã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" rel="tag">æºç åˆ†æ</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-react/reactå¸¸è§é—®é¢˜"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/e661e59beb46/"
    >react å¸¸è§é—®é¢˜é—®é¢˜</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/e661e59beb46/" class="article-date">
  <time datetime="2021-12-05T16:42:47.000Z" itemprop="datePublished">2021-12-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id=""><a href="#" class="headerlink" title=""></a></h4><p>+ </p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-db/MySQLæœåŠ¡åŸºç¡€"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/5f3a914ba868/"
    >MySQl æœåŠ¡åŸºç¡€</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/5f3a914ba868/" class="article-date">
  <time datetime="2021-12-01T07:13:50.000Z" itemprop="datePublished">2021-12-01</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="MySQL-æœåŠ¡å¯åŠ¨å’Œåœæ­¢"><a href="#MySQL-æœåŠ¡å¯åŠ¨å’Œåœæ­¢" class="headerlink" title="MySQL æœåŠ¡å¯åŠ¨å’Œåœæ­¢"></a>MySQL æœåŠ¡å¯åŠ¨å’Œåœæ­¢</h4><p>æŸ¥çœ‹ç³»ç»Ÿå†…æ˜¯å¦æœ‰ mysql æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep mysql</span><br></pre></td></tr></table></figure>

<p>åœæ­¢ mysql æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql stop</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ mysql æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure>

<p>é‡å¯ mysql æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure>

<h4 id="ç™»å½•ä¸é€€å‡º"><a href="#ç™»å½•ä¸é€€å‡º" class="headerlink" title="ç™»å½•ä¸é€€å‡º"></a>ç™»å½•ä¸é€€å‡º</h4><p>ç™»å½•å‘½ä»¤ï¼Œå±æ€§å’Œå±æ€§å€¼ä¹‹é—´å¯ä»¥çœç•¥ç©ºæ ¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -hä¸»æœºå -Pç«¯å£å· -uæœ‰æˆ·å -på¯†ç </span><br></pre></td></tr></table></figure>

<p>é€€å‡º <code>exit</code></p>
<h4 id="å¸¸è§å‘½ä»¤"><a href="#å¸¸è§å‘½ä»¤" class="headerlink" title="å¸¸è§å‘½ä»¤"></a>å¸¸è§å‘½ä»¤</h4><p>æŸ¥çœ‹å½“å‰æ‰€æœ‰æ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€æŒ‡å®šçš„åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use åº“å;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å½“å‰æ‰€åœ¨åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ‰€æœ‰è¡¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å…¶ä»–åº“çš„æ‰€æœ‰è¡¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables from åº“å;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè¡¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨å &#123;</span><br><span class="line">  åˆ—å åˆ—ç±»å‹ï¼Œ</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è¡¨ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc è¡¨å;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è¡¨ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// è¿›å…¥mysqlæœåŠ¡å™¨ä¸­</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line">// åœ¨å‘½ä»¤è¡Œä¸­</span><br><span class="line">mysql --version</span><br><span class="line">mysql -V</span><br></pre></td></tr></table></figure>

<h4 id="è¯­æ³•è§„èŒƒ"><a href="#è¯­æ³•è§„èŒƒ" class="headerlink" title="è¯­æ³•è§„èŒƒ"></a>è¯­æ³•è§„èŒƒ</h4><ul>
<li>ä¸åŒºåˆ†å¤§å°å†™ï¼Œå»ºè®®å…³é”®å­—å¤§å†™ï¼Œè¡¨åï¼Œåˆ—åå°å†™</li>
<li>æ¯æ¡å‘½ä»¤<code>;</code>ç»“å°¾</li>
<li>å‘½ä»¤å¯ä»¥æ¢è¡Œ</li>
<li>æ³¨é‡Š<br>å•è¡Œæ³¨é‡Š: <code>#æ³¨é‡Šæ–‡å­—</code><br>å•è¡Œæ³¨é‡Š: <code>-- æ³¨é‡Šæ–‡å­—</code><br>å¤šè¡Œæ³¨é‡Š: <code>/* æ³¨é‡Šæ–‡å­— */</code></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-react/â‘¤(SSR)nodeä¸­é—´å±‚ä»£ç†è¯·æ±‚"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/70ef756f1afd/"
    >â‘¤ ReactSSR nodeä¸­é—´å±‚ä»£ç†è¯·æ±‚</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/70ef756f1afd/" class="article-date">
  <time datetime="2021-11-22T13:07:20.000Z" itemprop="datePublished">2021-11-22</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a> / <a class="article-category-link" href="/categories/React/SSR/">SSR</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="ä»£ç†è¯·æ±‚"><a href="#ä»£ç†è¯·æ±‚" class="headerlink" title="ä»£ç†è¯·æ±‚"></a>ä»£ç†è¯·æ±‚</h4><p>ç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å…¬ç”¨ä¸€å¥—è¯·æ±‚çš„æ¥å£ï¼Œæ‰€ä»¥éœ€è¦æ¥å£åŒæ—¶é€‚åº”å®¢æˆ·ç«¯å’Œç§»åŠ¨ç«¯ï¼Œè¿™é‡Œå¯ä»¥é€‰ç”¨ <a target="_blank" rel="noopener" href="https://github.com/lquixada/cross-fetch">cross-fetch</a> æˆ– <a target="_blank" rel="noopener" href="https://github.com/axios/axios">axios</a></p>
<p>å½“åœ¨å¼‚æ­¥actionä¸­è¯·æ±‚æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¯·æ±‚çš„æ˜¯åŒåŸŸçš„æœåŠ¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; <span class="function">(<span class="params">dispatch: Dispatch,getState:any,request:AxiosInstance</span>) =&gt;</span> <span class="title function_">axios</span>(<span class="string">&#x27;/api/products&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> <span class="title function_">dispatch</span>(<span class="title function_">loadDataAction</span>(data)));</span><br></pre></td></tr></table></figure>

<p>è€Œä¸æ˜¯ç›´æ¥è¯·æ±‚åç«¯æœåŠ¡å™¨ã€‚æ‰€ä»¥éœ€è¦å°†apiå¼€å¤´çš„è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨è¯·æ±‚ã€‚ç”¨åˆ°äº†ä¸€ä¸ªkoaçš„ä¸­é—´ä»¶ <a target="_blank" rel="noopener" href="https://github.com/common110/koa-proxies">koa-proxies</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Koa</span> <span class="keyword">from</span> <span class="string">&#x27;koa&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> koaBody <span class="keyword">from</span> <span class="string">&#x27;koa-body&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> koaStatic <span class="keyword">from</span> <span class="string">&#x27;koa-static&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> proxy <span class="keyword">from</span> <span class="string">&#x27;koa-proxies&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> errorHandle <span class="keyword">from</span> <span class="string">&#x27;./errorHandle&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>();</span><br><span class="line"></span><br><span class="line">app</span><br><span class="line">.<span class="title function_">use</span>(<span class="keyword">async</span> (<span class="attr">ctx</span>:any, <span class="attr">next</span>:<span class="function">()=&gt;</span><span class="title class_">Promise</span>&lt;any&gt;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">next</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    ctx.<span class="property">app</span>.<span class="title function_">emit</span>(<span class="string">&#x27;error&#x27;</span>, err, ctx);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">use</span>(<span class="title function_">proxy</span>(<span class="string">&#x27;/api&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">target</span>:  <span class="string">&#x27;https://fakestoreapi.com&#x27;</span>,</span><br><span class="line">    <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">rewrite</span>: <span class="function"><span class="params">path</span> =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>,<span class="string">&#x27;&#x27;</span>),</span><br><span class="line">  &#125;))</span><br><span class="line">.<span class="title function_">use</span>(<span class="title function_">koaStatic</span>(path.<span class="title function_">join</span>((process.<span class="property">env</span> <span class="keyword">as</span> any).<span class="property">PWD</span>,<span class="string">&#x27;./static&#x27;</span>)))</span><br><span class="line">.<span class="title function_">use</span>(<span class="title function_">koaBody</span>())</span><br><span class="line">.<span class="title function_">use</span>(router.<span class="title function_">routes</span>())</span><br><span class="line">.<span class="title function_">use</span>(router.<span class="title function_">allowedMethods</span>())</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, errorHandle);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app;</span><br></pre></td></tr></table></figure>

<h4 id="å¤„ç†è¯·æ±‚"><a href="#å¤„ç†è¯·æ±‚" class="headerlink" title="å¤„ç†è¯·æ±‚"></a>å¤„ç†è¯·æ±‚</h4><p>ç°åœ¨å®¢æˆ·ç«¯æ­£å¸¸è®¿é—®æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æœåŠ¡ç«¯ä¼šæŠ¥å‡ºé”™è¯¯ï¼Œå› ä¸ºå½“åˆ·æ–°é¡µé¢çš„æ—¶å€™æœåŠ¡ç«¯ä¼šåšæœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™æ—¶ç›´æ¥è°ƒç”¨äº†ç»„ä»¶ä¸­è·å–æ•°æ®çš„æ–¹æ³•ã€‚</p>
<p>ç”±äºç»„ä»¶ä¸­çš„è·¯å¾„æ˜¯ä»¥ <code>/api</code> å¼€å¤´çš„ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥ä¼šå°è¯•åœ¨æœåŠ¡å™¨ä¸­æŸ¥æ‰¾æ ¹è·¯å¾„ä¸‹<code>api</code>æ–‡ä»¶å¤¹ï¼Œå› ä¸ºæ‰¾ä¸åˆ°æŠ¥é”™é”™è¯¯ã€‚</p>
<p>ä¸€ä¸ªæ€è·¯æ˜¯ï¼ŒåŒºåˆ†æœåŠ¡ç«¯çš„è¯·æ±‚å’Œå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåˆ†åˆ«ä¸ºå…¶åˆ›å»ºä¸åŒçš„axioså®ä¾‹ç”¨äºè¯·æ±‚ï¼Œä½†æ˜¯ä¸ºäº†é¿å…åƒä¸Šä¸€ç« ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚åˆ†ä¸¤ç§å†™ï¼Œå¯ä»¥è€ƒè™‘åœ¨é¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™åˆ›å»ºä¸åŒçš„axioså®ä¾‹ï¼Œå¹¶é€šè¿‡å‚æ•°ä¼ é€’åˆ°è¯·æ±‚æ–¹æ³•ä¸­ï¼Œä»è€Œé¿å…ä¸šåŠ¡é€»è¾‘å¤ªå¤šå†—ä½™ã€‚</p>
<blockquote>
<p>src&#x2F;util&#x2F;request.ts </p>
</blockquote>
<p>å®šä¹‰ä¸€ä¸ªè¯·æ±‚æ–¹æ³•ï¼Œä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆ›å»ºä¸åŒå®ä¾‹</p>
<p>ç”±äºåç«¯æœåŠ¡å¹¶ä¸æ˜¯<code>api</code>å¼€å¤´çš„æ¥å£ï¼Œæ‰€ä»¥åç«¯è®¿é—®æ—¶ï¼Œéœ€è¦ä¸ºå…¶é‡å†™<code>url</code>è·¯å¾„.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serverInstance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;https://fakestoreapi.com&#x27;</span>,</span><br><span class="line">    <span class="attr">adapter</span>: <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">        <span class="comment">/* ... */</span></span><br><span class="line">        config.<span class="property">url</span> = config.<span class="property">url</span>?.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="keyword">delete</span> config.<span class="property">adapter</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title function_">axios</span>(config));</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clientInstance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    serverInstance,</span><br><span class="line">    clientInstance</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨åˆå§‹åŒ–storeçš„æ—¶å€™ï¼Œé€šè¿‡ä¸­é—´ä»¶æŠŠaxioså®ä¾‹ä¼ å…¥ï¼Œè®©æ‰€ç”¨çš„å¼‚æ­¥actionåœ¨è¯·æ±‚å‰å¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°æ‹¿åˆ°axioså®ä¾‹</p>
<blockquote>
<p>src&#x2F;store&#x2F;index.ts</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Provider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reducers <span class="keyword">from</span> <span class="string">&#x27;./reducers&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StoreType</span> <span class="keyword">as</span> <span class="title class_">HelloStoreType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../components/hello&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;clientInstance,serverInstance&#125; <span class="keyword">from</span> <span class="string">&#x27;../util/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">browserStore</span> = (<span class="params"></span>)=&gt; <span class="title function_">createStore</span>(reducers, (<span class="variable language_">window</span> <span class="keyword">as</span> any).<span class="property">__HYDRATE_DATA__</span>, <span class="title function_">applyMiddleware</span>(thunk.<span class="title function_">withExtraArgument</span>(clientInstance)));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">serverStore</span> = (<span class="params"></span>) =&gt; <span class="title function_">createStore</span>(reducers, <span class="title function_">applyMiddleware</span>(thunk.<span class="title function_">withExtraArgument</span>(serverInstance)));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">StoreType</span> = &#123;</span><br><span class="line">    <span class="attr">hello</span>: <span class="title class_">HelloStoreType</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    <span class="title class_">Provider</span>,</span><br><span class="line">    browserStore,</span><br><span class="line">    serverStore</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>src&#x2F;components&#x2F;hello&#x2F;action.ts</p>
</blockquote>
<p>ä¿®æ”¹actionæ–¹æ³•ï¼Œé€šè¿‡axioså®ä¾‹è¯·æ±‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span>, <span class="title class_">ActionCreator</span> &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">AxiosInstance</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;&#125;<span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">LOAD_DATA</span> = <span class="string">&#x27;LOAD_DATA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="variable constant_">LOAD_DATA_TYPE</span> = <span class="keyword">typeof</span> <span class="variable constant_">LOAD_DATA</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">loadDataAction</span>: <span class="title class_">ActionCreator</span>&lt;&#123; <span class="attr">type</span>: <span class="variable constant_">LOAD_DATA_TYPE</span> &#125;&gt; = <span class="function">(<span class="params">payload</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="variable constant_">LOAD_DATA</span>,</span><br><span class="line">    payload,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">ActionTypes</span> = <span class="variable constant_">LOAD_DATA_TYPE</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; <span class="function">(<span class="params">dispatch: Dispatch,getState:any,request:AxiosInstance</span>) =&gt;</span> <span class="title function_">request</span>(<span class="string">&#x27;/api/products&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> <span class="title function_">dispatch</span>(<span class="title function_">loadDataAction</span>(data)));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> serverLoadData = loadData;</span><br></pre></td></tr></table></figure>

<p>æœ€åä¸€æ­¥ï¼Œç”±äºæˆ‘ä»¬ç»Ÿä¸€äº†è°ƒç”¨æ–¹æ³•ï¼Œç°åœ¨æœåŠ¡ç«¯ä¹Ÿä¼šé€šè¿‡å¼‚æ­¥actionæ–¹æ³•è°ƒç”¨æ¥å£</p>
<p>æ‰€ä»¥éœ€è¦è®©æœåŠ¡ç«¯è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œä¹Ÿåƒå®¢æˆ·ç«¯ä¸€æ ·é€šè¿‡<code>bindActionCreators</code>ä¼ å…¥<code>dispatch</code>æ–¹æ³•</p>
<p>é€šè¿‡æœåŠ¡ç«¯åˆ›å»ºçš„<code>store</code>ä¼ å…¥äº†<code>dispatch</code>æ–¹æ³•ï¼Œå¹¶ä¸”è®©ä¸­é—´ä»¶çš„å‚æ•°ç”Ÿæ•ˆã€‚è¿™æ—¶ä¹Ÿä¸éœ€è¦å†ç»„åˆä¸åŒæ¥å£è¿”å›çš„<code>state</code>,é€šè¿‡å¼‚æ­¥<code>action</code>æ–¹æ³•ï¼Œåœ¨æ‹¿åˆ°è¿”å›å€¼ä¹‹åï¼Œ<code>dispatch</code>ä¼šè§¦å‘å¹¶æ›´æ–°<code>store</code></p>
<p>å½“æ‰€æœ‰çš„ç»„ä»¶å¼‚æ­¥æ•°æ®è¯·æ±‚ä¹‹åï¼Œåœ¨é€šè¿‡<code>getState</code>è·å–æœ€æ–°çš„<code>store</code>æ¸²æŸ“é¡µé¢</p>
<blockquote>
<p>src&#x2F;router&#x2F;index.tsx</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/(.*)&quot;</span>,<span class="keyword">async</span> (ctx)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> store = <span class="title function_">serverStore</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">promises</span>:<span class="title class_">Array</span>&lt;any&gt; = <span class="title function_">matchRoutes</span>(routes,ctx.<span class="property">request</span>.<span class="property">path</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">&#123;route,match&#125;</span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> route.<span class="property">loadData</span>?<span class="title function_">bindActionCreators</span>(route.<span class="property">loadData</span>,store.<span class="property">dispatch</span>)():<span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">    &#125; );</span><br><span class="line">     <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(promises);</span><br><span class="line"></span><br><span class="line">    ctx.<span class="property">body</span>=<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;head&gt;</span></span><br><span class="line"><span class="string">                &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">            &lt;/head&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;div id=&#x27;root&#x27;&gt;<span class="subst">$&#123;ReactDOMServer.renderToString(&lt;App &#123;...&#123;ctx,store&#125;&#125;/&gt;)&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;script&gt;</span></span><br><span class="line"><span class="string">                    window.__HYDRATE_DATA__ = <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(store.getState())&#125;</span></span></span><br><span class="line"><span class="string">                &lt;/script&gt;</span></span><br><span class="line"><span class="string">                &lt;script src=&#x27;/index.js&#x27; defer&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-react/â‘£(SSR)æ¥å…¥redux"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/a8dd4b44a192/"
    >â‘£ ReactSSR æ¥å…¥redux</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/a8dd4b44a192/" class="article-date">
  <time datetime="2021-11-20T07:21:01.000Z" itemprop="datePublished">2021-11-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a> / <a class="article-category-link" href="/categories/React/SSR/">SSR</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="åˆ›å»ºAction"><a href="#åˆ›å»ºAction" class="headerlink" title="åˆ›å»ºAction"></a>åˆ›å»ºAction</h4><blockquote>
<p>&#x2F;src&#x2F;components&#x2F;hello&#x2F;action.ts</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span>, <span class="title class_">ActionCreator</span> &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios, &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">LOAD_DATA</span> = <span class="string">&#x27;LOAD_DATA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="variable constant_">LOAD_DATA_TYPE</span> = <span class="keyword">typeof</span> <span class="variable constant_">LOAD_DATA</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">FetchDataInterface</span> &#123;</span><br><span class="line">    (match?: any): <span class="title class_">Promise</span>&lt;<span class="title class_">AxiosResponse</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">fetchData</span>: <span class="title class_">FetchDataInterface</span> = <span class="function">(<span class="params">match</span>) =&gt;</span> <span class="title function_">axios</span>(<span class="string">&#x27;https://fakestoreapi.com/products&#x27;</span>);</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">ServerLoadDataInterface</span> &#123;</span><br><span class="line">    (<span class="attr">match</span>: any): <span class="title class_">Promise</span>&lt;any&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverLoadData</span>: <span class="title class_">ServerLoadDataInterface</span> = <span class="function">(<span class="params">match</span>) =&gt;</span> <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> (&#123; <span class="attr">hello</span>: &#123; <span class="attr">shopData</span>: data &#125; &#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">loadDataAction</span>: <span class="title class_">ActionCreator</span>&lt;&#123; <span class="attr">type</span>: <span class="variable constant_">LOAD_DATA_TYPE</span> &#125;&gt; = <span class="function">(<span class="params">payload</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="variable constant_">LOAD_DATA</span>,</span><br><span class="line">    payload,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">ActionTypes</span> = <span class="variable constant_">LOAD_DATA_TYPE</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; <span class="function">(<span class="params">dispatch: Dispatch</span>) =&gt;</span> <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> <span class="title function_">dispatch</span>(<span class="title function_">loadDataAction</span>(data)));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºreducer"><a href="#åˆ›å»ºreducer" class="headerlink" title="åˆ›å»ºreducer"></a>åˆ›å»ºreducer</h4><blockquote>
<p>&#x2F;src&#x2F;components&#x2F;hello&#x2F;reducer.ts</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">AnyAction</span>,<span class="title class_">Reducer</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="variable constant_">LOAD_DATA</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./action&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StoreType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initStore = &#123;</span><br><span class="line">    <span class="attr">shopData</span>:[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">hello</span>:<span class="title class_">Reducer</span>&lt;<span class="title class_">StoreType</span>,<span class="title class_">AnyAction</span>&gt; = <span class="function">(<span class="params">state=initStore, action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">LOAD_DATA</span>:</span><br><span class="line">            <span class="keyword">return</span> (&#123;...state,<span class="attr">shopData</span>:action.<span class="property">payload</span>&#125;)</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> hello;</span><br></pre></td></tr></table></figure>


<h4 id="connect-Helloç»„ä»¶"><a href="#connect-Helloç»„ä»¶" class="headerlink" title="connect Helloç»„ä»¶"></a>connect Helloç»„ä»¶</h4><blockquote>
<p>&#x2F;src&#x2F;components&#x2F;hello&#x2F;hello.ts</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators,<span class="title class_">Dispatch</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StoreType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../../store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;../header&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;loadData&#125; <span class="keyword">from</span> <span class="string">&#x27;./action&#x27;</span>;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">HelloComponentProps</span> = &#123;</span><br><span class="line">    <span class="attr">loadData</span>:<span class="function">()=&gt;</span><span class="keyword">void</span>,</span><br><span class="line">    <span class="attr">shopData</span>:<span class="title class_">Array</span>&lt;any&gt;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Hello</span>:<span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">HelloComponentProps</span>&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        loadData,</span><br><span class="line">        shopData</span><br><span class="line">    &#125; = props;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">loadData</span>();</span><br><span class="line">    &#125;,[])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Header</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;</span></span><br><span class="line"><span class="language-xml">            shopData.map(item=&gt; <span class="tag">&lt;<span class="name">h6</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;alert(&quot;hello&quot;)&#125;&#125; key=&#123;item.id&#125;&gt;&#123;item.title&#125;<span class="tag">&lt;/<span class="name">h6</span>&gt;</span>)</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state:StoreType</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">shopData</span>:state.<span class="property">hello</span>.<span class="property">shopData</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch:Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">loadData</span>: <span class="title function_">bindActionCreators</span>(loadData,dispatch)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps,mapDispatchToProps)(<span class="title class_">Hello</span>) ;</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹-Hello-ç»„ä»¶å…¥å£æ–‡ä»¶-index-ts"><a href="#ä¿®æ”¹-Hello-ç»„ä»¶å…¥å£æ–‡ä»¶-index-ts" class="headerlink" title="ä¿®æ”¹ Hello ç»„ä»¶å…¥å£æ–‡ä»¶ index.ts"></a>ä¿®æ”¹ Hello ç»„ä»¶å…¥å£æ–‡ä»¶ index.ts</h4><ul>
<li><p>æš´éœ²æœåŠ¡ç«¯æ¸²æŸ“æ—¶éœ€è¦çš„æ•°æ®è¯·æ±‚æ–¹æ³•</p>
</li>
<li><p>æ·»åŠ storeç±»å‹ï¼Œæš´éœ²åˆ°å¤–éƒ¨çš„ store&#x2F;index.js ç»Ÿä¸€æè¿°storeç±»å‹</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Hello</span> <span class="keyword">from</span> <span class="string">&quot;./hello&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;serverLoadData&#125; <span class="keyword">from</span> <span class="string">&#x27;./action&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">StoreType</span> &#123;</span><br><span class="line">    <span class="attr">shopData</span>:<span class="title class_">Array</span>&lt;any&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    serverLoadData</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Hello</span>;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºå…¨å±€çš„store"><a href="#åˆ›å»ºå…¨å±€çš„store" class="headerlink" title="åˆ›å»ºå…¨å±€çš„store"></a>åˆ›å»ºå…¨å±€çš„store</h4><blockquote>
<p>src&#x2F;store&#x2F;index.ts</p>
</blockquote>
<p>ç”¨äºç”Ÿæˆstoreå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Provider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reducers <span class="keyword">from</span> <span class="string">&#x27;./reducers&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StoreType</span> <span class="keyword">as</span> <span class="title class_">HelloStoreType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../components/hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">browserStore</span> = (<span class="params"></span>)=&gt; <span class="title function_">createStore</span>(reducers, (<span class="variable language_">window</span> <span class="keyword">as</span> any).<span class="property">__HYDRATE_DATA__</span>, <span class="title function_">applyMiddleware</span>(thunk));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">serverStores</span> = (<span class="params">__HYDRATE_DATA__: any</span>) =&gt; <span class="title function_">createStore</span>(reducers, __HYDRATE_DATA__, <span class="title function_">applyMiddleware</span>(thunk));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">StoreType</span> = &#123;</span><br><span class="line">    <span class="attr">hello</span>: <span class="title class_">HelloStoreType</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    <span class="title class_">Provider</span>,</span><br><span class="line">    browserStore,</span><br><span class="line">    serverStores</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>src&#x2F;store&#x2F;reducers.ts</p>
</blockquote>
<p>åˆå¹¶æ‰€æœ‰ç»„ä»¶ä¸­çš„reducer</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> hello <span class="keyword">from</span> <span class="string">&#x27;../components/hello/reducer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">combineReducers</span>(&#123;</span><br><span class="line">    hello</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="æœåŠ¡ç«¯é¢„åŠ è½½æ•°æ®ï¼Œæ”¹é€ routers"><a href="#æœåŠ¡ç«¯é¢„åŠ è½½æ•°æ®ï¼Œæ”¹é€ routers" class="headerlink" title="æœåŠ¡ç«¯é¢„åŠ è½½æ•°æ®ï¼Œæ”¹é€ routers"></a>æœåŠ¡ç«¯é¢„åŠ è½½æ•°æ®ï¼Œæ”¹é€ routers</h4><p>ä¹‹å‰çš„routersæ˜¯ä¸€ä¸ªJSXå…ƒç´ ï¼Œç°åœ¨æƒ³è°ƒç”¨ç»„ä»¶æš´éœ²å‡ºçš„æœåŠ¡ç«¯è¯·æ±‚æ•°æ®çš„æ–¹æ³•ï¼Œå¹¶åœ¨æ‹¿åˆ°ç»“æœé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œç”Ÿæˆhtmlå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»™æµè§ˆå™¨</p>
<p>æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼šæ”¹é€ routersè®©æˆ‘ä»¬å¯ä»¥æ‹¿åˆ°æ•°æ®è¯·æ±‚çš„æ–¹æ³•</p>
<blockquote>
<p>src&#x2F;components&#x2F;routes.tsx</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Hello</span>, &#123; serverLoadData <span class="keyword">as</span> helloServerLoadData &#125; <span class="keyword">from</span> <span class="string">&quot;./hello&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&quot;./login&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/hello&quot;</span>,</span><br><span class="line">        <span class="attr">exact</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Hello</span>,</span><br><span class="line">        <span class="attr">loadData</span>: <span class="function">(<span class="params">match:any</span>) =&gt;</span> <span class="title function_">helloServerLoadData</span>(match)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">        <span class="attr">exact</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Login</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Hello</span>,</span><br><span class="line">        <span class="attr">exact</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">loadData</span>: <span class="function">(<span class="params">match:any</span>) =&gt;</span> <span class="title function_">helloServerLoadData</span>(match)</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> routes;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>src&#x2F;components&#x2F;router.tsx</p>
</blockquote>
<p>å¾ªç¯ç”Ÿæˆè·¯ç”±ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Koa</span> <span class="keyword">from</span> <span class="string">&#x27;koa&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">BrowserRouter</span>,</span><br><span class="line">    <span class="title class_">Switch</span>,</span><br><span class="line">    <span class="title class_">Route</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./routes&#x27;</span></span><br><span class="line"></span><br><span class="line">interface <span class="title class_">RouterProps</span> &#123;</span><br><span class="line">    ctx?: <span class="title class_">Koa</span>.<span class="property">BaseContext</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Router</span>: <span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">RouterProps</span>&gt; = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;routes.map(route =&gt; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Route</span> &#123;<span class="attr">...route</span>&#125; <span class="attr">key</span>=<span class="string">&#123;route.path&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                ))&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Router</span>;</span><br></pre></td></tr></table></figure>

<h4 id="åŒ¹é…è·¯ç”±å¯¹åº”çš„ç»„ä»¶"><a href="#åŒ¹é…è·¯ç”±å¯¹åº”çš„ç»„ä»¶" class="headerlink" title="åŒ¹é…è·¯ç”±å¯¹åº”çš„ç»„ä»¶"></a>åŒ¹é…è·¯ç”±å¯¹åº”çš„ç»„ä»¶</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-router-config">react-router-config</a> ç”¨äºåŒ¹é…åŒ…æ‹¬å­è·¯ç”±åœ¨å†…çš„æ‰€æœ‰è·¯ç”±é…ç½®å¯¹åº”çš„ç»„ä»¶</p>
<p>åœ¨æ‹¿åˆ°æ‰€æœ‰çš„åŒ¹é…é¡¹ä¹‹åï¼Œå¾ªç¯è°ƒç”¨æ‰€æœ‰ç»„ä»¶çš„æ•°æ®è¯·æ±‚æ–¹æ³•ï¼Œå¹¶æŠŠè¿”å›çš„promiseå¯¹è±¡æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</p>
<p>å½“æ‰€æœ‰çš„è¿”å›å€¼æ‹¿åˆ°ä¹‹åï¼Œç»„åˆæ‰€æœ‰çš„state,åˆå§‹åŒ–Reactç»„ä»¶ï¼Œå¹¶æ¸²æŸ“æˆå­—ç¬¦ä¸²è¿”å›ç»™æµè§ˆå™¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;@koa/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOMServer</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;../components/routes&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; matchRoutes &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-config&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/(.*)&quot;</span>,<span class="keyword">async</span> (ctx,next)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">promises</span>:<span class="title class_">Array</span>&lt;any&gt; = <span class="title function_">matchRoutes</span>(routes,ctx.<span class="property">request</span>.<span class="property">path</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">&#123;route,match&#125;</span>)=&gt;</span> route.<span class="property">loadData</span>?route.<span class="title function_">loadData</span>(match):<span class="title class_">Promise</span>.<span class="title function_">resolve</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> preloadData = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(promises);</span><br><span class="line">    <span class="keyword">const</span> __HYDRATE_DATA__ = preloadData.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res,data</span>)=&gt;</span><span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;,res,data) ,&#123;&#125;);</span><br><span class="line"></span><br><span class="line">    ctx.<span class="property">body</span>=<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;head&gt;</span></span><br><span class="line"><span class="string">                &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">            &lt;/head&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;div id=&#x27;root&#x27;&gt;<span class="subst">$&#123;ReactDOMServer.renderToString(&lt;App &#123;...&#123;ctx,__HYDRATE_DATA__&#125;&#125;/&gt;)&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;script&gt;</span></span><br><span class="line"><span class="string">                    window.__HYDRATE_DATA__ = <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(__HYDRATE_DATA__)&#125;</span></span></span><br><span class="line"><span class="string">                &lt;/script&gt;</span></span><br><span class="line"><span class="string">                &lt;script src=&#x27;/index.js&#x27;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>


<h4 id="æ•°æ®è„±æ°´å’Œæ³¨æ°´"><a href="#æ•°æ®è„±æ°´å’Œæ³¨æ°´" class="headerlink" title="æ•°æ®è„±æ°´å’Œæ³¨æ°´"></a>æ•°æ®è„±æ°´å’Œæ³¨æ°´</h4><ul>
<li><p>æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™éœ€è¦æŠŠæ•´åˆä¹‹åçš„storeä¼ å…¥åˆ°åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œç”¨äºæ¸²æŸ“Htmlå­—ç¬¦ä¸²</p>
</li>
<li><p>å®¢æˆ·ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œç”±äºç¬¬ä¸€æ¬¡æ¸²æŸ“æ˜¯å¹¶æ²¡æœ‰æ•°æ®ï¼Œä¼šè¦†ç›–æ‰æœåŠ¡ç«¯æ¸²æŸ“çš„ç»“æ„ï¼Œå¹¶é‡æ–°è¯·æ±‚ååœ¨æ¸²æŸ“ï¼Œè¿™ä¸­é—´çš„è¿‡ç¨‹å°±ä¼šç™½å±<br>æ‰€ä»¥ä¼šåœ¨æœåŠ¡ç«¯ç›´æ¥æŠŠæ•°æ®ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼æ’å…¥åˆ°htmlç•Œé¢ä¸­ï¼Œåœ¨å®¢æˆ·ç«¯è§£æçš„æ—¶å€™ä¼šå˜æˆwindowä¸‹çš„ä¸€ä¸ªstoreå¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšæ•°æ®æ³¨æ°´</p>
</li>
<li><p>å½“å®¢æˆ·ç«¯åˆå§‹åŒ–æ—¶ï¼Œä¼šå°è¯•æŸ¥æ‰¾windowä¸‹æœ‰æ²¡æœ‰æœåŠ¡ç«¯æ’å…¥çš„æ•°æ®ï¼Œå¦‚æœæœ‰å°±ç”¨è¿™ä¸ªæ•°æ®ä½œä¸ºåˆå§‹åŒ–æ•°æ®ï¼Œä»è€Œé˜²æ­¢ä¸¤è¾¹çŠ¶æ€ä¸ç»Ÿä¸€é€ æˆçš„ç™½å±ï¼Œè¿™ä¸€è¿‡ç¨‹ä¹Ÿå«åšæ•°æ®è„±æ°´</p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-other/å¯ç¼–ç¨‹ç»„ä»¶å¼€å‘å·¥å…·ä½¿ç”¨"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/804c59ff0688/"
    >å¯ç¼–ç¨‹ç»„ä»¶å¼€å‘å·¥å…·ä½¿ç”¨</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/804c59ff0688/" class="article-date">
  <time datetime="2021-11-10T11:06:27.000Z" itemprop="datePublished">2021-11-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E4%BB%96/">å…¶ä»–</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p>æœ¬å·¥å…·ä¸ºå¯ç¼–ç¨‹ç»„ä»¶çš„è¾…åŠ©å¼€å‘å·¥å…·</p>
<ul>
<li>æ”¯æŒ css, scss, js ,ts æ¨¡å—åŒ–</li>
<li>æ”¯æŒ å¤šæ–‡ä»¶æ‰“åŒ… é™æ€èµ„æºæ‰“åŒ…</li>
<li>ä¸€é”®åŒæ­¥ï¼Œ ä¸€é”®ä¸Šä¼ </li>
<li>æ”¯æŒReactç»„ä»¶ï¼ŒVueç»„ä»¶</li>
</ul>
<video  width="720" height="480" src="http://nextcloud.iftrue.club:37186/index.php/s/xJJ9C6oFJX6BDc6/download/2021-11-11%E5%8F%AF%E7%BC%96%E7%A8%8B%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB.mp4" controls >
  <source src="http://nextcloud.iftrue.club:37186/index.php/s/xJJ9C6oFJX6BDc6/download/2021-11-11%E5%8F%AF%E7%BC%96%E7%A8%8B%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB.mp4" type="video/mp4">
</video>

<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx supos-ccws-cli create [é¡¹ç›®æ–‡ä»¶å¤¹åç§°]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼š createä¸èƒ½ç¼ºå°‘ï¼Œ åé¢è¿˜éœ€è¦åŠ ä¸Šæ–‡ä»¶å¤¹çš„åç§°ã€‚</p>
</blockquote>
<p>å®‰è£…æˆåŠŸ <img src="/posts/804c59ff0688/0001.png"></p>
<h4 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ ccws.config.json                        // é¡¹ç›®é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json                            // é¡¹ç›®ä¾èµ–é¡¹</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ app1                                // appåç§°</span><br><span class="line">â”‚       â”œâ”€â”€ component1                      // ç»„ä»¶åç§°</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ compiled                    // ç»„ä»¶ç¼–è¯‘ç›®å½•ï¼Œä¸éœ€è¦äººä¸ºä¿®æ”¹</span><br><span class="line">â”‚       â”‚   â”‚   â””â”€â”€ index.js                // ç»„ä»¶ç¼–è¯‘åå…¥å£æ–‡ä»¶ï¼Œä¸éœ€è¦äººä¸ºä¿®æ”¹</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ dependencies.json           // suposå¹³å°é»˜è®¤ä¾èµ–æ–‡ä»¶ï¼Œä¸éœ€è¦äººä¸ºä¿®æ”¹</span><br><span class="line">â”‚       â”‚   â””â”€â”€ <span class="built_in">source</span>                      // æºæ–‡ä»¶ç›®å½•</span><br><span class="line">â”‚       â”‚       â”œâ”€â”€ index.js                // å…¥å£æ–‡ä»¶ï¼Œå¿…é¡»å¯¼å‡ºreactç»„ä»¶ï¼Œåç§°å¿…é¡»ä¸ºindex.[ext]</span><br><span class="line">â”‚       â”‚       â”œâ”€â”€ style.module.scss       // æ¨¡å—åŒ–æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚       â”‚       â””â”€â”€ style.scss              // å…¨å±€æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚       â””â”€â”€ component2</span><br><span class="line">â”‚           â”œâ”€â”€ dependencies.json</span><br><span class="line">â”‚           â””â”€â”€ <span class="built_in">source</span></span><br><span class="line">â”‚               â””â”€â”€ index.js</span><br><span class="line">â””â”€â”€ package-lock.json                       // ç‰ˆæœ¬é”å®šæ–‡ä»¶ï¼Œä¸éœ€è¦ä¿®æ”¹</span><br></pre></td></tr></table></figure>

<h4 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// æ‹‰å–é¡¹ç›® éœ€è¦é…ç½® ccws.config.json</span><br><span class="line">npm run sup:pull</span><br><span class="line"></span><br><span class="line">// å¼€å¯æœ¬åœ°å¼€å‘æœåŠ¡å™¨</span><br><span class="line">npm run sup:dev</span><br><span class="line"></span><br><span class="line">// æ¨é€é¡¹ç›®åˆ°suposå¹³å°</span><br><span class="line">npm run sup:push</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote>
<p>ccws.config.json</p>
</blockquote>
<ul>
<li>å¿…é¡»ä¼ å…¥ä¸€ä¸ªæ•°ç»„</li>
<li>projectï¼šé¡¹ç›®åç§° ç”¨äºé€‰æ‹©é¡¹ç›®</li>
<li>originï¼šé¡¹ç›®åœ°å€ åè®®:åŸŸå&#x2F;ip:ç«¯å£    ä¾‹å¦‚ï¼š <a target="_blank" rel="noopener" href="http://xxx.xxx.xxx:8080/">http://xxx.xxx.xxx:8080</a> <strong>æœ€åé¢ä¸è¦æœ‰ &#x2F;</strong></li>
</ul>
<h4 id="æ‹‰å–é¡¹ç›®"><a href="#æ‹‰å–é¡¹ç›®" class="headerlink" title="æ‹‰å–é¡¹ç›®"></a>æ‹‰å–é¡¹ç›®</h4><ul>
<li>é€‰æ‹©é¡¹ç›®</li>
</ul>
<p><img src="/posts/804c59ff0688/0002.png"></p>
<ul>
<li>è¾“å…¥è´¦å·å¯†ç </li>
</ul>
<p><img src="/posts/804c59ff0688/0003.png"></p>
<ul>
<li>å»ºç«‹é“¾æ¥é€‰æ‹©éœ€è¦åŒæ­¥çš„app,å¯ä»¥å¤šé€‰</li>
</ul>
<p><img src="/posts/804c59ff0688/0004.png"></p>
<ul>
<li>åŒæ­¥åæç¤ºæˆåŠŸ</li>
</ul>
<p><img src="/posts/804c59ff0688/0005.png"></p>
<h4 id="æ¨é€é¡¹ç›®"><a href="#æ¨é€é¡¹ç›®" class="headerlink" title="æ¨é€é¡¹ç›®"></a>æ¨é€é¡¹ç›®</h4><ul>
<li>æ–°å»ºçš„ç»„ä»¶ä¼šæœ‰ç«ç„°çš„æ ‡å¿—ï¼Œ æ›´æ–°ä¿®æ”¹çš„ç»„ä»¶ä¼šæœ‰upæ ‡å¿—</li>
</ul>
<p><img src="/posts/804c59ff0688/0006.png"></p>
<h4 id="CSS-x2F-SCSSå¼•ç”¨æ–¹æ³•"><a href="#CSS-x2F-SCSSå¼•ç”¨æ–¹æ³•" class="headerlink" title="CSS&#x2F;SCSSå¼•ç”¨æ–¹æ³•"></a>CSS&#x2F;SCSSå¼•ç”¨æ–¹æ³•</h4><ul>
<li>å…¨å±€å¼•å…¥</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.scss&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ¨¡å—åŒ–å¼•å…¥,å¿…é¡»ä»¥module.css æˆ– module.scssç»“å°¾</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Style</span> <span class="keyword">from</span> <span class="string">&#x27;./style.module.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Style</span> <span class="keyword">from</span> <span class="string">&#x27;./style.module.scss&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;div className=&#123;<span class="title class_">Style</span>.<span class="property">box</span>&#125;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="å›¾ç‰‡å¼•å…¥æ–¹å¼"><a href="#å›¾ç‰‡å¼•å…¥æ–¹å¼" class="headerlink" title="å›¾ç‰‡å¼•å…¥æ–¹å¼"></a>å›¾ç‰‡å¼•å…¥æ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bg <span class="keyword">from</span> <span class="string">&#x27;./bg.png&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;img src=&#123;bg&#125;/&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;background:bg&#125;&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="å†…ç½®ç¬¬ä¸‰æ–¹åŒ…"><a href="#å†…ç½®ç¬¬ä¸‰æ–¹åŒ…" class="headerlink" title="å†…ç½®ç¬¬ä¸‰æ–¹åŒ…"></a>å†…ç½®ç¬¬ä¸‰æ–¹åŒ…</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^17.0.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;react-dom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^17.0.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lodash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.17.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;antd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.16.13&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;moment&quot;</span><span class="punctuation">:</span><span class="string">&quot;^2.29.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.14&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vuera&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scriptUtil&quot;</span><span class="punctuation">:</span><span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>vuera</code> ç”¨äºå¤„ç†vueç»„ä»¶</p>
<p><strong>ä»¥ä¸Šç¬¬ä¸‰æ–¹åŒ…ä¸éœ€è¦æ‰‹åŠ¨åœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…ï¼Œå¦‚æœå®‰è£…äº†ä¼šæŠ¥ä¸ç¯å¢ƒä¾èµ–å†²çªçš„é”™è¯¯</strong></p>
<p><img src="/posts/804c59ff0688/0007.png"></p>
<p><strong>å…¶ä¸­ <code>lodash</code>,<code>scriptUtil</code> å…¨å±€å¼•å…¥ä¸éœ€è¦importå¯¼å…¥å³å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœå¯¼å…¥ä¼šåœ¨çº¿ä¸Šè¿è¡Œæ—¶å€™æŠ¥é”™</strong></p>
<p><strong>å…¶ä½™çš„ä¾èµ–åŒ…éƒ½éœ€è¦é€šè¿‡importå¯¼å…¥åæ‰èƒ½ä½¿ç”¨</strong></p>
<h4 id="å¼€å‘æ³¨æ„äº‹é¡¹"><a href="#å¼€å‘æ³¨æ„äº‹é¡¹" class="headerlink" title="å¼€å‘æ³¨æ„äº‹é¡¹"></a>å¼€å‘æ³¨æ„äº‹é¡¹</h4><ul>
<li>æœ¬åœ°åˆ é™¤çš„æ–‡ä»¶ï¼Œä¸ºäº†ä¿è¯å®‰å…¨æ€§ä¸ä¼šåœ¨çº¿ä¸ŠåŒæ­¥åˆ é™¤ï¼Œå¦‚æœæƒ³åˆ é™¤æ–‡ä»¶è¯·åœ¨çº¿ä¸Šåˆ é™¤ååœ¨åŒæ­¥åˆ°æœ¬åœ°</li>
<li>æ‹‰å–æ–‡ä»¶ä¼šæ¸…ç©ºä¹‹å‰çš„å·¥ä½œåŒºåŸŸï¼Œä¹Ÿå°±æ˜¯srcæ–‡ä»¶å¤¹ï¼Œè¯·ä¿è¯æ‹‰å–å‰æ‰€æœ‰çš„æ–‡ä»¶éƒ½å·²ç»æ¨é€åˆ°çº¿ä¸Šï¼Œæˆ–å·²ç»è½¬ç§»åˆ°å…¶ä»–æ–‡ä»¶å¤¹</li>
<li>ä¸èƒ½åœ¨srcç›®å½•ä¸‹åˆ›å»ºAppæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºAppåªèƒ½åœ¨çº¿ä¸Šï¼Œæœ¬åœ°åˆ›å»ºä¼šæŠ¥é”™</li>
<li>ç»„ä»¶ä¸èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯·ç¡®ä¿ç»„ä»¶æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¥å£æ–‡ä»¶å¤¹å‘½åå¿…é¡»ä¸º <code>source</code>æ–‡ä»¶å¤¹ä¸‹<code>index</code>ï¼Œåç¼€åå¯ä»¥æ˜¯ <code>.js .jsx .ts .tsx</code>,</li>
</ul>
<h4 id="ç‰ˆæœ¬å‡çº§"><a href="#ç‰ˆæœ¬å‡çº§" class="headerlink" title="ç‰ˆæœ¬å‡çº§"></a>ç‰ˆæœ¬å‡çº§</h4><ul>
<li><p><strong>2021-11-12</strong> </p>
<p>ä¿®å¤npm ç‰ˆæœ¬&gt;&#x3D; 8.1.0 å‘½ä»¤æŠ¥é”™ <code>Error: Cannot find module &#39;D:\vsCodeWorkspace\bi\demo\index-pull&#39;</code></p>
</li>
<li><p><strong>2021-11-16</strong> </p>
<p>ä¿®å¤windowsç³»ç»Ÿç”±äºæ–‡ä»¶è·¯å¾„é”™è¯¯å¯¼è‡´çš„ä¸èƒ½è§£æçš„é—®é¢˜ã€‚</p>
</li>
<li><p><strong>2021-11-24</strong></p>
<p>ä¸éœ€è¦ä¾èµ–gitç¯å¢ƒå˜é‡</p>
<p><img src="/posts/804c59ff0688/0008.png"></p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8F%AF%E7%BC%96%E7%A8%8B%E7%BB%84%E4%BB%B6/" rel="tag">å¯ç¼–ç¨‹ç»„ä»¶</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-react/â‘¡(åŸç†)reactæ‰§è¡Œæµç¨‹å’Œæ•´ä½“æ¶æ„"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/94ab7cddc99f/"
    >ReactåŸç† æ‰§è¡Œæµç¨‹ä¸æ¶æ„</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/94ab7cddc99f/" class="article-date">
  <time datetime="2021-10-22T11:04:28.000Z" itemprop="datePublished">2021-10-22</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="æ•´ä½“æ‰§è¡Œæµç¨‹"><a href="#æ•´ä½“æ‰§è¡Œæµç¨‹" class="headerlink" title="æ•´ä½“æ‰§è¡Œæµç¨‹"></a>æ•´ä½“æ‰§è¡Œæµç¨‹</h4><p><img src="/posts/94ab7cddc99f/0001.png"></p>
<h4 id="åˆå§‹åŒ–äº‹ä»¶ç›¸å…³å¯¹è±¡"><a href="#åˆå§‹åŒ–äº‹ä»¶ç›¸å…³å¯¹è±¡" class="headerlink" title="åˆå§‹åŒ–äº‹ä»¶ç›¸å…³å¯¹è±¡"></a>åˆå§‹åŒ–äº‹ä»¶ç›¸å…³å¯¹è±¡</h4><p><img src="/posts/94ab7cddc99f/0002.png"></p>
<ul>
<li>registerSimpleEvents åˆ›å»ºå¯¹è±¡ç›¸å…³å¯¹è±¡</li>
</ul>
<table>
<thead>
<tr>
<th>å˜é‡åç§°</th>
<th>å˜é‡å¯¹è±¡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>allNativeEvents</td>
<td>Seté›†åˆ</td>
<td><div style='width:600px'>ä¿å­˜æ‰€æœ‰åŸç”Ÿäº‹ä»¶çš„åç§° ä¾‹å¦‚ <code>0:&quot;cancel&quot;</code></div></td>
</tr>
<tr>
<td>eventPriorities</td>
<td>Mapé›†</td>
<td><div style='width:600px'>ä¿å­˜äº‹ä»¶åç§°å’Œäº‹ä»¶ä¼˜å…ˆçº§å¯¹åº”å…³ç³» ä¾‹å¦‚ <code>click=&gt;0</code> </div></td>
</tr>
<tr>
<td>topLevelEventsToReactNames</td>
<td>Mapé›†</td>
<td><div style='width:600px'>ä¿å­˜åŸå§‹äº‹ä»¶åç§°å’Œ Reactäº‹ä»¶çš„å¯¹åº”å…³ç³» ä¾‹å¦‚ <code>&quot;cancel&quot; =&gt; &quot;onCancel&quot;</code> </div></td>
</tr>
<tr>
<td>registrationNameDependencies</td>
<td>Object</td>
<td><div style='width:600px'>ä¿å­˜Reactäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶çš„å¯¹åº”å…³ç³» ä¾‹å¦‚ <code>onClick:(1) [&#39;click&#39;]</code> æ¯ä¸ªReactäº‹ä»¶å¯¹åº”ä¸€ä¸ªæ•°ç»„ç”¨äºä¿å­˜åˆæˆäº‹ä»¶å¯¹åº”å…³ç³»</div></td>
</tr>
<tr>
<td>possibleRegistrationNames</td>
<td>Object</td>
<td><div style='width:600px'>ä¿å­˜å°å†™çš„Reactäº‹ä»¶åç§°å’Œæ­£ç¡®çš„é©¼å³°å‘½åäº‹ä»¶çš„å¯¹åº”å…³ç³»ï¼Œç”¨äºæ ¡éªŒç”¨æˆ·è¾“å…¥ ä¾‹å¦‚ <code>onclick:onClick</code></div></td>
</tr>
</tbody></table>
<h4 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h4><p><img src="/posts/94ab7cddc99f/0003.png"></p>
<p><strong>render</strong> : ReactDom.render()<br><strong>createRootImpl</strong> : åˆ›å»º FiberRootNode æ ¹èŠ‚ç‚¹<br><strong>listenToAllSupportedEvents</strong> : ç»‘å®šæ‰€æœ‰åŸç”Ÿäº‹ä»¶åœ¨rootèŠ‚ç‚¹ä¸Š</p>
<h4 id="renderé˜¶æ®µ"><a href="#renderé˜¶æ®µ" class="headerlink" title="renderé˜¶æ®µ"></a>renderé˜¶æ®µ</h4><p><img src="/posts/94ab7cddc99f/0004.png"></p>
<p><strong>unbatchedUpdates</strong> : éæ‰¹é‡æ›´æ–°ï¼Œè®©ç”¨æˆ·å°½æ—©çœ‹è§é¡µé¢å†…å®¹ï¼Œå¦‚æœæ˜¯ batchedUpdates ä¼šä»¥å¼‚æ­¥æ‰§è¡Œ<br><strong>scheduleUpdateOnFiber</strong> : è°ƒåº¦FiberèŠ‚ç‚¹æ›´æ–°ä¼˜å…ˆçº§<br><strong>performUnitOfWork</strong> : ä»¥FiberèŠ‚ç‚¹ä¸ºå•ä½ï¼Œæ·±åº¦ä¼˜å…ˆé€’å½’éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹<br><strong>reconcileChildren</strong> ï¼š åˆ›å»ºå¯¹æ¯”FiberèŠ‚ç‚¹ï¼Œæ ‡è®°æœ‰å‰¯ä½œç”¨çš„èŠ‚ç‚¹ ï¼ˆæ·»åŠ ï¼Œåˆ é™¤ï¼Œç§»åŠ¨ï¼Œæ›´æ–°ï¼‰<br><strong>completeUnitOfWork</strong> ï¼š ä»ä¸‹è‡³ä¸Šéå†èŠ‚ç‚¹ï¼Œåˆ›å»ºç›¸åº”çš„DOMèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºEffectsé“¾è¡¨ï¼Œäº¤ç»™commité˜¶æ®µä½¿ç”¨</p>
<h4 id="commité˜¶æ®µ"><a href="#commité˜¶æ®µ" class="headerlink" title="commité˜¶æ®µ"></a>commité˜¶æ®µ</h4><p><img src="/posts/94ab7cddc99f/0005.png"></p>
<p><strong>commitBeforeMutationEffects</strong>: æ“ä½œçœŸå®èŠ‚ç‚¹å‰æ‰§è¡Œï¼Œä¼šæ‰§è¡Œ<code>getSnapshotBeforeUpdate</code><br><strong>commitMutationEffects</strong>: æ‰§è¡ŒèŠ‚ç‚¹æ“ä½œ<br><strong>commitLayoutEffectsï¼š</strong> æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼ŒåŒ…æ‹¬ <code>componentDidUpdate</code> æˆ– <code>effect</code>å›è°ƒå‡½æ•°</p>
<h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h4><p>jsxæ˜¯jsè¯­è¨€çš„æ‰©å±•ï¼Œreacté€šè¿‡babelè¯æ³•è§£æï¼Œå°†jsxè½¬æ¢æˆReact.createElementï¼ŒReact.createElementæ–¹æ³•è¿”å›virtual-domå¯¹è±¡ï¼ˆå†…å­˜ä¸­ç”¨æ¥æè¿°domé˜¶æ®µçš„å¯¹è±¡ï¼‰ï¼Œæ‰€æœ‰jsxæœ¬è´¨ä¸Šå°±æ˜¯React.createElementçš„è¯­æ³•ç³–ï¼Œå®ƒèƒ½å£°æ˜å¼çš„ç¼–å†™æˆ‘ä»¬æƒ³è¦ç»„ä»¶å‘ˆç°å‡ºä»€ä¹ˆæ ·çš„uiæ•ˆæœ.</p>
<h4 id="FiberåŒç¼“å­˜"><a href="#FiberåŒç¼“å­˜" class="headerlink" title="FiberåŒç¼“å­˜"></a>FiberåŒç¼“å­˜</h4><p>Fiberå¯¹è±¡ä¸Šé¢ä¿å­˜äº†åŒ…æ‹¬è¿™ä¸ªèŠ‚ç‚¹çš„å±æ€§ã€ç±»å‹ã€domç­‰ï¼ŒFiberé€šè¿‡childã€siblingã€returnï¼ˆæŒ‡å‘çˆ¶èŠ‚ç‚¹ï¼‰æ¥å½¢æˆFiberæ ‘ï¼Œè¿˜ä¿å­˜äº†æ›´æ–°çŠ¶æ€æ—¶ç”¨äºè®¡ç®—stateçš„updateQueueï¼ŒupdateQueueæ˜¯ä¸€ç§é“¾è¡¨ç»“æ„ï¼Œä¸Šé¢å¯èƒ½å­˜åœ¨å¤šä¸ªæœªè®¡ç®—çš„updateï¼Œupdateä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸Šé¢åŒ…å«äº†æ›´æ–°çš„æ•°æ®ã€ä¼˜å…ˆçº§ç­‰ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–ï¼Œä¸Šé¢è¿˜æœ‰å’Œå‰¯ä½œç”¨æœ‰å…³çš„ä¿¡æ¯ã€‚</p>
<p>åŒç¼“å­˜æ˜¯æŒ‡å­˜åœ¨ä¸¤é¢—Fiberæ ‘ï¼Œcurrent Fiberæ ‘æè¿°äº†å½“å‰å‘ˆç°çš„domæ ‘ï¼ŒworkInProgress Fiberæ˜¯æ­£åœ¨æ›´æ–°çš„Fiberæ ‘ï¼Œè¿™ä¸¤é¢—Fiberæ ‘éƒ½æ˜¯åœ¨å†…å­˜ä¸­è¿è¡Œçš„ï¼Œåœ¨workInProgress Fiberæ„å»ºå®Œæˆä¹‹åä¼šå°†å®ƒä½œä¸ºcurrent Fiberåº”ç”¨åˆ°domä¸Š</p>
<p>åœ¨mountæ—¶ï¼ˆé¦–æ¬¡æ¸²æŸ“ï¼‰ï¼Œä¼šæ ¹æ®jsxå¯¹è±¡ï¼ˆClass Componentæˆ–çš„renderå‡½æ•°è€…Function Componentçš„è¿”å›å€¼ï¼‰ï¼Œæ„å»ºFiberå¯¹è±¡ï¼Œå½¢æˆFiberæ ‘ï¼Œç„¶åè¿™é¢—Fiberæ ‘ä¼šä½œä¸ºcurrent Fiberåº”ç”¨åˆ°çœŸå®domä¸Šï¼Œåœ¨updateï¼ˆçŠ¶æ€æ›´æ–°æ—¶å¦‚setStateï¼‰çš„æ—¶å€™ï¼Œä¼šæ ¹æ®çŠ¶æ€å˜æ›´åçš„jsxå¯¹è±¡å’Œcurrent Fiberåšå¯¹æ¯”å½¢æˆæ–°çš„workInProgress Fiberï¼Œç„¶åworkInProgress Fiberåˆ‡æ¢æˆcurrent Fiberåº”ç”¨åˆ°çœŸå®domå°±è¾¾åˆ°äº†æ›´æ–°çš„ç›®çš„ï¼Œè€Œè¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨å†…å­˜ä¸­å‘ç”Ÿçš„ï¼Œä»è€Œå‡å°‘äº†å¯¹domå¥½æ€§èƒ½çš„æ“ä½œã€‚</p>
<p><img src="/posts/94ab7cddc99f/0006.jpg"></p>
<h4 id="Laneæ¨¡å‹"><a href="#Laneæ¨¡å‹" class="headerlink" title="Laneæ¨¡å‹"></a>Laneæ¨¡å‹</h4><p>reactä¹‹å‰çš„ç‰ˆæœ¬ç”¨expirationTimeå±æ€§ä»£è¡¨ä¼˜å…ˆçº§ï¼Œè¯¥ä¼˜å…ˆçº§å’ŒIOä¸èƒ½å¾ˆå¥½çš„æ­é…å·¥ä½œï¼ˆioçš„ä¼˜å…ˆçº§é«˜äºcpuçš„ä¼˜å…ˆçº§ï¼‰ï¼Œç°åœ¨æœ‰äº†æ›´åŠ ç»†ç²’åº¦çš„ä¼˜å…ˆçº§è¡¨ç¤ºæ–¹æ³•Laneï¼ŒLaneç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºä¼˜å…ˆçº§ï¼ŒäºŒè¿›åˆ¶ä¸­çš„1è¡¨ç¤ºä½ç½®ï¼ŒåŒä¸€ä¸ªäºŒè¿›åˆ¶æ•°å¯ä»¥æœ‰å¤šä¸ªç›¸åŒä¼˜å…ˆçº§çš„ä½ï¼Œè¿™å°±å¯ä»¥è¡¨ç¤ºâ€˜æ‰¹â€™çš„æ¦‚å¿µï¼Œè€Œä¸”äºŒè¿›åˆ¶æ–¹ä¾¿è®¡ç®—ã€‚</p>
<p>è¿™å¥½æ¯”èµ›è½¦æ¯”èµ›ï¼Œåœ¨æ¯”èµ›å¼€å§‹çš„æ—¶å€™ä¼šåˆ†é…ä¸€ä¸ªèµ›é“ï¼Œæ¯”èµ›å¼€å§‹ä¹‹åå¤§å®¶éƒ½ä¼šæŠ¢å†…åœˆçš„èµ›é“ï¼ˆreactä¸­å°±æ˜¯æŠ¢ä¼˜å…ˆçº§é«˜çš„Laneï¼‰ï¼Œæ¯”èµ›çš„å°¾å£°ï¼Œæœ€åä¸€åèµ›è½¦å¦‚æœè½åäº†å¾ˆå¤šï¼Œå®ƒä¹Ÿä¼šè·‘åˆ°å†…åœˆçš„èµ›é“ï¼Œæœ€ååˆ°è¾¾ç›®çš„åœ°ï¼ˆå¯¹åº”reactä¸­å°±æ˜¯é¥¥é¥¿é—®é¢˜ï¼Œä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å¦‚æœè¢«é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¸€ç›´æ‰“æ–­ï¼Œåˆ°äº†å®ƒçš„è¿‡æœŸæ—¶é—´ï¼Œå®ƒä¹Ÿä¼šå˜æˆé«˜ä¼˜å…ˆçº§ï¼‰</p>
<p>Laneçš„äºŒè¿›åˆ¶ä½å¦‚ä¸‹ï¼Œ1çš„bitsè¶Šå¤šï¼Œä¼˜å…ˆçº§è¶Šä½</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">NoLanes</span>: <span class="title class_">Lanes</span> = <span class="comment">/*                        */</span> <span class="number">0b0000000000000000000000000000000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">NoLane</span>: <span class="title class_">Lane</span> = <span class="comment">/*                          */</span> <span class="number">0b0000000000000000000000000000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SyncLane</span>: <span class="title class_">Lane</span> = <span class="comment">/*                        */</span> <span class="number">0b0000000000000000000000000000001</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SyncBatchedLane</span>: <span class="title class_">Lane</span> = <span class="comment">/*                 */</span> <span class="number">0b0000000000000000000000000000010</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h4><p>Schedulerçš„ä½œç”¨æ˜¯è°ƒåº¦ä»»åŠ¡ï¼Œreact15æ²¡æœ‰Schedulerè¿™éƒ¨åˆ†ï¼Œæ‰€ä»¥æ‰€æœ‰ä»»åŠ¡æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œä¹Ÿä¸èƒ½ä¸­æ–­ï¼Œåªèƒ½åŒæ­¥æ‰§è¡Œã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“äº†è¦å®ç°å¼‚æ­¥å¯ä¸­æ–­çš„æ›´æ–°ï¼Œéœ€è¦æµè§ˆå™¨æŒ‡å®šä¸€ä¸ªæ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰æ—¶é—´å‰©ä½™äº†å°±éœ€è¦æš‚åœä»»åŠ¡ï¼ŒrequestIdleCallbackè²Œä¼¼æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†æ˜¯å®ƒå­˜åœ¨å…¼å®¹å’Œè§¦å‘ä¸ç¨³å®šçš„åŸå› ï¼Œreact17ä¸­é‡‡ç”¨MessageChannelæ¥å®ç°ã€‚</p>
<p>åœ¨Schedulerä¸­çš„æ¯çš„æ¯ä¸ªä»»åŠ¡çš„ä¼˜å…ˆçº§ä½¿ç”¨è¿‡æœŸæ—¶é—´è¡¨ç¤ºçš„ï¼Œå¦‚æœä¸€ä¸ªä»»åŠ¡çš„è¿‡æœŸæ—¶é—´ç¦»ç°åœ¨å¾ˆè¿‘ï¼Œè¯´æ˜å®ƒé©¬ä¸Šå°±è¦è¿‡æœŸäº†ï¼Œä¼˜å…ˆçº§å¾ˆé«˜ï¼Œå¦‚æœè¿‡æœŸæ—¶é—´å¾ˆé•¿ï¼Œé‚£å®ƒçš„ä¼˜å…ˆçº§å°±ä½ï¼Œæ²¡æœ‰è¿‡æœŸçš„ä»»åŠ¡å­˜æ”¾åœ¨timerQueueä¸­ï¼Œè¿‡æœŸçš„ä»»åŠ¡å­˜æ”¾åœ¨taskQueueä¸­ï¼ŒtimerQueueå’ŒtimerQueueéƒ½æ˜¯å°é¡¶å †ï¼Œæ‰€ä»¥peekå–å‡ºæ¥çš„éƒ½æ˜¯ç¦»ç°åœ¨æ—¶é—´æœ€è¿‘ä¹Ÿå°±æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡ï¼Œç„¶åä¼˜å…ˆæ‰§è¡Œå®ƒã€‚</p>
<h4 id="reconciler"><a href="#reconciler" class="headerlink" title="reconciler"></a>reconciler</h4><p>Reconcilerå‘ç”Ÿåœ¨renderé˜¶æ®µï¼Œrenderé˜¶æ®µä¼šåˆ†åˆ«ä¸ºèŠ‚ç‚¹æ‰§è¡ŒbeginWorkå’ŒcompleteWorkï¼Œæˆ–è€…è®¡ç®—stateï¼Œå¯¹æ¯”èŠ‚ç‚¹çš„å·®å¼‚ï¼Œä¸ºèŠ‚ç‚¹èµ‹å€¼ç›¸åº”çš„effectFlagsï¼ˆå¯¹åº”domèŠ‚ç‚¹çš„å¢åˆ æ”¹ï¼‰ã€‚</p>
<p>åè°ƒå™¨æ˜¯åœ¨renderé˜¶æ®µå·¥ä½œçš„ï¼Œç®€å•ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯Reconcilerä¼šåˆ›å»ºæˆ–è€…æ›´æ–°FiberèŠ‚ç‚¹ã€‚åœ¨mountçš„æ—¶å€™ä¼šæ ¹æ®jsxç”ŸæˆFiberå¯¹è±¡ï¼Œåœ¨updateçš„æ—¶å€™ä¼šæ ¹æ®æœ€æ–°çš„stateå½¢æˆçš„jsxå¯¹è±¡å’Œcurrent Fiberæ ‘å¯¹æ¯”æ„å»ºworkInProgress Fiberæ ‘ï¼Œè¿™ä¸ªå¯¹æ¯”çš„è¿‡ç¨‹å°±æ˜¯diffç®—æ³•ã€‚</p>
<p>diffç®—æ³•å‘ç”Ÿåœ¨renderé˜¶æ®µçš„reconcileChildFiberså‡½æ•°ä¸­ï¼Œdiffç®—æ³•åˆ†ä¸ºå•èŠ‚ç‚¹çš„diffå’Œå¤šèŠ‚ç‚¹çš„diffï¼ˆä¾‹å¦‚ä¸€ä¸ªèŠ‚ç‚¹ä¸­åŒ…å«å¤šä¸ªå­èŠ‚ç‚¹å°±å±äºå¤šèŠ‚ç‚¹çš„diffï¼‰ï¼Œå•èŠ‚ç‚¹ä¼šæ ¹æ®èŠ‚ç‚¹çš„keyå’Œtypeï¼Œpropsç­‰æ¥åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¤ç”¨è¿˜æ˜¯ç›´æ¥æ–°åˆ›å»ºèŠ‚ç‚¹ï¼Œå¤šèŠ‚ç‚¹diffä¼šæ¶‰åŠèŠ‚ç‚¹çš„å¢åˆ å’ŒèŠ‚ç‚¹ä½ç½®çš„å˜åŒ–ã€‚</p>
<p>reconcileæ—¶ä¼šåœ¨è¿™äº›Fiberä¸Šæ‰“ä¸ŠFlagsæ ‡ç­¾ï¼Œåœ¨commité˜¶æ®µæŠŠè¿™äº›æ ‡ç­¾åº”ç”¨åˆ°çœŸå®domä¸Šï¼Œè¿™äº›æ ‡ç­¾ä»£è¡¨èŠ‚ç‚¹çš„å¢åˆ æ”¹ï¼Œå¦‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Placement</span> = <span class="comment">/*             */</span> <span class="number">0b0000000000010</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Update</span> = <span class="comment">/*                */</span> <span class="number">0b0000000000100</span>;</span><br></pre></td></tr></table></figure>

<p>renderé˜¶æ®µéå†Fiberæ ‘ç±»ä¼¼dfsçš„è¿‡ç¨‹ï¼Œå¤„ç†å‘ç”Ÿåœ¨beginWorkå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°åšçš„ä¸»è¦å·¥ä½œæ˜¯åˆ›å»ºFiberèŠ‚ç‚¹ï¼Œè®¡ç®—stateå’Œdiffç®—æ³•ï¼Œâ€˜å†’æ³¡â€™é˜¶æ®µå‘ç”Ÿåœ¨completeWorkä¸­ï¼Œè¯¥å‡½æ•°ä¸»è¦æ˜¯åšä¸€äº›æ”¶å°¾å·¥ä½œï¼Œä¾‹å¦‚å¤„ç†èŠ‚ç‚¹çš„propsã€å’Œå½¢æˆä¸€æ¡effectListçš„é“¾è¡¨ï¼Œè¯¥é“¾è¡¨æ˜¯è¢«æ ‡è®°äº†æ›´æ–°çš„èŠ‚ç‚¹å½¢æˆçš„é“¾è¡¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">   	 <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setCount(() =&gt; count + 1);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">&#123;count&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> hello</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœpå’Œh1èŠ‚ç‚¹æ›´æ–°äº†åˆ™effectListå¦‚ä¸‹ï¼Œä»rootFiber-&gt;h1-&gt;p,ï¼Œé¡ºä¾¿è¯´ä¸‹fiberRootæ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¹èŠ‚ç‚¹ï¼Œåªå­˜åœ¨ä¸€ä¸ªï¼ŒrootFiberæ˜¯åº”ç”¨çš„æ ¹èŠ‚ç‚¹ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/9/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> SunZhiqi
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.png" alt="å››æœˆå…«æ—¥"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Essay">éšç¬”</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>æ­¤æ—¶æ— å£°èƒœæœ‰å£°ï¼</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="/js/jquery.modal.min.js"></script>
<link rel="stylesheet" href="/css/jquery.modal.min.css" />
<script src="/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>

  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>

    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->

        <div class="pswp__counter"></div>

        <button
          class="pswp__button pswp__button--close"
          title="Close (Esc)"
        ></button>

        <button
          class="pswp__button pswp__button--share"
          style="display: none"
          title="Share"
        ></button>

        <button
          class="pswp__button pswp__button--fs"
          title="Toggle fullscreen"
        ></button>

        <button
          class="pswp__button pswp__button--zoom"
          title="Zoom in/out"
        ></button>

        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>

      <button
        class="pswp__button pswp__button--arrow--left"
        title="Previous (arrow left)"
      ></button>

      <button
        class="pswp__button pswp__button--arrow--right"
        title="Next (arrow right)"
      ></button>

      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/photoswipe.min.css" />
<link rel="stylesheet" href="/css/default-skin.min.css" />
<script src="/js/photoswipe.min.js"></script>
<script src="/js/photoswipe-ui-default.min.js"></script>

<script>
  function viewer_init() {
    let pswpElement = document.querySelectorAll(".pswp")[0];
    let $imgArr = document.querySelectorAll(
      ".article-entry img:not(.reward-img)"
    );

    $imgArr.forEach(($em, i) => {
      $em.onclick = () => {
        // sliderå±•å¼€çŠ¶æ€
        // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
        if (document.querySelector(".left-col.show")) return;
        let items = [];
        $imgArr.forEach(($em2, i2) => {
          let img = $em2.getAttribute("data-idx", i2);
          let src =
            $em2.getAttribute("data-target") || $em2.getAttribute("src");
          let title = $em2.getAttribute("alt");
          // è·å¾—åŸå›¾å°ºå¯¸
          const image = new Image();
          image.src = src;
          items.push({
            src: src,
            w: image.width || $em2.width,
            h: image.height || $em2.height,
            title: title,
          });
        });
        var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
          index: parseInt(i),
        });
        gallery.init();
      };
    });
  }
  viewer_init();
</script>
 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="/js/MathJax.js"></script>
<script src="/js/TeX-AMS-MML_HTMLorMML-full.js"></script>

<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="/js/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !(function (e, t, a) {
    var initCopyCode = function () {
      var copyHtml = "";
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += "</button>";
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS(".btn-copy", {
        target: function (trigger) {
          return trigger.nextElementSibling;
        },
      });
      clipboard.on("success", function (e) {
        let $btn = $(e.trigger);
        $btn.addClass("copied");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-checkbox-circle-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPIED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-checkbox-circle-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
      clipboard.on("error", function (e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass("copy-failed");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-time-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPY FAILED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-time-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
    };
    initCopyCode();
  })(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "default" });
  }
</script>


    
    

  </div>
</body>

</html>