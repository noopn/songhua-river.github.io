<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="å‰ç«¯ web react" />
       
      <meta name="description" content="å‰ç«¯æŠ€æœ¯ä¸ç”Ÿæ´»ã€‚" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> å››æœˆå…«æ—¥</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">
 
<link rel="stylesheet" href="/css/fonts/remixicon.css">
 
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="/js/pace.min.js"></script>
       
 

      <link rel="stylesheet" href="/css/bulma.min.css" />
      <script src="/js/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/katex.min.css">

<link rel="stylesheet" href="/css/style.css">
<!-- hexo injector head_end end --></head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">å››æœˆå…«æ—¥</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['æ„¿ä½ è¶³å¤Ÿå¼ºå¤§ï¼Œä¹Ÿè¦è¶³å¤Ÿæ¸©æŸ”', 'æœ€è½»çš„å¹¶ä¸æ˜¯ä¸€æ ¹ç¾½æ¯›ï¼Œè€Œæ˜¯ä¸€åŒé£é¸Ÿçš„ç¿…è†€', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="post-webpack/é…ç½®ä¼˜åŒ–"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/40f37b34d706/"
    >é…ç½®ä¼˜åŒ–</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/40f37b34d706/" class="article-date">
  <time datetime="2021-01-20T18:08:38.000Z" itemprop="datePublished">2021-01-21</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h5 id="HMR-æ¨¡å—çƒ­æ›¿æ¢"><a href="#HMR-æ¨¡å—çƒ­æ›¿æ¢" class="headerlink" title="HMR æ¨¡å—çƒ­æ›¿æ¢"></a>HMR æ¨¡å—çƒ­æ›¿æ¢</h5><p>å½“ä¸€ä¸ªæ¨¡å—æ”¹å˜æ—¶é¿å…æ‰€æœ‰çš„æ¨¡å—éƒ½è¢«é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼Œåº”è¯¥åªæ›´æ–°ä¿®æ”¹çš„æ¨¡å—</p>
<p>é€šè¿‡ <code>hot:true</code> å¼€å¯hmrï¼Œæ­¤æ—¶æ ·å¼æ–‡ä»¶(.css .scss) å¯ä»¥è¿›è¡Œçƒ­æ¨¡å—æ›¿æ¢ï¼Œ<code>style-loader</code>å†…éƒ¨çš„å®ç°ï¼Œä½†æ˜¯jsæ–‡ä»¶æ²¡æœ‰å¼€å¯çƒ­æ›¿æ¢ï¼Œè€Œä¸”htmlçš„æ–‡ä»¶ä¹Ÿä¸èƒ½æ›´æ–°äº†</p>
<p>å› ä¸ºçƒ­æ›¿æ¢é˜»æ­¢äº†åˆ·æ–°ï¼Œé€šè¿‡ä¿®æ”¹<code>webpack.config.js</code> å…¥å£é…ç½®<code>entry: [&#39;./src/index.js&#39;,&#39;./src/index.html&#39;],</code>,å¯ä»¥é‡æ–°å¼€å¯<code>index.html</code>çš„åˆ·æ–°åŠŸèƒ½</p>
<p>å¦å¤– <code>html</code>æ–‡ä»¶ä¸éœ€è¦çƒ­æ›¿æ¢çš„åŠŸèƒ½ï¼Œå› ä¸ºæ¯ä¸ªå…¥å£åªå¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€å®šè¦é‡æ–°åŠ è½½</p>
<p><code>.js</code>æ–‡ä»¶çš„çƒ­æ›¿æ¢ä¸èƒ½æ˜¯å…¥å£æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./print.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>);</span><br><span class="line">    <span class="title function_">printMe</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h5><p>æä¾›æºä»£ç åˆ°ç¼–è¯‘åä»£ç æ˜ å°„çš„æ–¹æ¡ˆï¼Œå¯ä»¥è¿½è¸ªæºä»£ç çš„ä½ç½® é€šè¿‡<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/devtool/#root">devtool</a>é…ç½®</p>
<p>[inline-|hidden-|eval][nosources-][cheap-[module-]]source-map</p>
<p>inline æ„å»ºé€Ÿåº¦å¿«</p>
<p>source-map èƒ½æç¤ºé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ï¼Œå’Œæºä»£ç ä¸­å‡†ç¡®ä½ç½®ï¼Œä¼šå•ç‹¬ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶</p>
<p>inline-source-map source-mapä¼šå†…åµŒåˆ°ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­ï¼Œåªç”Ÿæˆä¸€ä¸ªå†…è”çš„source-map ï¼Œèƒ½æç¤ºé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ï¼Œå’Œæºä»£ç ä¸­å‡†ç¡®ä½ç½®</p>
<p>eval-source-map source-mapä¼šå†…åµŒåˆ°ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­,æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šç”Ÿæˆå¯¹åº”çš„source-mapï¼Œå¯ä»¥æç¤ºé”™è¯¯åŸå› ï¼Œä½†ä¸èƒ½è¿½è¸ªåˆ°æºä»£ç ä½ç½®ï¼Œåªä¼šå®šä½åˆ°ç¼–è¯‘åçš„é”™è¯¯ä½ç½®</p>
<p>hidden-source-map source-mapæ–‡ä»¶ä¼šå•ç‹¬ç”Ÿæˆï¼Œå¯ä»¥æç¤ºé”™è¯¯åŸå› ï¼Œä½†ä¸èƒ½è¿½è¸ªåˆ°æºä»£ç ä½ç½®ï¼Œåªä¼šå®šä½åˆ°ç¼–è¯‘åçš„é”™è¯¯ä½ç½®</p>
<p>cheap-source-map åœ¨å¤–éƒ¨å•ç‹¬ç”Ÿæˆï¼Œåªèƒ½æç¤ºåˆ°è¡Œï¼Œå¦‚æœä»£ç åœ¨ä¸€è¡Œä¸­ï¼Œä¸èƒ½å‡†ç¡®çš„å®šä½</p>
<p>cheap-module-source-map åœ¨å¤–éƒ¨å•ç‹¬ç”Ÿæˆ ä¸ cheap-source-map ç±»ä¼¼,ä¼šå°†loaderçš„source-mapåŠ å…¥</p>
<p>nosources-source-map å¯ä»¥æä¾›ä½œç‰©ä¿¡æ¯ï¼Œä½†æ˜¯ä¸èƒ½å®šä½åˆ°é”™è¯¯ä½ç½®ï¼Œæºä»£ç å’Œç¼–è¯‘åä»£ç éƒ½ä¸å¯ä»¥</p>
<p>æ•°åº¦å¿«æ…¢: eval&#x3D;&gt; inline &#x3D;&gt; cheap</p>
<p>å¼€å‘ç¯å¢ƒï¼šcheap-source-map<br>  é€Ÿåº¦å¿«<br>    eval-cheap-source-map<br>    eval-source-map ğŸ†š<br>  è°ƒè¯•å‹å¥½<br>    source-map<br>    cheap-module-source-map<br>    cheap-source-map</p>
<p>ç”Ÿäº§ç¯å¢ƒ<br>  ç®€å•è°ƒè¯•ï¼Œ<br>  å†…è”ä¼šè®©ä½“ç§¯å˜å¤§<br>  nosources-source-map å…¨éƒ¨éšè—ä»£ç ï¼Œåœ¨çº¿ä¸Šç¯å¢ƒä½¿ç”¨ğŸ†š<br>  hidden-source-map  åªéšè—æºä»£ç </p>
<p>  source-map ğŸ†š,å•ç‹¬ç”Ÿæˆæ–‡ä»¶ä¸”ä¾¿äºè°ƒè¯•</p>
<h4 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h4><p>ç”¨äºæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œåªè¦æœ‰ä¸€ä¸ªloaderåŒ¹é…åˆ°å°±ä¸ä¼šç»§ç»­åŒ¹é…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="comment">// æŒ‡å®šä¼˜å…ˆçº§ï¼Œéƒ½ä¼šå…ˆè¢«è¿™ä¸ªloaderå¤„ç†</span></span><br><span class="line">        <span class="attr">enforce</span>:<span class="string">&#x27;pre&#x27;</span></span><br><span class="line">      &#125;ï¼Œ</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>:[</span><br><span class="line">          <span class="comment">// å…¶ä»–çš„loader</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><p>åœ¨ç¼–è¯‘æ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼–è¯‘å¥½çš„ç¼“å­˜æ–‡ä»¶ï¼Œæ— éœ€æ‰€æœ‰æ–‡ä»¶éƒ½é‡æ–°ç¼–è¯‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/i</span>,</span><br><span class="line">  <span class="attr">use</span>: [&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>:&#123;</span><br><span class="line">      <span class="attr">cacheDirectory</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶èµ„æºçš„ç¼“å­˜ </p>
<ul>
<li><p>hash å¦‚æœéƒ½ä½¿ç”¨hashçš„è¯ï¼Œå³æ¯æ¬¡ä¿®æ”¹ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶åçš„hashè‡³éƒ½å°†æ”¹å˜ã€‚æ‰€ä»¥ä¸€æ—¦ä¿®æ”¹äº†ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç¼“å­˜éƒ½å°†å¤±æ•ˆ.</p>
</li>
<li><p>chunkhash chunkhashæ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(Entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„å“ˆå¸Œå€¼ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒé‡ŒæŠŠä¸€äº›å…¬å…±åº“å’Œç¨‹åºå…¥å£æ–‡ä»¶åŒºåˆ†å¼€ï¼Œå•ç‹¬æ‰“åŒ…æ„å»ºï¼Œæ¥ç€æˆ‘ä»¬é‡‡ç”¨chunkhashçš„æ–¹å¼ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬ä¸æ”¹åŠ¨å…¬å…±åº“çš„ä»£ç ï¼Œå°±å¯ä»¥ä¿è¯å…¶å“ˆå¸Œå€¼ä¸ä¼šå—å½±å“ã€‚åŠ¨æ€importä¹Ÿå—chunkhashçš„å½±å“.</p>
</li>
</ul>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯å°†æ ·å¼ä½œä¸ºæ¨¡å—importåˆ°JavaScriptæ–‡ä»¶ä¸­çš„ï¼Œæ‰€ä»¥å®ƒä»¬çš„chunkhashæ˜¯ä¸€è‡´çš„,è¿™æ ·å°±ä¼šæœ‰ä¸ªé—®é¢˜ï¼Œåªè¦å¯¹åº”cssæˆ–åˆ™jsæ”¹å˜ï¼Œä¸å…¶å…³è”çš„æ–‡ä»¶hashå€¼ä¹Ÿä¼šæ”¹å˜ï¼Œä½†å…¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜å‘¢ï¼Œæ‰€ä»¥æ²¡æœ‰è¾¾åˆ°ç¼“å­˜æ„ä¹‰ã€‚å›ºcontenthashçš„ç”¨é€”éšä¹‹è€Œæ¥ã€‚</p>
<ul>
<li>contenthashæ˜¯é’ˆå¯¹æ–‡ä»¶å†…å®¹çº§åˆ«çš„ï¼Œåªæœ‰ä½ è‡ªå·±æ¨¡å—çš„å†…å®¹å˜äº†ï¼Œé‚£ä¹ˆhashå€¼æ‰æ”¹å˜</li>
</ul>
<h4 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree-shaking"></a>tree-shaking</h4><p>ä½¿ç”¨es6æ¨¡å—åŒ–è§„èŒƒï¼Œå¼€å¯productionæ¨¡å¼ï¼Œwebpackä¼šè‡ªåŠ¨å¯ç”¨tree-shaking</p>
<p><code>webpack.config.js</code> ä¸­æ·»åŠ <code>sideEffects:false</code>è¡¨ç¤ºæ‰€æœ‰çš„ä»£ç éƒ½æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¦‚æœæ ‡è®°ä¸º<code>false</code>, å…¨å±€å¼•å…¥çš„æ–‡ä»¶(polyfile),æˆ–æ²¡æœ‰é€šè¿‡æ¨¡å—åŒ–ä½¿ç”¨çš„css,éƒ½ä¼šè¢«åˆ é™¤</p>
<p>å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„æ¥æ ‡è®°ä¸éœ€è¦å¤„ç†çš„èµ„æº <code>sideEffects:[&#39;*.css&#39;]</code></p>
<h4 id="ä»£ç åˆ†å‰²-code-split"><a href="#ä»£ç åˆ†å‰²-code-split" class="headerlink" title="ä»£ç åˆ†å‰² code-split"></a>ä»£ç åˆ†å‰² code-split</h4><p><strong>ç”Ÿæˆchunkçš„å‡ ç§æ–¹å¼</strong></p>
<ul>
<li>å¤šé¡µé¢entryç”Ÿæˆå¤šä¸ªchunk</li>
<li>å¼‚æ­¥ç»„ä»¶ç”Ÿæˆchunk</li>
<li>code split</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†node-modules ä¸­ä»£ç å•ç‹¬æ‰“åŒ…æˆ</span></span><br><span class="line"><span class="comment">// åˆ†æå¤šå…¥å£æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰å…¬å…±çš„ä¾èµ–ï¼Œä¼šæŠŠä¾èµ–å•ç‹¬æ‰“åŒ…</span></span><br><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">    <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="æ‡’åŠ è½½-é¢„åŠ è½½"><a href="#æ‡’åŠ è½½-é¢„åŠ è½½" class="headerlink" title="æ‡’åŠ è½½ é¢„åŠ è½½"></a>æ‡’åŠ è½½ é¢„åŠ è½½</h4><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/code-splitting/#dynamic-imports">dynamic-imports</a></p>
<p><code>babel-loader</code>ä¼šè‡ªåŠ¨å¤„ç† <code>dynamic-imports</code>è¯­æ³•ï¼Œ å¦‚æœ<code>eslint</code>æç¤ºé”™è¯¯ï¼Œåœ¨<code>.eslintrc</code>ä¸­æ·»åŠ <code>&quot;parser&quot;: &quot;babel-eslint&quot;</code></p>
<h4 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h4><p>work-box -&gt; <a target="_blank" rel="noopener" href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin">workbox-webpack-plugin</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D workbox-webpack-plugin</span><br></pre></td></tr></table></figure>

<p><code>webpack.config.js</code> ä¸­æ·»åŠ æ’ä»¶å’Œ<a target="_blank" rel="noopener" href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-webpack-plugin.GenerateSW#GenerateSW">é…ç½®é¡¹</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">GenerateSW</span>(&#123;</span><br><span class="line">      <span class="comment">// å¸®åŠ©serviceWorkå¿«é€Ÿå¯åŠ¨ï¼Œ</span></span><br><span class="line">      <span class="comment">// åˆ é™¤æ—§çš„serverwork</span></span><br><span class="line">      <span class="attr">clientsClaim</span>:<span class="literal">true</span>,</span><br><span class="line">      <span class="attr">skipWaiting</span>:<span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨å†Œservicework</p>
<p>åœ¨å…¥å£æ–‡ä»¶<code>index.js</code>ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;./service-worker.js&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ³¨å†ŒæˆåŠŸ&#x27;</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ³¨å†Œå¤±è´¥&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ<code>eslint</code>ä¸æ”¯æŒå…¨å±€å˜é‡,åœ¨<code>.eslinrc</code>æ·»åŠ <code>&#123;env:browser: true,&#125;</code></p>
<h4 id="å¤šè¿›ç¨‹æ‰“åŒ…"><a href="#å¤šè¿›ç¨‹æ‰“åŒ…" class="headerlink" title="å¤šè¿›ç¨‹æ‰“åŒ…"></a>å¤šè¿›ç¨‹æ‰“åŒ…</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/thread-loader">thread-loader</a></p>
<p>è¿›ç¨‹çš„å¯ç”¨ä¼šå ç”¨æ—¶é—´ï¼ˆå¤§çº¦600msï¼‰ï¼Œåªæœ‰å¤æ‚çš„ä»»åŠ¡å¤„ç†çš„æ—¶å€™æ‰ä¼šæœ‰æ˜æ˜¾çš„æ•ˆæœ</p>
<h4 id="externals-å¿½ç•¥æŸäº›èµ„æº"><a href="#externals-å¿½ç•¥æŸäº›èµ„æº" class="headerlink" title="externals å¿½ç•¥æŸäº›èµ„æº"></a>externals å¿½ç•¥æŸäº›èµ„æº</h4><p>åœ¨<code>webpack.config.js</code>ä¸­æ·»åŠ <a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/externals/#root"><code>externals</code></a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">externals</span>: &#123;</span><br><span class="line">    <span class="attr">jquery</span>: <span class="string">&#x27;jQuery&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å’Œdllçš„åŒºåˆ«æ˜¯ï¼Œexternalså¹¶æ²¡æœ‰æ‰“åŒ…æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡cdnçš„æ–¹å¼å¼•å…¥è¿›æ¥ï¼Œdllåªæ˜¯æŠŠæŒ‡å®šçš„åŒ…å•ç‹¬æ‰“åŒ…ï¼Œå¹¶é€šè¿‡æ’ä»¶æŠŠå•ç‹¬æ‰“åŒ…çš„æ–‡ä»¶é‡æ–°å¼•å…¥</p>
<h4 id="dll"><a href="#dll" class="headerlink" title="dll"></a>dll</h4><p>å¯¹ç¬¬ä¸‰æ–¹çš„åº“ï¼Œè¿›è¡Œå•ç‹¬æ‰“åŒ… webpack5ä¸é€‚ç”¨</p>
<p>é€šè¿‡ä¸¤ä»½é…ç½®ï¼Œå¯ä»¥é¿å…æ¯æ¬¡å¯¹ç¬¬ä¸‰æ–¹çš„åº“é‡æ–°æ‰“åŒ…</p>
<p>webpack.dll.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>:&#123;</span><br><span class="line">    <span class="attr">lodash</span>:[<span class="string">&#x27;lodash&#x27;</span>],</span><br><span class="line">    <span class="attr">jquery</span>:[<span class="string">&#x27;jquery&#x27;</span>],</span><br><span class="line">    <span class="attr">moment</span>:[<span class="string">&quot;moment&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ–‡ä»¶çš„åç§°</span></span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;[name]_[contenthash:8].js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dll&#x27;</span>),</span><br><span class="line">    <span class="comment">// å•ç‹¬æ‰“åŒ…çš„åº“å¯¹å¤–æš´éœ²çš„åç§°</span></span><br><span class="line">    <span class="attr">library</span>: <span class="string">&quot;[name]_[fullhash]&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DllPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">context</span>: __dirname,</span><br><span class="line">      <span class="comment">// æ˜ å°„å•ç‹¬æ‰“åŒ…çš„åº“çš„åç§°</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;[name]_[fullhash]&#x27;</span>,</span><br><span class="line">      <span class="comment">// ç”Ÿæˆçš„manifestæ–‡ä»¶</span></span><br><span class="line">      <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dll/[name]_manifest.json&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>:<span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<p>ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/add-asset-html-webpack-plugin">add-asset-html-webpack-plugin</a>æŠŠå•ç‹¬æ‰“åŒ…çš„èµ„æºå¼•å…¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">export</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DllReferencePlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å­˜åœ¨äºmanifestæ–‡ä»¶ä¸­çš„åŒ…ï¼Œä¸ä¼šè¢«æ‰“åŒ…</span></span><br><span class="line">			<span class="attr">manifest</span>: <span class="built_in">require</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dll/moment_manifest.json&#x27;</span>))</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DllReferencePlugin</span>(&#123;</span><br><span class="line">			<span class="attr">manifest</span>: <span class="built_in">require</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dll/lodash_manifest.json&#x27;</span>))</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DllReferencePlugin</span>(&#123;</span><br><span class="line">			<span class="attr">manifest</span>: <span class="built_in">require</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dll/jquery_manifest.json&#x27;</span>))</span><br><span class="line">		&#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">AddAssetHtmlPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filepath</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dll/*.js&#x27;</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="optimization"><a href="#optimization" class="headerlink" title="optimization"></a>optimization</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// https://webpack.docschina.org/plugins/terser-webpack-plugin/</span></span><br><span class="line">    <span class="attr">minimizer</span>: [<span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">cache</span>:<span class="literal">true</span>,<span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="attr">parallel</span>:<span class="literal">true</span>,<span class="comment">//å¤šè¿›ç¨‹æ‰“åŒ…</span></span><br><span class="line">      <span class="attr">sourceMap</span>:<span class="literal">true</span> <span class="comment">//å¯ç”¨source-map</span></span><br><span class="line">    &#125;)],</span><br><span class="line">   <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="comment">// asyncè¡¨ç¤ºåªä»å¼‚æ­¥åŠ è½½å¾—æ¨¡å—ï¼ˆåŠ¨æ€åŠ è½½import()ï¼‰é‡Œé¢è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">      <span class="comment">// initialè¡¨ç¤ºåªä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">      <span class="comment">// allè¡¨ç¤ºä»¥ä¸Šä¸¤è€…éƒ½åŒ…æ‹¬</span></span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;async&#x27;</span>, <span class="comment">//all </span></span><br><span class="line">      <span class="attr">minSize</span>: <span class="number">1024</span> * <span class="number">30</span> , <span class="comment">//åˆ†å‰²chunkçš„æœ€å°å¤§å°ï¼Œå¤§äº30kbæ‰ä¼šè¢«æå–</span></span><br><span class="line">      <span class="attr">minRemainingSize</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">maxSize</span>: <span class="number">0</span>,<span class="comment">// æ²¡æœ‰æœ€å¤§é™åˆ¶</span></span><br><span class="line">      <span class="attr">minChunks</span>: <span class="number">1</span>, <span class="comment">// è‡³å°‘è¢«å¼•ç”¨ä¸€æ¬¡</span></span><br><span class="line">      <span class="comment">// æŒ‰éœ€åŠ è½½çš„æ—¶å€™å¹¶è¡ŒåŠ è½½æ–‡ä»¶çš„æœ€å¤§ä¸ªæ•°</span></span><br><span class="line">      <span class="comment">// å¯ä»¥ç†è§£ä¸ºé’ˆå¯¹ä¸€ä¸ªæ¨¡å—æ‹†åˆ†åçš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬æ¨¡å—æœ¬èº«</span></span><br><span class="line">      <span class="comment">// import()æ–‡ä»¶æœ¬èº«ç®—ä¸€ä¸ªè¯·æ±‚</span></span><br><span class="line">      <span class="comment">// å¹¶ä¸ç®—jsä»¥å¤–çš„å…¬å…±èµ„æºè¯·æ±‚æ¯”å¦‚css</span></span><br><span class="line">      <span class="comment">// å¦‚æœåŒæ—¶æœ‰ä¸¤ä¸ªæ¨¡å—æ»¡è¶³cacheGroupçš„è§„åˆ™è¦è¿›è¡Œæ‹†åˆ†ï¼Œä½†æ˜¯maxInitialRequestsçš„å€¼åªèƒ½å…è®¸å†æ‹†åˆ†ä¸€ä¸ªæ¨¡å—ï¼Œé‚£å°ºå¯¸æ›´å¤§çš„æ¨¡å—ä¼šè¢«æ‹†åˆ†å‡ºæ¥</span></span><br><span class="line">      <span class="comment">// ä¸€ä¸ªæŒ‰éœ€åŠ è½½çš„åŒ…æœ€ç»ˆè¢«æ‹†åˆ†æˆ n ä¸ªåŒ…ï¼ŒmaxAsyncRequests å°±æ˜¯ç”¨æ¥é™åˆ¶ n çš„æœ€å¤§å€¼ã€‚</span></span><br><span class="line">      <span class="attr">maxAsyncRequests</span>: <span class="number">30</span>, </span><br><span class="line">      <span class="attr">maxInitialRequests</span>: <span class="number">30</span>, <span class="comment">//å…¥å£jsæ–‡ä»¶æœ€å¤§è¯·æ±‚æ•°é‡</span></span><br><span class="line">      <span class="attr">enforceSizeThreshold</span>: <span class="number">50000</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="literal">true</span>, <span class="comment">// å¯ä»¥ä½¿ç”¨å‘½åè§„åˆ™</span></span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="comment">// node_moduleä¸­çš„åŒ…ä¼šè¢«å¼•å…¥åˆ°defaultVendorsåŒ…ä¸­</span></span><br><span class="line">        <span class="attr">defaultVendors</span>: &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">10</span>,</span><br><span class="line">          <span class="comment">// å¦‚æœå½“å‰æ‰“åŒ…çš„æ¨¡å—å’Œä¹‹å‰çš„æ˜¯åŒä¸€ä¸ªå°±ä¼šå¤ç”¨ï¼Œè€Œä¸æ˜¯é‡å¤æ‰“åŒ…</span></span><br><span class="line">          <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">default</span>: &#123;</span><br><span class="line">          <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">          <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// å°†å½“å‰æ¨¡å—ä¸­è®°å½•çš„å…¶ä»–æ¨¡å—çš„hashå•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// å› ä¸ºå¦‚æœmain.js å¼•ç”¨ a.js,main.jsä¸­ä¼šä¿å­˜a.jsæ‰“åŒ…æ—¶ç”Ÿæˆçš„cotenthash</span></span><br><span class="line">      <span class="comment">// å¦‚æœa.jså‘ç”Ÿæ”¹å˜åˆ™contenthashå‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆmain.jsçš„contenthashä¹Ÿä¼šæ”¹å˜</span></span><br><span class="line">      <span class="comment">// ä»£ç åˆ†å‰²çš„æ—¶å€™ä¸€å®šè¦åŠ </span></span><br><span class="line">      <span class="attr">runtimeChunk</span>:<span class="function">()=&gt;</span> &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="function"><span class="params">entrypoint</span>=&gt;</span><span class="string">`runtime-<span class="subst">$&#123;entrypoint.name&#125;</span>`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-algorithm/leetcode/å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/0d16fafcd38e/"
    >LeetCode å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/0d16fafcd38e/" class="article-date">
  <time datetime="2021-01-20T07:35:11.000Z" itemprop="datePublished">2021-01-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> / <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/">å…³è”é¢˜ç›®</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node/description/">å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</a></p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>ç›¸åŒå±‚çº§çš„æ“ä½œå¯ä»¥æƒ³åˆ°çš„æ˜¯å±‚åºé,ä½†æ˜¯é¢˜ç›®ä¸­æœ‰ä¸€ä¸ªé—®é¢˜æ²¡æœ‰è¯´æ¸…æ¥š,ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹è¡¨ç¤ºç´§é‚»çš„å³ä¾§èŠ‚ç‚¹,ç©ºèŠ‚ç‚¹ä¹Ÿç®—æ˜¯ä¸€ä¸ªèŠ‚ç‚¹,æ¢å¥è¯è¯´ç©ºèŠ‚ç‚¹ä¸èƒ½è·³è¿‡</p>
<p>åœ¨æ€è€ƒä¸€ä¸‹å…¶ä¸­çš„ç»†èŠ‚,éœ€è¦æ¸…æ¥šä¸€å±‚æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½å‡†ç¡®éå†åˆ°ä¸€å±‚çš„æœ«å°¾, é“¾æ¥çš„æ—¶å€™ç©ºçš„èŠ‚ç‚¹ä¸èƒ½è·³è¿‡ï¼Œå› ä¸ºè¿™ä¹Ÿæ˜¯åˆæ³•çš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">connect</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> queue = [root];</span><br><span class="line">  <span class="keyword">while</span> (queue.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="comment">// è®°å½•æ¯ä¸€å±‚çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">let</span> len = queue.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (len--) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>();</span><br><span class="line">      <span class="keyword">if</span> (len &amp;&amp; node) node.<span class="property">next</span> = queue[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸éœ€è¦åˆ¤æ–­ç©ºèŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (node) queue.<span class="title function_">push</span>(node.<span class="property">left</span>, node.<span class="property">right</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé—®é¢˜ä¹Ÿå¯ä»¥ç”¨,é€’å½’æ¥è§£å†³,å› ä¸ºå®ƒå¯ä»¥æŠ½è±¡æˆæ›´å°çš„å­é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯é“¾æ¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦çŸ¥é“çš„æ˜¯å“ªäº›èŠ‚ç‚¹æ˜¯éœ€è¦é“¾æ¥çš„ã€‚</p>
<p>å¦‚æœç›²ç›®çš„å¥—ç”¨é€’å½’æ¡†æ¶å°±ä¼šå›°æƒ‘ï¼Œåœ¨å¦å¤–ä¸€ä¸ªå­æ ‘çš„èŠ‚ç‚¹ï¼Œæ€ä¹ˆèƒ½è·å–åˆ°å‘¢ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">connect</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root.<span class="property">left</span>) root.<span class="property">next</span> = root.<span class="property">right</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ— æ³•è·å–å¦å¤–å­æ ‘çš„èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥éœ€è¦æŒ‡æ˜ï¼Œé‚£ä¸¤ä¸ªèŠ‚ç‚¹éœ€è¦é“¾æ¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå…ˆåºéå†çš„æ¨¡å‹ï¼Œä½†æ˜¯å­é—®é¢˜éœ€è¦ä¼ é€’æ›´å¤šçš„ä¿¡æ¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">left, right</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// é“¾æ¥ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">if</span> (left) left.<span class="property">next</span> = right;</span><br><span class="line">  <span class="keyword">if</span> (left) <span class="title function_">dig</span>(left.<span class="property">left</span>, left.<span class="property">right</span>);</span><br><span class="line">  <span class="keyword">if</span> (right) <span class="title function_">dig</span>(right.<span class="property">left</span>, right.<span class="property">right</span>);</span><br><span class="line">  <span class="comment">// ä¸åŒå­æ ‘ä¸­éœ€è¦è¿æ¥çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">if</span> (left &amp;&amp; right) <span class="title function_">dig</span>(left.<span class="property">right</span>, right.<span class="property">left</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">connect</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">  <span class="title function_">dig</span>(root.<span class="property">left</span>, root.<span class="property">right</span>);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/" rel="tag">å…³è”é¢˜ç›®</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-algorithm/leetcode/äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/13ae1e52470a/"
    >LeetCode äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/13ae1e52470a/" class="article-date">
  <time datetime="2021-01-20T02:20:22.000Z" itemprop="datePublished">2021-01-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> / <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/">å…³è”é¢˜ç›®</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/flatten-binary-tree-to-linked-list/description/">äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</a></p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>å¯ä»¥å¾ˆè‡ªç„¶æƒ³åˆ°çš„æ˜¯éœ€è¦ä¸€ä¸ªé€’å½’ï¼Œå› ä¸ºä»–éœ€è¦å…ˆåºéå†<br>æˆ‘ä»¬ä¼šç›´æ¥è¿›å…¥åˆ°æ¯ä¸ªå·¦è¾¹å­æ ‘çš„å·¦èŠ‚ç‚¹ã€‚<br>ä½†æ˜¯è¿™ç»è¿‡çš„å³å­æ ‘æ˜¯æš‚æ—¶ç”¨ä¸åˆ°çš„ï¼Œæ‰€ä»¥éœ€è¦æƒ³åŠæ³•æŠŠä»–ä»¬å­˜èµ·æ¥ï¼Œåœ¨ç¨åä½¿ç”¨</p>
<!-- It's natural to think that a recursive approach is needed, as it requires a pre-order traversal.
We will directly move into the left node of each left subtree.
However, the right subtrees encountered along the way are temporarily unused,
so we need a way to store them for later use. -->

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">flatten</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stack = [];</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> right = root.<span class="property">right</span>;</span><br><span class="line">    root.<span class="property">right</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// æš‚å­˜å³èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (right !== <span class="literal">null</span>) stack.<span class="title function_">push</span>(right);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å·¦èŠ‚ç‚¹æ”¾åˆ°æœ‰èŠ‚ç‚¹ä¸Š</span></span><br><span class="line">    <span class="comment">// å¹¶å…ˆåºéå†ç»§ç»­é€’å½’å‘ä¸‹</span></span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">      root.<span class="property">right</span> = root.<span class="property">left</span>;</span><br><span class="line">      root.<span class="property">left</span> = <span class="literal">null</span>;</span><br><span class="line">      <span class="title function_">dig</span>(root.<span class="property">right</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå·²ç»æ²¡æœ‰ä¸‹é¢çš„èŠ‚ç‚¹</span></span><br><span class="line">      <span class="comment">// ä»é˜Ÿåˆ—ä¸­å–å‡ºæœ€åçš„å³å­æ ‘éå†</span></span><br><span class="line">      <span class="keyword">const</span> next = stack.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">if</span> (next == <span class="literal">undefined</span>) <span class="keyword">return</span>;</span><br><span class="line">      root.<span class="property">right</span> = next;</span><br><span class="line">      <span class="title function_">dig</span>(next);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">dig</span>(root);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥æ€è€ƒç”¨ O(1) çš„ç©ºé—´å¤æ‚åº¦ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ—¢ç„¶ä¸èƒ½ç”¨é¢å¤–çš„å‚¨å­˜ç©ºé—´ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å°†ç”¨åˆ°çš„ä¿¡æ¯æ”¾åœ¨æ ‘çš„èŠ‚ç‚¹ä¸Šæ“ä½œã€‚</p>
<p>é¢˜ç›®è¦æ±‚æ˜¯ä»¥å…ˆåºéå†çš„é¡ºåºï¼Œå¹¶ä¸”é€šç”¨å³æŒ‡é’ˆç›¸è¿ï¼Œå¯¹äºå³æŒ‡é’ˆç›¸è¿è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥å¼±åŒ–å®ƒï¼Œå› ä¸ºè¿™å¯ä»¥é€šè¿‡èŠ‚ç‚¹äº¤æ¢å¾ˆå®¹æ˜“çš„å®Œæˆã€‚</p>
<p>è€Œä»¥å…ˆåºéå†é¡ºåºè¿”å›ï¼Œå¹¶ä¸æ„å‘³ç€ä¸€å®šè¦å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œåªè¦å¤„ç†ä¹‹åçš„é“¾è¡¨çš„é¡ºåºæ˜¯å…ˆåºéå†å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥å¯¹äºä¸€ä¸ªåªæœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„å­æ ‘æ¥è¯´ï¼Œå°†å³èŠ‚ç‚¹æ¥åœ¨å·¦èŠ‚ç‚¹çš„åé¢å°±æ˜¯å…ˆåºéå†ã€‚</p>
<p>é‚£è¦å¦‚ä½•ä¿è¯åœ¨è®¿é—®æ ¹èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå·¦å³å­æ ‘éƒ½æ˜¯ä¸€ä¸ªå¤„ç†å¥½çš„é“¾è¡¨ï¼Œæˆ‘ä»¬ä¼šæƒ³åˆ°ååºéå†ï¼Œå› ä¸ºåœ¨è®¿é—®æŸä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä»–çš„å·¦å³å­æ ‘éƒ½å·²ç»åœ¨ååºéå†çš„ä»£ç ä½ç½®å¤„ç†æˆäº†é“¾è¡¨ï¼Œå¯ä»¥ç›´æ¥æ‹¼æ¥ã€‚</p>
<p>æ‰€ä»¥å¯ä»¥å†™å‡ºä¸‹é¢çš„æ¡†æ¶</p>
<!-- We can also consider solving this problem with O(1) space complexity/kÉ™mËˆpleksÉ™ti/. Since(é€šå¸¸ç”¨äºæä¾›ä¸Šä¸‹æ–‡æˆ–ç†ç”±è€Œä¸å¼ºè°ƒåŸå› ã€‚) we cannot use extra/ËˆekstrÉ™/ storage space, we might think about leveraging(å……åˆ†åˆ©ç”¨) the tree nodes themselves to store and operate on the required information.

The problem requires linking nodes in pre-order traversal order using the right pointer. However, we can simplify this requirement for right-pointer linking, as it can be easily achieved through node rearrangement later.

Returning the nodes in pre-order traversal order doesn't necessarily mean visiting the root node first. As long as the final linked list follows the pre-order traversal sequence, it's valid. For example, in a subtree with only three nodes, connecting the right child to the end of the left child's list achieves the pre-order traversal order.

So, how can we ensure that, when visiting a root node, its left and right subtrees are already processed into linked lists? Post-order traversal comes to mind, as it ensures that when processing a node, its left and right subtrees have already been transformed into linked lists, making it easy to concatenate them.

Based on this, we can construct the following framework: -->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="title function_">dig</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="title function_">dig</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å·¦å³èŠ‚ç‚¹</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">flatten</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">  <span class="title function_">dig</span>(root);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ€è€ƒä¸€äº›å…·ä½“çš„ç»†èŠ‚ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œå› ä¸ºå®ƒåªæœ‰ä¸€ä¸ªå³èŠ‚ç‚¹çš„è¯ä¸éœ€è¦å¤„ç†ï¼Œæˆ–è€…å³èŠ‚ç‚¹å·²ç»å¤„ç†æˆä¸€ä¸ªé“¾è¡¨ã€‚</p>
<p>è€Œå½“ä¸€ä¸ªå·¦èŠ‚ç‚¹å­˜åœ¨çš„æ—¶å€™ï¼Œéœ€è¦èƒ½è·å–åˆ°å·¦èŠ‚ç‚¹è¿™ä¸ªé“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ªï¼Œæ‰èƒ½å’Œå³èŠ‚ç‚¹ç›¸è¿ï¼Œæœ€åè¿˜éœ€è¦äº¤æ¢å·¦å³èŠ‚ç‚¹ã€‚</p>
<!-- When a node does not have a left child, we can simply skip it because if it only has a right child, there is no need for processing, or the right child has already been processed into a linked list.

However, when a left child exists, we need to find the last node in the linked list formed by the left child to connect it with the right child. Finally, we need to swap the left and right children. -->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="title function_">dig</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="title function_">dig</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> last = root.<span class="property">left</span>;</span><br><span class="line">  <span class="comment">// å·¦èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (last === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">while</span> (last.<span class="property">right</span>) &#123;</span><br><span class="line">    last = last.<span class="property">right</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// äº¤æ¢å·¦å³å­æ ‘</span></span><br><span class="line">  last.<span class="property">right</span> = root.<span class="property">right</span>;</span><br><span class="line">  root.<span class="property">right</span> = root.<span class="property">left</span>;</span><br><span class="line">  root.<span class="property">left</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">flatten</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">  <span class="title function_">dig</span>(root);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/" rel="tag">å…³è”é¢˜ç›®</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-algorithm/leetcode/äºŒå‰æ ‘ç›´å¾„"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/6a338e4e2cab/"
    >LeetCode äºŒå‰æ ‘ç›´å¾„</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/6a338e4e2cab/" class="article-date">
  <time datetime="2021-01-19T15:31:22.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> / <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/">å…³è”é¢˜ç›®</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/diameter-of-binary-tree/">äºŒå‰æ ‘ç›´å¾„</a></p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>å¯ä»¥è§‚å¯Ÿåˆ°ä¸¤ä¸ªç°è±¡</p>
<ul>
<li>ç›´å¾„å¯èƒ½å¹¶ä¸ä¼šç»è¿‡æ ¹èŠ‚ç‚¹</li>
<li>æ‰€è°“çš„ç›´å¾„å°±æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘æ·±åº¦åŠ å³å­æ ‘æ·±åº¦æœ€é•¿çš„ä¸€æ¡</li>
</ul>
<p>é‚£æ—¢ç„¶æ˜¯è·å–æœ€é•¿çš„å­æ ‘ï¼Œæ˜¯ä¸èƒ½èƒ½å¥—ç”¨ä¸€ä¸ªä¹‹å‰çš„æ±‚ <a href="/posts/8e3fe34f62a9/">äºŒå‰æ ‘æœ€å¤§æ·±åº¦</a> çš„æ–¹æ³•, æ€è€ƒä»¥ä¸‹å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ¡†æ¶ä¹ˆ</p>
<p>è¿™å¯èƒ½è¡Œä¸é€šï¼Œå› ä¸ºæå‡ºäº† maxDeep æ–¹æ³•å¯¼è‡´è°ƒç”¨æ—¶ï¼Œåªèƒ½ä½œç”¨åœ¨æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ã€‚æ›¿ä»–èŠ‚ç‚¹æ— æ³•è°ƒç”¨è¿™ä¸ªæ¨¡å¼é€’å½’ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">maxDeep</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title function_">maxDeep</span>(root.<span class="property">left</span>), <span class="title function_">maxDeep</span>(root.<span class="property">right</span>)) + <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> diameterOfBinaryTree = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶è¿™æ ·å°±æ”¾åˆ°å†…éƒ¨å»åš, ä½†æ˜¯è¿™ç§æ¡†æ¶é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œè¿”å›å€¼åªæœ‰ä¸€ä¸ªï¼Œå¸Œæœ›å¯ä»¥çŸ¥é“å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ï¼Œåˆè¦ä¿ç•™ç€å·²ç»éå†è¿‡çš„å­æ ‘çš„æœ€å¤§ç›´å¾„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> diameterOfBinaryTree = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> l = <span class="title function_">diameterOfBinaryTree</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="keyword">let</span> r = <span class="title function_">diameterOfBinaryTree</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// return Math.max(l + r, l, r) + 1;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é‚£å°±å†å¼•å…¥ä¸€ä¸ªé¢å¤–çš„å˜é‡å»ä¿å­˜ï¼Œæœ€å¤§ç›´å¾„ï¼Œè®©é€’å½’å¯ä»¥ä¸“æ³¨ä¸å­æ ‘çš„æœ€å¤§æ·±åº¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> diameterOfBinaryTree = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="title function_">dig</span>(root.<span class="property">left</span>);</span><br><span class="line">    <span class="keyword">let</span> right = <span class="title function_">dig</span>(root.<span class="property">right</span>);</span><br><span class="line">    max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, left + right);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(left, right) + <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">dig</span>(root);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å†æ¥çœ‹ä¸€ä¸‹ï¼Œå…¶å®ç”¨å‰åºéå†ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯éœ€è¦æ¯ç»å†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è¦è·å–ä»¥ä¸‹å½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºå‰åºéå†åªèƒ½è·å–å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œè€Œååºéå†åˆ™å¯ä»¥æºå¸¦ä¸Šä¸€ä¸ªèŠ‚ç‚¹è¿”å›çš„ä¿¡æ¯ã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/" rel="tag">å…³è”é¢˜ç›®</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-javascript/Ramda_Typeæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/4f5e1b8629c3/"
    >Ramda Type æ–¹æ³•æºç è§£æ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/4f5e1b8629c3/" class="article-date">
  <time datetime="2021-01-19T08:01:47.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>toString æ–¹æ³•æ˜¯Objectå†…éƒ¨å®ç°çš„åŸå‹æ–¹æ³•ï¼Œå®ç°æ–¹å¼ä¸­è§„å®šäº†æŸç§ç±»å‹çš„è¿”å›å€¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type = <span class="title function_">_curry1</span>(<span class="keyword">function</span> <span class="title function_">type</span>(<span class="params">val</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> val === <span class="literal">null</span></span><br><span class="line">    ? <span class="string">&#x27;Null&#x27;</span></span><br><span class="line">    : val === <span class="literal">undefined</span></span><br><span class="line">      ? <span class="string">&#x27;Undefined&#x27;</span></span><br><span class="line">      : <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(val).<span class="title function_">slice</span>(<span class="number">8</span>, -<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> type;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-javascript/Ramda_Listæ–¹æ³•"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/f7e795e13d0b/"
    >Ramda List æ–¹æ³•æºç åˆ†æ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/f7e795e13d0b/" class="article-date">
  <time datetime="2021-01-19T04:57:53.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="adjust"><a href="#adjust" class="headerlink" title="adjust"></a><a target="_blank" rel="noopener" href="https://ramda.cn/docs/#adjust">adjust</a></h4><p>åˆ¤æ–­ç´¢å¼•çš„åˆæ³•æ€§</p>
<p>å®šä¹‰å¼€å§‹èŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯æŠ½è±¡äº†è®¡ç®—çœŸå®ç´¢å¼•çš„è®¡ç®—</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> adjust = <span class="title function_">_curry3</span>(<span class="keyword">function</span> <span class="title function_">adjust</span>(<span class="params">idx, fn, list</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (idx &gt;= list.<span class="property">length</span> || idx &lt; -list.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> start = idx &lt; <span class="number">0</span> ? list.<span class="property">length</span> : <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> _idx = start + idx;</span><br><span class="line">  <span class="keyword">var</span> _list = <span class="title function_">_concat</span>(list);</span><br><span class="line">  _list[_idx] = <span class="title function_">fn</span>(list[_idx]);</span><br><span class="line">  <span class="keyword">return</span> _list;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h4 id="all"><a href="#all" class="headerlink" title="all"></a><a target="_blank" rel="noopener" href="https://ramda.cn/docs/#all">all</a></h4><p><a href="/posts/2b6baf0c/#dispatchable">_dispatchable</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> all = <span class="title function_">_curry2</span>(<span class="title function_">_dispatchable</span>([<span class="string">&#x27;all&#x27;</span>], _xall, <span class="keyword">function</span> <span class="title function_">all</span>(<span class="params">fn, list</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (idx &lt; list.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">fn</span>(list[idx])) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    idx += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;));</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> all;</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ramda/" rel="tag">Ramda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">å‡½æ•°å¼ç¼–ç¨‹</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-algorithm/leetcode/äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/8e3fe34f62a9/"
    >LeetCode äºŒå‰æ ‘æœ€å°/å¤§æ·±åº¦</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/8e3fe34f62a9/" class="article-date">
  <time datetime="2021-01-19T04:31:12.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> / <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/">å…³è”é¢˜ç›®</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/description/">äºŒå‰æ ‘æœ€å°æ·±åº¦</a></p>
<p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">äºŒå‰æ ‘æœ€å¤§æ·±åº¦</a></p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>å®¹æ˜“æƒ³åˆ°çš„æ˜¯é€šè¿‡ DFS éå†æºå¸¦æ·±åº¦ä¿¡æ¯ï¼Œè®°å½•æ·±åº¦æœ€å¤§å€¼æˆ–æœ€å°å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minDepth = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®°å½•æœ€å°æ·±åº¦ï¼ˆæ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘çš„å¶å­èŠ‚ç‚¹çš„è·ç¦»ï¼‰</span></span><br><span class="line">  <span class="keyword">let</span> minDepthValue = <span class="title class_">Infinity</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®°å½•å½“å‰éå†åˆ°çš„èŠ‚ç‚¹æ·±åº¦</span></span><br><span class="line">  <span class="keyword">let</span> currentDepth = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> traverse = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰åºä½ç½®è¿›å…¥èŠ‚ç‚¹æ—¶å¢åŠ å½“å‰æ·±åº¦</span></span><br><span class="line">    currentDepth++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ›´æ–°æœ€å°æ·±åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">left</span> === <span class="literal">null</span> &amp;&amp; root.<span class="property">right</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">      minDepthValue = <span class="title class_">Math</span>.<span class="title function_">min</span>(minDepthValue, currentDepth);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">traverse</span>(root.<span class="property">left</span>);</span><br><span class="line">    <span class="title function_">traverse</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ååºä½ç½®ç¦»å¼€èŠ‚ç‚¹æ—¶å‡å°‘å½“å‰æ·±åº¦</span></span><br><span class="line">    currentDepth--;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä»æ ¹èŠ‚ç‚¹å¼€å§‹ DFS éå†</span></span><br><span class="line">  <span class="title function_">traverse</span>(root);</span><br><span class="line">  <span class="keyword">return</span> minDepthValue;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥æƒ³åˆ°ä¸ºäº†é¿å…å…¨å±€å®šä¹‰æ·±åº¦å˜é‡ï¼Œå¯ä»¥æŠŠæ·±åº¦æ”¾åˆ°é€’å½’çš„å‚æ•°ä¸­ï¼Œä¸‹é¢æ˜¯æœ€å¤§æ·±åº¦çš„è§£æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root, length</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> length;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title function_">dig</span>(root.<span class="property">left</span>, length + <span class="number">1</span>), <span class="title function_">dig</span>(root.<span class="property">right</span>, length + <span class="number">1</span>));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”±äºé€€å‡ºæ¡ä»¶æ˜¯åœ¨å¶å­èŠ‚ç‚¹çš„å·¦æˆ–å³çš„nullèŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// å› æ­¤æ·±åº¦ä¼šè¢«å¤šåŠ 1, æ‰€ä»¥å¼€å§‹è®¡æ•°ä»0å¼€å§‹ï¼Œå¯ä»¥æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">dig</span>(root, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å½“ç”¨è¿™ç§æ€è·¯è§£å†³æœ€å°æ·±åº¦æ—¶ï¼Œå°±ä¼šé‡åˆ°é—®é¢˜ã€‚</p>
<p>å› ä¸ºæ˜¯æ±‚æœ€å°æ·±åº¦ï¼Œå› æ­¤é€’å½’åˆ°å¶å­èŠ‚ç‚¹æ‹¿åˆ°çš„é«˜åº¦ï¼Œæ˜¯ä¸€ä¸ªæ— æ•ˆå€¼ï¼Œå®ƒå¯èƒ½è¢«ä¸€ä¸ªæ›´å°çš„å€¼å–ä»£ã€‚</p>
<p>ä½†æ˜¯å­æ ‘å¦‚æœä¸º null,ä¸èƒ½å‚ä¸è®¡ç®—ï¼Œ<strong>å› æ­¤ä¸‹é¢çš„é€»è¾‘å½“éå†åˆ°å¶å­èŠ‚ç‚¹æ—¶ï¼Œä»ç„¶é€’å½’è¿›å…¥ç©ºèŠ‚ç‚¹ï¼Œå¯¼è‡´ç©ºçš„å­æ ‘è¢«ç®—ä½œ 1 çš„é•¿åº¦</strong> è¿”å›é”™è¯¯çš„ç»“æœã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå¦‚æœåªæœ‰å·¦å­æ ‘ï¼Œæˆ–è€…å³å­æ ‘ï¼Œæ˜¯ä¸ä¼šè¿›å…¥é€€å‡ºé€»è¾‘çš„ï¼Œè¿™ä¼šå¯¼è‡´é€’å½’æ— æ³•è¢«æ­£ç¡®çš„å¤„ç†ï¼Œå½“åªæœ‰å…¶ä¸­ä¸€ä¸ªå­æ ‘çš„æ—¶å€™ï¼Œè¦æ­£ç¡®å¤„ç†å­æ ‘çš„è¿”å›å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dig</span> = (<span class="params">root, length</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// é¿å…é€’å½’è¿›å…¥ç©ºèŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// + if(!node.left &amp;&amp; !node.right) return deep;</span></span><br><span class="line">  <span class="comment">// - if (root == null) return length;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“åªæœ‰ä¸€ä¸ªå­æ ‘çš„æ—¶å€™ï¼Œç»™ç©ºçš„å­æ ‘ä¸€ä¸ªé»˜è®¤å€¼ Infinity</span></span><br><span class="line">  <span class="comment">// å› ä¸ºæœ‰å€¼çš„å­æ ‘ï¼Œä¸€å®šä¼šè¿›å…¥æ¨å‡ºé€»è¾‘è¿”å›ä¸€ä¸ªå½“å‰æ·±åº¦å€¼</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// + let left = Infinity,right=Infinity;</span></span><br><span class="line">  <span class="comment">// + if(node.left)  left =  dfs(node.left, deep + 1);</span></span><br><span class="line">  <span class="comment">// + if(node.right) right = dfs(node.right, deep + 1);</span></span><br><span class="line">  <span class="comment">// - return Math.min(dig(root.left, length + 1), dig(root.right, length + 1));</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(left, right);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// ä» 1 å¼€å§‹è®¡æ•°</span></span><br><span class="line">  <span class="comment">// + return dig(root, 1);</span></span><br><span class="line">  <span class="comment">// - return dig(root, 0);</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><p>è§‚å¯Ÿè§£é¢˜æ€è·¯ï¼Œæ˜¯é€šè¿‡ä¼ é€’ä¸€ä¸ªæ·±åº¦å‚æ•°è¿›è¡Œé€’å½’ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹è®¡æ•°ï¼Œå¦‚æœä»å¶å­èŠ‚ç‚¹å¼€å§‹è®¡æ•°ï¼Œå°±å¯ä»¥é¿å…å‚æ•°çš„ä¼ é€’ã€‚</p>
<p>æœ€å¤§æ·±åº¦è®¡ç®—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var maxDepth = <span class="keyword">function</span> (root) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === null) <span class="built_in">return</span> 0;</span><br><span class="line">    <span class="built_in">return</span> Math.max(maxDepth(root.left), maxDepth(root.right)) + 1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æœ€å°æ·±åº¦è®¡ç®—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minDepth = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> left = <span class="title function_">minDepth</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="keyword">let</span> right = <span class="title function_">minDepth</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§£å†³å·¦å³å­æ ‘å…¶ä¸­ä¸€ä¸ªä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (left === <span class="number">0</span>) <span class="keyword">return</span> right + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (right === <span class="number">0</span>) <span class="keyword">return</span> left + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæœ€å°æ·±åº¦ï¼Œè¿˜å¯ä»¥è€ƒè™‘ç”¨ BFS å±‚åºéå†æ¥ä¼˜åŒ–ï¼Œå› ä¸ºæœ€å°æ·±åº¦ï¼Œæ˜¯è¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ‰€åœ¨çš„æ·±åº¦ï¼Œè€Œä¸éœ€è¦åƒ DFS é‚£æ ·ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯èµ°åˆ°å¤´æ‰çŸ¥é“å“ªä¸€æ¡è·¯å¾„æ˜¯æœ€çŸ­çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minDepth = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> deep = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> deep;</span><br><span class="line">  <span class="keyword">let</span> queue = [root];</span><br><span class="line">  <span class="keyword">let</span> len;</span><br><span class="line">  <span class="keyword">while</span> ((len = queue.<span class="property">length</span>)) &#123;</span><br><span class="line">    deep++;</span><br><span class="line">    <span class="keyword">const</span> q = queue.<span class="title function_">concat</span>([]);</span><br><span class="line">    queue = [];</span><br><span class="line">    <span class="keyword">while</span> (len--) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = q.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">left</span> === <span class="literal">null</span> &amp;&amp; node.<span class="property">right</span> === <span class="literal">null</span>) <span class="keyword">return</span> deep;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">right</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">left</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> deep;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B3%E8%81%94%E9%A2%98%E7%9B%AE/" rel="tag">å…³è”é¢˜ç›®</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-algorithm/learn/äºŒå‰æ ‘"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/6477f25bd014/"
    >äºŒå‰æ ‘</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/6477f25bd014/" class="article-date">
  <time datetime="2021-01-19T03:09:56.000Z" itemprop="datePublished">2021-01-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> / <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E5%AD%A6/">å¸¸è§ç®—æ³•ä¸æ•°å­¦</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>äºŒå‰æ ‘å¯ä»¥ç®—æ˜¯æœ€åŸºç¡€çš„æ•°æ®ç±»å‹ã€‚</p>
<p>å¾ˆå¤šå¤æ‚çš„æ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºäºŒå‰æ ‘çš„ï¼Œæ¯”å¦‚ çº¢é»‘æ ‘ï¼ˆäºŒå‰æœç´¢æ ‘ï¼‰ã€å¤šå‰æ ‘ã€äºŒå‰å †ã€å›¾ã€å­—å…¸æ ‘ã€å¹¶æŸ¥é›†ã€s çº¿æ®µæ ‘ ç­‰ç­‰ã€‚</p>
<p>äºŒå‰æ ‘å¯ä»¥ä»£è¡¨ä¸€ç§é€’å½’çš„æ€ç»´æ–¹å¼,æ¯”å¦‚ å›æº¯ç®—æ³•ã€BFS ç®—æ³•ã€åŠ¨æ€è§„åˆ’ æœ¬è´¨ä¸Šä¹Ÿæ˜¯æŠŠå…·ä½“é—®é¢˜æŠ½è±¡æˆæ ‘ç»“æ„ã€‚</p>
<h4 id="æ ‘çš„æ¦‚å¿µ"><a href="#æ ‘çš„æ¦‚å¿µ" class="headerlink" title="æ ‘çš„æ¦‚å¿µ"></a>æ ‘çš„æ¦‚å¿µ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    1</span><br><span class="line">   / \</span><br><span class="line">  2   3</span><br><span class="line"> /   / \</span><br><span class="line">4   5   6</span><br><span class="line">   /     \</span><br><span class="line">  7       8</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ¯ä¸ªèŠ‚ç‚¹ä¸‹æ–¹ç›´æ¥ç›¸è¿çš„èŠ‚ç‚¹ç§°ä¸º<strong>å­èŠ‚ç‚¹</strong>ï¼Œä¸Šæ–¹ç›´æ¥ç›¸è¿çš„èŠ‚ç‚¹ç§°ä¸º<strong>çˆ¶èŠ‚ç‚¹</strong>ã€‚æ¯”æ–¹è¯´èŠ‚ç‚¹ 3 çš„çˆ¶èŠ‚ç‚¹æ˜¯ 1ï¼Œå·¦å­èŠ‚ç‚¹æ˜¯ 5ï¼Œå³å­èŠ‚ç‚¹æ˜¯ 6ï¼›èŠ‚ç‚¹ 5 çš„çˆ¶èŠ‚ç‚¹æ˜¯ 3ï¼Œå·¦å­èŠ‚ç‚¹æ˜¯ 7ï¼Œæ²¡æœ‰å³å­èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>æˆ‘ä»¬ç§°æœ€ä¸Šæ–¹é‚£ä¸ªæ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ 1 ä¸º<strong>æ ¹èŠ‚ç‚¹</strong>ï¼Œç§°æœ€ä¸‹å±‚æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ 4ã€7ã€8 ä¸º<strong>å¶å­èŠ‚ç‚¹</strong>ã€‚</p>
</li>
<li><p>ä»æ ¹èŠ‚ç‚¹åˆ°æœ€ä¸‹æ–¹å¶å­èŠ‚ç‚¹ç»è¿‡çš„èŠ‚ç‚¹ä¸ªæ•°ä¸ºäºŒå‰æ ‘çš„<strong>æœ€å¤§æ·±åº¦&#x2F;é«˜åº¦</strong>ï¼Œä¸Šé¢è¿™æ£µæ ‘çš„æœ€å¤§æ·±åº¦æ˜¯ 4ï¼Œå³ä»æ ¹èŠ‚ç‚¹ 1 åˆ°å¶å­èŠ‚ç‚¹ 7 æˆ– 8 çš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹ä¸ªæ•°ã€‚</p>
</li>
<li><p>æ»¡äºŒå‰æ ‘: æ¯ä¸€å±‚èŠ‚ç‚¹éƒ½æ˜¯æ»¡çš„, å‡è®¾æ·±åº¦ä¸º hï¼Œé‚£ä¹ˆæ€»èŠ‚ç‚¹æ•°å°±æ˜¯ <code>2^h - 1</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       1</span><br><span class="line">     /   \</span><br><span class="line">    2     3</span><br><span class="line">   / \   / \</span><br><span class="line">  4   9 5   6</span><br><span class="line"> / \ / \/ \ / \</span><br><span class="line">10 11 7 12 13 8 14</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®Œå…¨äºŒå‰æ ‘ï¼š äºŒå‰æ ‘çš„æ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½ç´§å‡‘é å·¦æ’åˆ—ï¼Œä¸”é™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–æ¯å±‚éƒ½å¿…é¡»æ˜¯æ»¡çš„, æ»¡äºŒå‰æ ‘å°±æ˜¯ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ã€‚ä¹Ÿå¯ä»¥è¯´ <strong>å®Œå…¨äºŒå‰æ ‘çš„å·¦å³å­æ ‘ä¹Ÿæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚</strong> æˆ– <strong>å®Œå…¨äºŒå‰æ ‘çš„å·¦å³å­æ ‘ä¸­ï¼Œè‡³å°‘æœ‰ä¸€æ£µæ˜¯æ»¡äºŒå‰æ ‘ã€‚</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       1</span><br><span class="line">     /   \</span><br><span class="line">    2     3</span><br><span class="line">   / \   / \</span><br><span class="line">  4   9 5   6</span><br><span class="line"> / \ / \</span><br><span class="line">10 1 7 2</span><br></pre></td></tr></table></figure>
</li>
<li><p>äºŒå‰æœç´¢æ ‘ï¼šå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå…¶<strong>å·¦å­æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹</strong>çš„å€¼éƒ½è¦å°äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œ<strong>å³å­æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹</strong>çš„å€¼éƒ½è¦å¤§äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚ä¸ºå·¦å°å³å¤§çš„ç‰¹æ€§ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ BST ä¸­å¿«é€Ÿæ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€…æ‰¾åˆ°æŸä¸ªèŒƒå›´å†…çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿™æ˜¯ BST çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    7</span><br><span class="line">   / \</span><br><span class="line">  4   9</span><br><span class="line"> / \   \</span><br><span class="line">1   8   10</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="éå†æ–¹å¼"><a href="#éå†æ–¹å¼" class="headerlink" title="éå†æ–¹å¼"></a>éå†æ–¹å¼</h4><h5 id="å±‚åºéå†"><a href="#å±‚åºéå†" class="headerlink" title="å±‚åºéå†"></a>å±‚åºéå†</h5><p>ä¸€å±‚ä¸€å±‚åœ°éå†äºŒå‰æ ‘,æ˜¾ç„¶å…ˆè®¿é—®çš„èŠ‚ç‚¹éœ€è¦å…ˆå¤„ç†ï¼Œè€Œå·¦å³èŠ‚ç‚¹æš‚æ—¶ç”¨ä¸åˆ°éœ€è¦å…ˆå­˜èµ·æ¥ï¼Œè‡ªç„¶æƒ³åˆ°ç”¨é˜Ÿåˆ—æ¥å¤„ç†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrderTraverse = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> q = [];</span><br><span class="line">  q.<span class="title function_">push</span>(root);</span><br><span class="line">  <span class="keyword">while</span> (q.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cur = q.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="comment">// è®¿é—® cur èŠ‚ç‚¹</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(cur.<span class="property">val</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠ cur çš„å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">if</span> (cur.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">      q.<span class="title function_">push</span>(cur.<span class="property">left</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cur.<span class="property">right</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">      q.<span class="title function_">push</span>(cur.<span class="property">right</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜å°±æ˜¯ä¸çŸ¥é“æ˜¯ç¬¬å‡ å±‚ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨é¢å¤–çš„å˜é‡æ¥è®°å½•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrderTraverse = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> q = [];</span><br><span class="line">  q.<span class="title function_">push</span>(root);</span><br><span class="line">  <span class="comment">// è®°å½•å½“å‰éå†åˆ°çš„å±‚æ•°ï¼ˆæ ¹èŠ‚ç‚¹è§†ä¸ºç¬¬ 1 å±‚ï¼‰</span></span><br><span class="line">  <span class="keyword">let</span> depth = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (q.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sz = q.<span class="property">length</span>;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨é¢å¤–çš„å˜é‡ï¼Œè®°å½•æ¯å±‚çš„èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶qé˜Ÿåˆ—ï¼Œè¿™æ ·å¯ä»¥é¿å… shift æ“ä½œçš„O(n) æ—¶é—´å¤æ‚åº¦</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> cur = q.<span class="title function_">shift</span>();</span><br><span class="line">      <span class="comment">// è®¿é—® cur èŠ‚ç‚¹ï¼ŒåŒæ—¶çŸ¥é“å®ƒæ‰€åœ¨çš„å±‚æ•°</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;depth = &quot;</span> + depth + <span class="string">&quot;, val = &quot;</span> + cur.<span class="property">val</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æŠŠ cur çš„å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">      <span class="keyword">if</span> (cur.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">        q.<span class="title function_">push</span>(cur.<span class="property">left</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (cur.<span class="property">right</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">        q.<span class="title function_">push</span>(cur.<span class="property">right</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    depth++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åŒç†è¿˜å¯ä»¥æ·»åŠ æ›´å¤šçš„ä¸‹ä¿¡æ¯ï¼Œç°åœ¨åªçŸ¥é“æ•´ä¸ªæ ‘çš„å±‚æ•°ï¼Œè¿˜å¯ä»¥ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä»–çš„å±‚æ•°, ä¸€èˆ¬ç§°ä½œ<strong>è·¯å¾„çš„æƒé‡</strong>ï¼Œå³ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰çš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">State</span>(<span class="params">node, depth</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">node</span> = node;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">depth</span> = depth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> levelOrderTraverse = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// @visualize bfs</span></span><br><span class="line">  <span class="keyword">var</span> q = [];</span><br><span class="line">  <span class="comment">// æ ¹èŠ‚ç‚¹çš„è·¯å¾„æƒé‡å’Œæ˜¯ 1</span></span><br><span class="line">  q.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">State</span>(root, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (q.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cur = q.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="comment">// è®¿é—® cur èŠ‚ç‚¹ï¼ŒåŒæ—¶çŸ¥é“å®ƒçš„è·¯å¾„æƒé‡å’Œ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;depth = &quot;</span> + cur.<span class="property">depth</span> + <span class="string">&quot;, val = &quot;</span> + cur.<span class="property">node</span>.<span class="property">val</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠ cur çš„å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">if</span> (cur.<span class="property">node</span>.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">      q.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">State</span>(cur.<span class="property">node</span>.<span class="property">left</span>, cur.<span class="property">depth</span> + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cur.<span class="property">node</span>.<span class="property">right</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">      q.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">State</span>(cur.<span class="property">node</span>.<span class="property">right</span>, cur.<span class="property">depth</span> + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="é€’å½’éå†"><a href="#é€’å½’éå†" class="headerlink" title="é€’å½’éå†"></a>é€’å½’éå†</h5><p>å…ˆæ·±å…¥åˆ°ä¸€ä¸ªåˆ†æ”¯ä¸­ï¼Œåœ¨é€å±‚çš„è¿”å›ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒå‰æ ‘çš„éå†æ¡†æ¶</span></span><br><span class="line"><span class="keyword">var</span> traverse = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å‰åºä½ç½®</span></span><br><span class="line">  <span class="title function_">traverse</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="comment">// ä¸­åºä½ç½®</span></span><br><span class="line">  <span class="title function_">traverse</span>(root.<span class="property">right</span>);</span><br><span class="line">  <span class="comment">// ååºä½ç½®</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯åœ¨ä¸åŒçš„ä½ç½®å†™ä»£ç ï¼Œè·å–åˆ°çš„ä¿¡æ¯æ˜¯ä¸åŒçš„ï¼Œæ‰€è°“çš„å‰ä¸­åï¼Œæ˜¯ç›¸å¯¹äºæ ¹èŠ‚ç‚¹çš„å…ˆåã€‚</p>
<ul>
<li><p>å‰åºéå†ï¼š æ ¹èŠ‚ç‚¹ &#x3D;&gt; å·¦èŠ‚ç‚¹ &#x3D;&gt; å³èŠ‚ç‚¹ï¼Œ ä»£ç ä½ç½®å†™åœ¨æ¥å…¥å·¦æ ‘ä¹‹å‰ï¼Œå› æ­¤å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œåœ¨è®¿é—®å·¦æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚å¯¹äºä¸€ä¸ªå­æ ‘ï¼Œåªæœ‰å·¦å­æ ‘éå†å®Œæˆåï¼Œæ‰å›å»å¤„ç†å³å­æ ‘ï¼Œå¯ä»¥çœ‹ä½œæ˜¯è¿›å…¥ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œ</p>
</li>
<li><p>ä¸­åºéå†ï¼š å·¦èŠ‚ç‚¹ &#x3D;&gt; æ ¹èŠ‚ç‚¹ &#x3D;&gt; å³èŠ‚ç‚¹ï¼Œä»£ç ä¼šä¸€ç›´é€’å½’è°ƒç”¨åˆ°å·¦å­æ ‘çš„å·¦å¶å­èŠ‚ç‚¹ï¼Œå½“å·¦å¶å­èŠ‚ç‚¹è®¿é—®å®Œæ¯•åï¼Œä¼šå¼¹å‡ºå½“å‰çš„è°ƒç”¨æ ˆï¼Œè€Œä¸Šä¸€ä¸ªè°ƒç”¨æ ˆæ­£æ˜¯å·¦èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹,å¯ä»¥çœ‹ä½œæ˜¯äºŒå‰æ ‘èŠ‚ç‚¹å·¦å­æ ‘éƒ½éå†å®Œï¼Œå³å°†å¼€å§‹éå†å³å­æ ‘çš„æ—¶å€™æ‰§è¡Œã€‚</p>
</li>
<li><p>ååºéå†ï¼š å·¦èŠ‚ç‚¹ &#x3D;&gt; å³èŠ‚ç‚¹ &#x3D;&gt; æ ¹èŠ‚ç‚¹ï¼Œä»£ç ä¼šä¸€ç›´é€’å½’è°ƒç”¨åˆ°å·¦å­æ ‘çš„å³å¶å­èŠ‚ç‚¹ï¼Œå½“å·¦å³å­èŠ‚ç‚¹è®¿é—®å®Œæ¯•åï¼Œä¼šå¼¹å‡ºå½“å‰çš„è°ƒç”¨æ ˆï¼Œè€Œä¸Šä¸€ä¸ªè°ƒç”¨æ ˆæ­£æ˜¯å³èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹,å¯ä»¥çœ‹ä½œæ˜¯ç¦»å¼€ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œã€‚</p>
</li>
</ul>
<p>è€Œé€’å½’éå†å¸¸ç”¨äºå¯»æ‰¾æœ€çŸ­è·¯å¾„ï¼Œ <a href="/posts/8e3fe34f62a9/"><strong>[äºŒå‰æ ‘æœ€å°&#x2F;å¤§æ·±åº¦]</strong></a>, <a href="/posts/6a338e4e2cab/"><strong>[äºŒå‰æ ‘ç›´å¾„]</strong></a>,é€’å½’å’Œéå†å„æœ‰ä¼˜åŠ¿ï¼Œéå†çš„æ€æƒ³æ˜¯é…åˆå¤–éƒ¨å˜é‡ï¼Œé€’å½’åˆ™æ˜¯å°†é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ã€‚</p>
<p>æœ‰ä¸€äº›é—®é¢˜è™½ç„¶æ˜¯åœ¨äºŒå‰æ ‘çš„éå†æ¨¡å‹ä¸‹ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®æ¡ä»¶è¿›å…¥ä¸åŒçš„åˆ†æ”¯å¤„ç†ï¼Œå¹¶åœ¨å…¶ä¸­ç©¿æ’å…¶ä»–çš„é€»è¾‘ä»£ç ã€‚ <a href="/posts/13ae1e52470a/"><strong>[äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨]</strong></a> <a href="/posts/0d16fafcd38e/"><strong>[å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ]</strong></a></p>
<h4 id="äºŒå‰æ ‘çš„åºåˆ—åŒ–"><a href="#äºŒå‰æ ‘çš„åºåˆ—åŒ–" class="headerlink" title="äºŒå‰æ ‘çš„åºåˆ—åŒ–"></a>äºŒå‰æ ‘çš„åºåˆ—åŒ–</h4><h5 id="å±‚åºéå†-1"><a href="#å±‚åºéå†-1" class="headerlink" title="å±‚åºéå†"></a>å±‚åºéå†</h5><p>è¿™åº”è¯¥æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„ä¸€ç§æ–¹æ³•ï¼Œå°±åƒ LeetCode é¢˜ç›®ç»™å‡ºçš„å¯è§†åŒ–æ•°æ®ä¸€æ ·ï¼Œå°†æ¯ä¸€å±‚çš„æ•°æ®ä¾æ¬¡æ”¾å…¥åˆ°æ•°ç»„ä¸­ï¼Œå°±å¯ä»¥å¯¹äºŒå‰æ ‘åºåˆ—åŒ–ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¦ä¿ç•™ç©ºèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½æè¿°æ¯ä¸€å±‚èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> serialize = <span class="keyword">function</span> (<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">const</span> queue = [root];</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">while</span> (queue.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> first = queue.<span class="title function_">shift</span>();</span><br><span class="line">    res.<span class="title function_">push</span>(first === <span class="literal">null</span> ? first : first.<span class="property">val</span>);</span><br><span class="line">    <span class="keyword">if</span> (first !== <span class="literal">null</span>) queue.<span class="title function_">push</span>(first.<span class="property">left</span>, first.<span class="property">right</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> deserialize = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(data[index++]);</span><br><span class="line">  <span class="keyword">let</span> queue = [root];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (data[index] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="keyword">const</span> left = data[index++];</span><br><span class="line">    <span class="keyword">const</span> right = data[index++];</span><br><span class="line"></span><br><span class="line">    node.<span class="property">left</span> = left === <span class="literal">null</span> ? left : <span class="keyword">new</span> <span class="title class_">TreeNode</span>(left);</span><br><span class="line">    node.<span class="property">right</span> = right === <span class="literal">null</span> ? right : <span class="keyword">new</span> <span class="title class_">TreeNode</span>(right);</span><br><span class="line">    <span class="keyword">if</span> (left !== <span class="literal">null</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">    <span class="keyword">if</span> (right !== <span class="literal">null</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="äºŒå‰æ ‘çš„å”¯ä¸€æ€§"><a href="#äºŒå‰æ ‘çš„å”¯ä¸€æ€§" class="headerlink" title="äºŒå‰æ ‘çš„å”¯ä¸€æ€§"></a>äºŒå‰æ ‘çš„å”¯ä¸€æ€§</h5> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">äºŒå‰æ ‘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-devops/è°ƒè¯•npmåŒ…"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/61c0760886e4/"
    >è°ƒè¯•npmåŒ…</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/61c0760886e4/" class="article-date">
  <time datetime="2021-01-16T14:16:47.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/DevOps/">DevOps</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="npm-x2F-yarn-link"><a href="#npm-x2F-yarn-link" class="headerlink" title="npm&#x2F;yarn link"></a>npm&#x2F;yarn link</h4><p>é€šè¿‡è½¯é“¾æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…</p>
<p>è¿›å…¥æœ¬åœ°npmåŒ…æ–‡ä»¶å¤¹ï¼Œæˆ–é€šè¿‡ <code>git clone</code>æ‹‰å»çš„ç¬¬ä¸‰æ–¹åŒ…æ–‡ä»¶å¤¹ </p>
<p>æ‰§è¡Œ <code>yarn link</code> æˆ– <code>npm link</code> è¿æ¥åˆ°å…¨å±€ï¼ˆyarn ä¸ä¼šæ±¡æŸ“å…¨å±€ï¼‰</p>
<p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ <code>yarn link [ç¬¬ä¸‰æ–¹åŒ…]</code>  æˆ– <code>npm link [ç¬¬ä¸‰æ–¹åŒ…]</code></p>
<p>åœ¨é¡¹ç›®ä¸­é€šè¿‡ <code>yarn unlink [ç¬¬ä¸‰æ–¹åŒ…]</code> æˆ– <code>npm unlink [ç¬¬ä¸‰æ–¹åŒ…]</code> è§£é™¤é“¾æ¥</p>
<p>é€šè¿‡ä¸€ä¸‹å‘½ä»¤å»æ‰å…¨å±€å®‰è£…çš„åŒ… </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm rm --<span class="variable language_">global</span> foo </span><br><span class="line">npm ls --<span class="variable language_">global</span> foo <span class="comment">// æ£€æŸ¥åŒ…æ˜¯å¦è¢«å®‰è£…</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DevOps/" rel="tag">DevOps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-webpack/webpackæ ¸å¿ƒæ¦‚å¿µ"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/dce700bcd907/"
    >webpackæ ¸å¿ƒæ¦‚å¿µ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/dce700bcd907/" class="article-date">
  <time datetime="2021-01-16T13:32:37.000Z" itemprop="datePublished">2021-01-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>æ¨èå°±è¿‘å®‰è£…ï¼Œå³å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼Œä¸è¦å®‰è£…åœ¨å…¨å±€ä¸­</p>
<p>é€šè¿‡ <code>npx webpack -v</code> æŸ¥çœ‹é¡¹ç›®ä¸­ webpack ç‰ˆæœ¬</p>
<p><strong>nrm é•œåƒæºç®¡ç†</strong></p>
<p><code>yarn add nrm</code></p>
<p>æŸ¥çœ‹é•œåƒæºåˆ—è¡¨</p>
<p><code>nrm ls</code></p>
<p>æµ‹é€Ÿ</p>
<p><code>nrm test taobao</code></p>
<h4 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h4><h5 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h5><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/clean-webpack-plugin">https://www.npmjs.com/package/clean-webpack-plugin</a></p>
<h4 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h4><p>cheap-module-source-map ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä¸èƒ½æš´éœ²æºç </p>
<p>eval-cheap-module-source-map å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">devtool</span>:<span class="string">&#x27;cheap-module-source-map&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="devServer-å’Œçƒ­æ¨¡å—æ›´æ–°"><a href="#devServer-å’Œçƒ­æ¨¡å—æ›´æ–°" class="headerlink" title="devServer å’Œçƒ­æ¨¡å—æ›´æ–°"></a>devServer å’Œçƒ­æ¨¡å—æ›´æ–°</h4><p>å®‰è£…devServer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D webpack-dev-server</span><br></pre></td></tr></table></figure>

<p>webpack.config.js ä¸­æ·»åŠ é…ç½®é¡¹  </p>
<p>contentBase åªæœ‰éœ€è¦åœ¨è®¿é—®é™æ€æ–‡ä»¶æ—¶å€™ä½¿ç”¨ï¼Œé»˜è®¤ä¸‹é¢ä¸‰ä¸ªé…ç½®é¡¹éƒ½å¯ä»¥ä¸å†™</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">  <span class="attr">compress</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">9000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>package.json ä¸­æ·»åŠ å¯åŠ¨å‘½ä»¤</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --open&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¼€å¯hmr</p>
<p>1.é…ç½®webpack-dev-server<br>2.devServeré…ç½®hot:true<br>3.plugins hotModuleeReplaceMentPlugin<br>4.js æ–‡ä»¶ä¸­æ·»åŠ hmrä»£ç </p>
<p>webpack.config.js ä¸­æ·»åŠ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">hot</span>:<span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">NamedModulesPlugin</span>(),</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js å¢åŠ ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./print.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>);</span><br><span class="line">   <span class="title function_">printMe</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h4><p><strong>string</strong> : æ‰€æœ‰çš„èµ„æºæ‰“åŒ…æˆä¸€ä¸ªchunk,è¾“å‡ºä¸€ä¸ª<code>bundle</code>æ–‡ä»¶ï¼Œé»˜è®¤çš„åç§°æ˜¯<code>main.js</code></p>
<p><strong>array</strong>: å¤šå…¥å£ï¼Œæ‰€æœ‰çš„æ–‡ä»¶ä¹Ÿåªä¼šè¢«æ‰“åŒ…æˆä¸€ä¸ª<code>chunk</code>,é€šå¸¸åªåœ¨é…ç½®htmlçš„HMRæ—¶ä½¿ç”¨</p>
<p><strong>object</strong> å¤šå…¥å£ï¼Œæœ‰å‡ ä¸ªå…¥å£æ–‡ä»¶å°±å¯ä»¥å½¢æˆå‡ ä¸ª<code>chunk</code>,è¾“å‡ºå‡ ä¸ª<code>bundle</code>æ–‡ä»¶ï¼Œæ–‡ä»¶çš„åç§°æ—¶å¯¹è±¡ä¸­çš„<code>key</code>ï¼Œæ¯ä¸ªkeyåé¢å¯ä»¥å†™ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å°†æ•°ç»„ä¸­çš„æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ª<code>bundle</code>,(å‚ç…§dllçš„ç”¨æ³•)</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p><strong>filename</strong> è¾“å‡ºçš„æ–‡ä»¶åç§°ï¼Œå¯ä»¥æŒ‡å®šç›®å½•å’Œæ–‡ä»¶å <code>js/[name].js</code></p>
<p><strong>publicpath</strong> æ‰€æœ‰èµ„æºå¼•å…¥æ—¶å€™çš„å…¬å…±è·¯å¾„ï¼Œä¼šæ‹¼åœ¨èµ„æºè·¯å¾„çš„å‰é¢ä½œä¸ºåŸºç¡€è·¯å¾„ï¼Œ <code>publicpath:/</code>,<code>img/a.png</code> &#x3D;&gt; <code>/img/a.png</code>, <strong>æ³¨æ„ï¼šä¸æ˜¯èµ„æºçš„è¾“å‡ºè·¯å¾„</strong></p>
<p><strong>chunkFilename</strong> éå…¥å£<code>chunk</code>çš„åç§°ï¼Œé€šè¿‡åŠ¨æ€<code>import</code>å¼•å…¥çš„æ–‡ä»¶åç§°é€šè¿‡idçš„å½¢å¼å‘½åï¼Œä»0å¼€å§‹ï¼Œä¾æ¬¡é€’å¢ï¼Œ<strong>é€šå¸¸ä¼šä½¿ç”¨<a target="_blank" rel="noopener" href="https://webpack.js.org/migrate/5/#using--webpackchunkname--">webpackchunkname</a>æ¥é‡å‘½å</strong></p>
<p><strong>library</strong> ä¼šå°†<code>chunk</code>æ–‡ä»¶ç”¨ä¸€ä¸ªå˜é‡æ¥å—ï¼Œæš´éœ²ç»™å…¨å±€ä½¿ç”¨</p>
<p><strong>libraryTarget</strong> æŒ‡æ˜ä»¥é‚£ç§æ–¹å¼å¼•å…¥,<code>window</code>æŠŠè¾“å…¥çš„å˜é‡æ·»åŠ åˆ°æµè§ˆå™¨å…¨å±€ç¯å¢ƒ<code>window[name]=xxx</code>, <code>global</code>æŠŠè¾“å…¥çš„å˜é‡æ·»åŠ åˆ°nodeå…¨å±€ç¯å¢ƒ<code>global[name]=xxx</code>,<code>commonjs</code>ä»¥commonjsæ¨¡å—åŒ–è§„èŒƒå¼•å…¥ï¼Œé€šå¸¸é…åˆ<code>dll</code>ä½¿ç”¨ </p>
<p><strong>ä¸ devserver ä¸­çš„ publicpath åŒºåˆ«</strong></p>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/output/#outputpublicpath">output ä¸­çš„ publicpath</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªåœ¨ä½¿ç”¨æŒ‰éœ€åŠ è½½å’Œå¼•å…¥å¤–éƒ¨èµ„æºï¼ˆå›¾ç‰‡,æ–‡ä»¶ç­‰ï¼‰éå¸¸é‡è¦çš„å±æ€§ï¼Œå¦‚æœè®¾ç½®äº†ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼Œå½“åŠ è½½è¿™äº›èµ„æºæ—¶ä¼šæŠ¥404é”™è¯¯</p>
<p>è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†è¾“å‡ºç›®å½•åœ¨æµè§ˆå™¨ä¸­å¼•ç”¨æ—¶çš„å…¬å…±è·¯å¾„ï¼ˆpublicpathï¼‰,ä¸€ä¸ªç›¸å¯¹è·¯å¾„è¢«è§£æä¸ºç›¸å¯¹äºHTMLé¡µé¢æˆ–<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base">&lt;base&gt;æ ‡ç­¾</a></p>
<blockquote>
<base> æ ‡ç­¾ä¸ºé¡µé¢ä¸Šçš„æ‰€æœ‰é“¾æ¥è§„å®šé»˜è®¤åœ°å€æˆ–é»˜è®¤ç›®æ ‡ã€‚
</blockquote>
<p>ç›¸å¯¹æœåŠ¡å™¨çš„è·¯å¾„ï¼Œç›¸å¯¹ä¸åè®®çš„è·¯å¾„ï¼Œæˆ–ç»å¯¹è·¯å¾„éƒ½æ˜¯æœ‰å¯èƒ½çš„ç”šè‡³æœ‰æ—¶æ˜¯å¿…é¡»çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨CDN æ‰˜ç®¡é™æ€èµ„æº</p>
<p>åœ¨è¿è¡Œæ—¶æˆ–loaderå¤„ç†æ—¶ï¼Œæ¯ä¸€ä¸ªURLçš„å‰ç¼€éƒ½ä¼šè¢«è‰²è®¾ç½®é…ç½®é¡¹ä¸­çš„å€¼ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¾ˆå¤šä¾‹å­ä¸­è¿™ä¸ªé…ç½®é¡¹è¢«è®¾ç½®ä¸º <code>/</code> çš„åŸå› </p>
<p>webpack-dev-server ä¹Ÿéœ€è¦ä»publicPathè·å–ä¿¡æ¯ï¼Œä½¿ç”¨å®ƒæ¥ç¡®å®šä»ä½•å¤„æä¾›è¾“å‡ºæ–‡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// One of the below</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;https://cdn.example.com/assets/&#x27;</span>, <span class="comment">// CDN (always HTTPS)</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;//cdn.example.com/assets/&#x27;</span>, <span class="comment">// CDN (same protocol)</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;/assets/&#x27;</span>, <span class="comment">// server-relative</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;assets/&#x27;</span>, <span class="comment">// relative to HTML page</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;../assets/&#x27;</span>, <span class="comment">// relative to HTML page</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// relative to HTML page (same directory)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/dev-server/#devserverpublicpath-">devServer ä¸­çš„ publicpath</a></p>
<p>æ‰“åŒ…çš„æ–‡ä»¶å¯ä»¥åœ¨æµè§ˆå™¨çš„è¿™ä¸ªç›®å½•ä¸‹é¢å¾—åˆ°</p>
<p>å¦‚æœæœåŠ¡è·‘åœ¨ <a href="http://localhost:8080ï¼Œæ‰“åŒ…çš„æ–‡ä»¶ä¸ºbundle.jsï¼ŒpublicPathä¸º">http://localhost:8080ï¼Œæ‰“åŒ…çš„æ–‡ä»¶ä¸ºbundle.jsï¼ŒpublicPathä¸º</a> <code>/</code>, å¯ä»¥åœ¨ <code>http://localhost:8080/bundle.js</code>è®¿é—®åˆ°æ‰“åŒ…æ–‡ä»¶</p>
<p>å¦‚æœ publicPath æ”¹ä¸º <code>/assets/</code>, é‚£ä¹ˆå¯ä»¥åœ¨ <code>http://localhost:8080/assets/bundle.js</code>è®¿é—®ï¼Œä¹Ÿå¯ä»¥æŠŠ publicPath æ”¹ä¸º <code>http://localhost:8080/assets/</code></p>
<p>è¿™è¯´æ˜äº† devServer.publicPath ä¸ output.publicPath æ˜¯ä¸€è‡´çš„</p>
<h5 id="babel-x2F-polyfill-babel-x2F-plugin-transform-runtime-babel-x2F-runtime-corejs2"><a href="#babel-x2F-polyfill-babel-x2F-plugin-transform-runtime-babel-x2F-runtime-corejs2" class="headerlink" title="@babel&#x2F;polyfill  @babel&#x2F;plugin-transform-runtime @babel&#x2F;runtime-corejs2"></a>@babel&#x2F;polyfill  @babel&#x2F;plugin-transform-runtime @babel&#x2F;runtime-corejs2</h5><p>@babel&#x2F;preset-env åªä¼šè½¬æ¢æ–°è¯­æ³•ï¼Œä½†æ˜¯ä¸ä¼šè½¬æ¢æ–°çš„api,æ¯”å¦‚ <code>Array.from</code></p>
<p>éœ€è¦ @babel&#x2F;polyfill è½¬æ¢æ–°çš„api,ä½†æ˜¯ @babel&#x2F;polyfill ä¼šå…¨é‡å¼•å…¥ï¼Œä¸èƒ½æŒ‰éœ€å¼•å…¥</p>
<p>å¯ä»¥é€šè¿‡ <code>babel.rc</code> é…ç½®æ–‡ä»¶æ¥å®ç° </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="comment">// This option was removed in v7 by just making it the default.åœ¨æ–°ç‰ˆæœ¬ä¸­å·²ç»ç§»é™¤ï¼Œæ— éœ€æ·»åŠ </span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   &quot;useBuiltIns&quot;: &quot;usage&quot;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯@babel&#x2F;preset-envä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œè™½ç„¶ä¼šæŒ‰éœ€å¼•å…¥ä½†æ˜¯æ¯ä¸ªæ–‡ä»¶å¦‚æœæœ‰é‡å¤çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«ç¼–è¯‘æˆç›¸åŒçš„ä»£ç å¼•å…¥ï¼Œæ–‡ä»¶å¤šçš„æ—¶å€™ä¼šè®©å†—ä½™çš„ä»£ç è¶Šæ¥è¶Šå¤š</p>
<p>@babel&#x2F;runtime-corejs2 æ˜¯ä¸€ä¸ªéšç€ <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">@babel&#x2F;plugin-transform-runtime</a> ä¸€èµ·æ—¶ä½¿ç”¨çš„è¿è¡Œæ—¶ä¾èµ–ï¼Œä¼šæŠŠé‡å¤çš„å‡½æ•°è¦†ç›–ä¸º @babel&#x2F;runtime-corejs2 ä¸­çš„å¼•ç”¨</p>
<p>@babel&#x2F;runtime-corejs2 ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ç€å‡½æ•°çš„åŒ…ï¼ŒæŠŠå‡½æ•°ä»¥æ¨¡å—åŒ–çš„å½¢å¼å¼•å…¥, <strong>è¦å®‰è£…åˆ°ç”Ÿäº§ä¾èµ–ä¸­</strong></p>
<p>.babelrc</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;corejs&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<h4 id="treeshaking"><a href="#treeshaking" class="headerlink" title="treeshaking"></a>treeshaking</h4><p>webpack4 production é»˜è®¤å¼€å¯ï¼Œéœ€è¦å¼•å…¥çš„åº“ä½¿ç”¨commonjs æ¨¡å—åŒ–è§„èŒƒ</p>
<p>å¦‚ loadsh-es</p>
<h4 id="å…¨å±€å¼•å…¥"><a href="#å…¨å±€å¼•å…¥" class="headerlink" title="å…¨å±€å¼•å…¥"></a>å…¨å±€å¼•å…¥</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/provide-plugin/#root">provide-plugin</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> webpack.<span class="title class_">ProvidePlugin</span>(&#123;</span><br><span class="line">    <span class="attr">$</span>: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>å¤šå…¥å£æ–‡ä»¶çš„æ¯ä¸€ä¸ªéƒ½ä¼šè¢«å¼•å…¥jqueryï¼Œæ‰€ä»¥éœ€è¦æå–å…¬å…±ä»£ç </p>
<h4 id="åŠ¨æ€åŠ è½½"><a href="#åŠ¨æ€åŠ è½½" class="headerlink" title="åŠ¨æ€åŠ è½½"></a>åŠ¨æ€åŠ è½½</h4><p><a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import">@babel&#x2F;plugin-syntax-dynamic-import</a></p>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/guides/code-splitting/#dynamic-imports">Dynamic Imports</a></p>
<p><strong>éœ€è¦æŒ‡æ˜webpackChunkNameæ‰èƒ½è¢«å•ç‹¬æ‰“åŒ…</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">import</span>(</span><br><span class="line">   <span class="comment">/* webpackChunkName: &quot;my-jquery&quot; */</span></span><br><span class="line">   <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"> )</span><br><span class="line">   .<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; <span class="keyword">default</span>: $ &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>($)</span><br><span class="line">     <span class="keyword">return</span> $(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="ä»£ç åˆ†å‰²"><a href="#ä»£ç åˆ†å‰²" class="headerlink" title="ä»£ç åˆ†å‰²"></a>ä»£ç åˆ†å‰²</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/split-chunks-plugin/#root">SplitChunksPlugin</a> ä»£æ›¿åŸæ¥çš„ commonChunksPlugin</p>
<ul>
<li>splitChunks.chunks</li>
</ul>
<p>asyncè¡¨ç¤ºåªä»å¼‚æ­¥åŠ è½½å¾—æ¨¡å—ï¼ˆåŠ¨æ€åŠ è½½import()ï¼‰é‡Œé¢è¿›è¡Œæ‹†åˆ†<br>initialè¡¨ç¤ºåªä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†<br>allè¡¨ç¤ºä»¥ä¸Šä¸¤è€…éƒ½åŒ…æ‹¬</p>
<ul>
<li>splitChunks.maxInitialRequests</li>
</ul>
<p>æ¯ä¸ªå…¥å£çš„å¹¶å‘è¯·æ±‚æ•°, å¦‚æœæ‹†å‡ºçš„åŒ…çš„ä¸ªæ•°å¤§äºmaxInitialRequestsï¼Œåˆ™ä¸ä¼šæŠŠè¾ƒå°çš„åŒ…å•ç‹¬æ‹†å‡º</p>
<ul>
<li>splitChunks.maxInitialRequests</li>
</ul>
<p>åŠ¨æ€å¼•å…¥çš„æ¨¡å—ï¼Œæœ€å¤šæ‹†åˆ†çš„æ•°é‡</p>
<h4 id="cssåˆ†å‰²"><a href="#cssåˆ†å‰²" class="headerlink" title="cssåˆ†å‰²"></a>cssåˆ†å‰²</h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/css-minimizer-webpack-plugin/">css-minimizer-webpack-plugin</a></p>
<h4 id="å‹ç¼©cssä»£ç "><a href="#å‹ç¼©cssä»£ç " class="headerlink" title="å‹ç¼©cssä»£ç "></a>å‹ç¼©cssä»£ç </h4><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/mini-css-extract-plugin/#getting-started">MiniCssExtractPlugin</a></p>
<h4 id="å¯è§†åŒ–åˆ†æ"><a href="#å¯è§†åŒ–åˆ†æ" class="headerlink" title="å¯è§†åŒ–åˆ†æ"></a>å¯è§†åŒ–åˆ†æ</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/webpack-bundle-analyzer">webpack-bundle-analyzer</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/17/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/19/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2025
        <i class="ri-heart-fill heart_icon"></i> SunZhiqi
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.png" alt="å››æœˆå…«æ—¥"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>æ­¤æ—¶æ— å£°èƒœæœ‰å£°ï¼</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="/js/jquery.modal.min.js"></script>
<link rel="stylesheet" href="/css/jquery.modal.min.css" />
<script src="/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>

  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>

    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->

        <div class="pswp__counter"></div>

        <button
          class="pswp__button pswp__button--close"
          title="Close (Esc)"
        ></button>

        <button
          class="pswp__button pswp__button--share"
          style="display: none"
          title="Share"
        ></button>

        <button
          class="pswp__button pswp__button--fs"
          title="Toggle fullscreen"
        ></button>

        <button
          class="pswp__button pswp__button--zoom"
          title="Zoom in/out"
        ></button>

        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>

      <button
        class="pswp__button pswp__button--arrow--left"
        title="Previous (arrow left)"
      ></button>

      <button
        class="pswp__button pswp__button--arrow--right"
        title="Next (arrow right)"
      ></button>

      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/photoswipe.min.css" />
<link rel="stylesheet" href="/css/default-skin.min.css" />
<script src="/js/photoswipe.min.js"></script>
<script src="/js/photoswipe-ui-default.min.js"></script>

<script>
  function viewer_init() {
    let pswpElement = document.querySelectorAll(".pswp")[0];
    let $imgArr = document.querySelectorAll(
      ".article-entry img:not(.reward-img)"
    );

    $imgArr.forEach(($em, i) => {
      $em.onclick = () => {
        // sliderå±•å¼€çŠ¶æ€
        // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
        if (document.querySelector(".left-col.show")) return;
        let items = [];
        $imgArr.forEach(($em2, i2) => {
          let img = $em2.getAttribute("data-idx", i2);
          let src =
            $em2.getAttribute("data-target") || $em2.getAttribute("src");
          let title = $em2.getAttribute("alt");
          // è·å¾—åŸå›¾å°ºå¯¸
          const image = new Image();
          image.src = src;
          items.push({
            src: src,
            w: image.width || $em2.width,
            h: image.height || $em2.height,
            title: title,
          });
        });
        var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
          index: parseInt(i),
        });
        gallery.init();
      };
    });
  }
  viewer_init();
</script>
 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="/js/MathJax.js"></script>
<script src="/js/TeX-AMS-MML_HTMLorMML-full.js"></script>

<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="/js/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !(function (e, t, a) {
    var initCopyCode = function () {
      var copyHtml = "";
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += "</button>";
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS(".btn-copy", {
        target: function (trigger) {
          return trigger.nextElementSibling;
        },
      });
      clipboard.on("success", function (e) {
        let $btn = $(e.trigger);
        $btn.addClass("copied");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-checkbox-circle-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPIED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-checkbox-circle-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
      clipboard.on("error", function (e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass("copy-failed");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-time-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPY FAILED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-time-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
    };
    initCopyCode();
  })(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "default" });
  }
</script>


    
    

  </div>
</body>

</html>