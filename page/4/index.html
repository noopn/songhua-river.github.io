<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="å‰ç«¯ web react" />
       
      <meta name="description" content="å‰ç«¯æŠ€æœ¯ä¸ç”Ÿæ´»ã€‚" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> å››æœˆå…«æ—¥</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">
 
<link rel="stylesheet" href="/css/fonts/remixicon.css">
 
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="/js/pace.min.js"></script>
       
 

      <link rel="stylesheet" href="/css/bulma.min.css" />
      <script src="/js/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/katex.min.css">

<link rel="stylesheet" href="/css/style.css">
<!-- hexo injector head_end end --></head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">å››æœˆå…«æ—¥</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['æ„¿ä½ è¶³å¤Ÿå¼ºå¤§ï¼Œä¹Ÿè¦è¶³å¤Ÿæ¸©æŸ”', 'æœ€è½»çš„å¹¶ä¸æ˜¯ä¸€æ ¹ç¾½æ¯›ï¼Œè€Œæ˜¯ä¸€åŒé£é¸Ÿçš„ç¿…è†€', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="posts-design/pattern/â‘£å·¥å‚æ¨¡å¼"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/9ddddaf8aec3/"
    >â‘£éšè—newæ“ä½œç¬¦-å·¥å‚æ¨¡å¼</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/9ddddaf8aec3/" class="article-date">
  <time datetime="2023-01-04T01:36:43.000Z" itemprop="datePublished">2023-01-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="new-æœ‰ä»€ä¹ˆä¸å¯¹"><a href="#new-æœ‰ä»€ä¹ˆä¸å¯¹" class="headerlink" title="new æœ‰ä»€ä¹ˆä¸å¯¹"></a>new æœ‰ä»€ä¹ˆä¸å¯¹</h4><p><strong>å®ä¾‹åŒ–å¯¹è±¡çš„è¿‡ç¨‹ä¸åº”è¯¥æ€»æ˜¯å…¬å¼€çš„è¿›è¡Œï¼Œè¿™é‡Œé¢ä¼šæœ‰ä¸€äº›è€¦åˆçš„é—®é¢˜ã€‚</strong></p>
<p>å¯¹ new æœ¬èº«æ¥è®²å¹¶æ²¡æœ‰ä»€ä¹ˆä¸å¯¹ï¼Œéœ€è¦é€šè¿‡ new æ“ä½œç¬¦å®ä¾‹åŒ–å¯¹è±¡ã€‚ä½†æ˜¯å¯¹äºè®¾è®¡æ¨¡å¼æ¥è®²ï¼Œnew æ“ä½œç¬¦è®©æˆ‘ä»¬é’ˆå¯¹ä¸šåŠ¡ç¼–å†™ä»£ç ï¼Œåˆå§‹åŒ–çš„é€»è¾‘å¯èƒ½åœ¨ä¸€æ®µæ¡ä»¶è¯­å¥ä¸­ï¼Œå¦‚æœæ·»åŠ äº†æ–°çš„ç±»ï¼Œå¿…é¡»ä¿®æ”¹åŸæ¥çš„ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä»£ç æ²¡æœ‰å¯¹ä¿®æ”¹å…³é—­ã€‚</p>
<p>å½“æœ‰ä¸€äº›ç›¸å…³ç±»å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå†™å‡ºä¸‹é¢çš„ä»£ç ï¼Œæ¯å½“åŠ å…¥æ–°çš„ç±»è¿™æ®µä»£ç å°±ä¼šè¢«ä¿®æ”¹ï¼Œä¹Ÿå°±è¿åå¯¹ä¿®æ”¹å…³é—­çš„è®¾è®¡åŸåˆ™ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (picnic) &#123;duck = <span class="keyword">new</span> <span class="title class_">MallardDuck</span>();&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (hunting) (duck = <span class="keyword">new</span> <span class="title class_">DecoyDuck</span>();)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (inBathTub) &#123;duck = <span class="keyword">new</span> <span class="title class_">RubberDuck</span>()&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="headerlink" title="ç®€å•å·¥å‚"></a>ç®€å•å·¥å‚</h4><p>ä¸€ä¸ªæœ€ç®€å•çš„å·¥å‚å°±æ˜¯æŠŠå®ä¾‹åŒ–å¯¹è±¡çš„è¿‡ç¨‹æå–å‡ºæ¥ï¼Œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œå¹¶æš´éœ²æ–¹æ³•ï¼Œå…è®¸ç¬¬ä¸‰æ–¹ç±»é€šè¿‡è¿™ä¸ªæ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">FruitFactory</span> &#123;</span><br><span class="line">  <span class="comment">// æŠ½è±¡å·¥å‚ç±»çš„å…¬ç”¨æ–¹æ³•</span></span><br><span class="line">  <span class="title function_">common</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="comment">// éœ€è¦å­ç±»é‡æ–°å®ç°</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="title function_">createTea</span>(<span class="attr">type</span>: <span class="built_in">string</span>): <span class="title class_">AppleTea</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type1AppleTea</span> <span class="keyword">implements</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è‹¹æœèŒ¶ç±»å‹1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type2AppleTea</span> <span class="keyword">implements</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è‹¹æœèŒ¶ç±»å‹2&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">extends</span> <span class="title class_ inherited__">FruitFactory</span> &#123;</span><br><span class="line">  <span class="title function_">taste</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è‹¹æœå¾ˆç”œ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">createTea</span>(<span class="attr">type</span>: <span class="built_in">string</span>): <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">type</span> == <span class="string">&quot;appleTeaType1&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type1AppleTea</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">type</span> == <span class="string">&quot;appleTeaType1&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type2AppleTea</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type1AppleTea</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitStore</span> &#123;</span><br><span class="line">  <span class="attr">factory</span>: <span class="title class_">FruitFactory</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">factory: FruitFactory</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">factory</span> = factory;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">makeFruitTea</span>(<span class="params"><span class="keyword">type</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">factory</span>.<span class="title function_">createTea</span>(<span class="string">&quot;type1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">orderTea</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tea = <span class="variable language_">this</span>.<span class="title function_">makeFruitTea</span>(<span class="string">&quot;type1&quot;</span>);</span><br><span class="line">    tea.<span class="title function_">name</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  å…¬ç”¨çš„èŒ¶çš„åˆ¶ä½œæ–¹æ³•</span></span><br><span class="line">  <span class="comment">//  ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">FruitStore</span>(<span class="keyword">new</span> <span class="title class_">Apple</span>());</span><br><span class="line">store.<span class="title function_">orderTea</span>();</span><br></pre></td></tr></table></figure>

<p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªçš„ï¼Œå·¥å‚æ–¹æ³•è®©ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚</strong></p>
<p>ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å·¥å‚æ˜¯å¤–éƒ¨ä¼ å…¥ï¼Œå¯ä»¥åˆ›å»ºä¸åŒç±»å‹çš„èŒ¶ï¼Œä½†æ˜¯èŒ¶çš„åˆ¶ä½œè¡Œä¸ºæ›´åƒæ˜¯ Store çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åšä¸€ç‚¹æ”¹å˜ã€‚</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ª Store çš„æŠ½è±¡ç±»ï¼Œæ‰€æœ‰çš„ Store éƒ½è¦å®ç°è¿™ä¸ªæŠ½è±¡ç±»ã€‚</li>
<li>åœ¨ Store æŠ½è±¡ç±»ä¸­å®šä¹‰ createTea çš„æŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å†…å®¹å°±æ˜¯ä¹‹å‰å¤–éƒ¨ä¼ å…¥çš„å·¥å‚ã€‚</li>
<li>æ¢å¥è¯è¯´ï¼Œ å·¥å‚æ–¹æ³•è½¬ç§»åˆ°å­ç±»ä¸­å®ç°</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type1AppleTea</span> <span class="keyword">implements</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è‹¹æœèŒ¶ç±»å‹1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type2AppleTea</span> <span class="keyword">implements</span> <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">  <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è‹¹æœèŒ¶ç±»å‹2&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">FruitStore</span> &#123;</span><br><span class="line">  <span class="keyword">abstract</span> <span class="title function_">createTea</span>(<span class="attr">type</span>: <span class="built_in">string</span>): <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AppleFruitStore</span> <span class="keyword">extends</span> <span class="title class_ inherited__">FruitStore</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">createTea</span>(<span class="attr">type</span>: <span class="built_in">string</span>): <span class="title class_">AppleTea</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">type</span> == <span class="string">&quot;type1&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type1AppleTea</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">type</span> == <span class="string">&quot;type2&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type2AppleTea</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Type1AppleTea</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">orderTea</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tea = <span class="variable language_">this</span>.<span class="title function_">createTea</span>(<span class="string">&quot;type1&quot;</span>);</span><br><span class="line">    tea.<span class="title function_">name</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">AppleFruitStore</span>();</span><br><span class="line">store.<span class="title function_">orderTea</span>();</span><br></pre></td></tr></table></figure>

<p><strong>æ‰€æœ‰çš„å·¥å‚æ¨¡å¼éƒ½æ˜¯ç”¨æ¥å°è£…å¯¹è±¡åˆ›å»ºçš„ã€‚</strong>ï¼Œ <strong>åˆ›å»ºè€…ç±»</strong> éœ€è¦æœ‰ä¸€ä¸ªæŠ½è±¡åˆ›å»ºè€…ç±»ï¼Œå®šä¹‰äº†ä¸€ä¸ª<strong>æŠ½è±¡å·¥å‚æ–¹æ³•</strong>ï¼Œæ‰€æœ‰å®ç°äº†æŠ½è±¡åˆ›å»ºè€…ç±»çš„å­ç±»ï¼Œéƒ½å¯ä»¥ç”¨è‡ªå·±å®ç°çš„å·¥å‚æ–¹æ³•ç”Ÿäº§äº§å“ã€‚<strong>äº§å“ç±»</strong> æ˜¯åœ¨åˆ›å»ºè€…å®ä¾‹çš„å·¥å‚æ–¹æ³•ä¸­åˆ›å»ºå‡ºæ¥çš„ã€‚</p>
<h4 id="ä¾èµ–å€’ç½®ä¸æŠ½è±¡å·¥å‚"><a href="#ä¾èµ–å€’ç½®ä¸æŠ½è±¡å·¥å‚" class="headerlink" title="ä¾èµ–å€’ç½®ä¸æŠ½è±¡å·¥å‚"></a>ä¾èµ–å€’ç½®ä¸æŠ½è±¡å·¥å‚</h4><p><strong>ä¾èµ–å€’ç½®åŸåˆ™ï¼šè¦ä¾èµ–æŠ½è±¡ï¼Œä¸è¦ä¾èµ–å…·ä½“ç±»</strong>ï¼Œè¿™å¥è¯å¾ˆåƒæ˜¯è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ç±»ã€‚æ²¡é”™ï¼Œä½†æ˜¯è¿™å¥è¯æ›´å¼ºè°ƒï¼Œé«˜å±‚çš„ç»„ä»¶ä¸åº”è¯¥ä¾èµ–ä½å±‚çš„ç»„ä»¶ï¼Œè€Œæ˜¯åº”è¯¥ä¸¤è€…éƒ½ä¾èµ–äº <strong>æŠ½è±¡</strong>ã€‚æŠ½è±¡å¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ã€‚</p>
<p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“ç±»</strong>ã€‚</p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><ul>
<li>å½“åªæœ‰ä¸€ä¸ªåˆ›å»ºè€…ç±»çš„æ—¶å€™æ˜¯å¦åº”è¯¥ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå·¥å‚æ¨¡å¼è®©ä½ ä¾¿äºæ‰©å±•ï¼Œå¹¶å°†äº§å“ç±»çš„åˆ›å»ºä¸ä½¿ç”¨è§£è€¦ã€‚</li>
<li>æ‰€æœ‰çš„å·¥å‚éƒ½æ˜¯ç”¨æ¥å°è£…å¯¹è±¡çš„åˆ›å»º</li>
<li>ç®€å•å·¥å‚ï¼Œè™½ç„¶ä¸æ˜¯çœŸæ­£çš„è®¾è®¡æ¨¡å¼ï¼Œä½†ä»ä¸å¤±ä¸ºä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å®¢æˆ·ç¨‹åºä»å…·ä½“ç±»è§£è€¦ã€‚</li>
<li>å·¥å‚æ–¹æ³•ä½¿ç”¨ç»§æ‰¿:æŠŠå¯¹è±¡çš„åˆ›å»ºå§”æ‰˜ç»™å­ç±»ï¼Œå­ç±»å®ç°å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li>
<li>æŠ½è±¡å·¥å‚ä½¿ç”¨å¯¹è±¡ç»„åˆ:å¯¹è±¡çš„åˆ›å»ºè¢«å®ç°åœ¨å·¥å‚æ¥å£æ‰€æš´éœ²å‡ºæ¥çš„æ–¹æ³•ä¸­</li>
<li>æ‰€æœ‰å·¥å‚æ¨¡å¼éƒ½é€šè¿‡å‡å°‘åº”ç”¨ç¨‹åºå’Œå…·ä½“ç±»ä¹‹é—´çš„ä¾èµ–ä¿ƒè¿›æ¾è€¦åˆã€‚</li>
<li>å·¥å‚æ–¹æ³•å…è®¸ç±»å°†å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œã€‚</li>
<li>æŠ½è±¡å·¥å‚åˆ›å»ºç›¸å…³çš„å¯¹è±¡å®¶æ—ï¼Œè€Œä¸éœ€è¦ä¾èµ–å®ƒä»¬çš„å…·ä½“ç±»ã€‚</li>
<li>ä¾èµ–å€’ç½®åŸåˆ™ï¼ŒæŒ‡å¯¼æˆ‘ä»¬é¿å…ä¾èµ–å…·ä½“ç±»å‹ï¼Œè€Œè¦å°½é‡ä¾èµ–æŠ½è±¡ã€‚</li>
<li>å·¥å‚æ˜¯å¾ˆæœ‰å¨åŠ›çš„æŠ€å·§ï¼Œå¸®åŠ©æˆ‘ä»¬é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œè€Œä¸è¦é’ˆå¯¹å…·ä½“ç±»ç¼–ç¨‹ã€‚</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-design/pattern/â‘¡è§‚å¯Ÿè€…æ¨¡å¼"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/22f2c2b24324/"
    >â‘¡å‘å¸ƒ+è®¢é˜…=è§‚å¯Ÿè€…æ¨¡å¼</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/22f2c2b24324/" class="article-date">
  <time datetime="2022-12-27T04:49:16.000Z" itemprop="datePublished">2022-12-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="åƒå¹¿æ’­ä¸€æ ·å‘æ¶ˆæ¯"><a href="#åƒå¹¿æ’­ä¸€æ ·å‘æ¶ˆæ¯" class="headerlink" title="åƒå¹¿æ’­ä¸€æ ·å‘æ¶ˆæ¯"></a>åƒå¹¿æ’­ä¸€æ ·å‘æ¶ˆæ¯</h4><p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œå¦ä¸€ä¸ªäºº<strong>A</strong>,ä¸çŸ¥é“ä½ è¿™ä¸ªäººçš„å­˜åœ¨ï¼Œä½†æ˜¯å´å¯ä»¥ç»™ä½ å‘æ¶ˆæ¯ã€‚A å°±åƒæ˜¯ä¸€ä¸ªå¹¿æ’­ç«™ä¸€æ ·ï¼Œå°†ä½ ä»¬è”ç³»åœ¨ä¸€èµ·çš„å°±æ˜¯æ‰‹ä¸­çš„æ”¶éŸ³æœºï¼Œä½ ç­‰å¾…ç€ A å‘å¸ƒæ¶ˆæ¯ï¼Œè€Œä½ ç­‰å¾…æ¶ˆæ¯å°±æ˜¯ä¸€ä¸ªè®¢é˜…çš„è¡Œä¸ºã€‚</p>
<p>æˆ–è€…æ¢ä¸€ç§è¯´æ³•ï¼Œä½ å°±åƒæ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…ä¸€æ ·ï¼Œè§‚å¯Ÿæ¶ˆæ¯æœ‰æ²¡æœ‰åˆ°æ¥ã€‚æ— è®ºå“ªç§å®šä¹‰æ— ééƒ½æ˜¯åœ¨æè¿°ä¸€ç§å…³ç³»ï¼Œæ¥å—æ¶ˆæ¯è€…å’Œå‘é€æ¶ˆæ¯è€…ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>ä¸‹é¢è¦å®ç°ä¸€ä¸ªæ–°é—»å¹¿æ’­ç«™ï¼Œæ¯å½“æœ‰æ–°çš„æ–°é—»ï¼Œä¼šè°ƒç”¨æ–°é—»å¯¹è±¡çš„<code>broadcastNews</code>,å¹¶å‘è§‚å¯Ÿè€…ä»¬æ¨é€æ¶ˆæ¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªéå¸¸ä¸å¥½çš„å†™æ³•ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">update</span>(message?: &#123; <span class="attr">news</span>: <span class="built_in">string</span>[] &#125;): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsObserver</span> <span class="keyword">implements</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">update</span>(message): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> new1 = <span class="keyword">new</span> <span class="title class_">NewsObserver</span>();</span><br><span class="line"><span class="keyword">const</span> new2 = <span class="keyword">new</span> <span class="title class_">NewsObserver</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Subscribe</span> &#123;</span><br><span class="line">  <span class="title function_">register</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">unregister</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">getWeather</span>(<span class="attr">city</span>: <span class="built_in">string</span>): <span class="title class_">NewsInfo</span>;</span><br><span class="line">  <span class="title function_">notify</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsSubscribe</span> &#123;</span><br><span class="line">  <span class="title function_">getNews</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;è·å–åˆ°æ–°é—»&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">broadcastNews</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> news = <span class="variable language_">this</span>.<span class="title function_">getNews</span>();</span><br><span class="line">    new1.<span class="title function_">update</span>(news);</span><br><span class="line">    new2.<span class="title function_">update</span>(news);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newsSubscribe = <span class="keyword">new</span> <span class="title class_">NewsSubscribe</span>();</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•å­˜åœ¨ç€å¾ˆå¤šä¸¥é‡çš„é—®é¢˜ï¼š</p>
<ul>
<li>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…ç´§è€¦åˆåœ¨äº†ä¸€èµ·</li>
<li>æ²¡åŠæ³•åœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤è§‚å¯Ÿè€…</li>
<li>è§‚å¯Ÿè€…æ˜¯ä¼šåŠ¨æ€å˜åŒ–çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰ç‹¬ç«‹ä¸”å°è£…</li>
</ul>
<h4 id="è®¾è®¡è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è®¾è®¡è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è®¾è®¡è§‚å¯Ÿè€…æ¨¡å¼"></a>è®¾è®¡è§‚å¯Ÿè€…æ¨¡å¼</h4><p>é¦–å…ˆæˆ‘ä»¬è®©è¢«è§‚å¯Ÿè€…æœ‰æ³¨å†Œè§‚å¯Ÿè€…å’Œå–æ¶ˆæ³¨å†Œè§‚å¯Ÿè€…çš„èƒ½åŠ›ã€‚è¿™æ ·èƒ½è®©è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…è§£è€¦ï¼Œå¹¶åœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™åŠ¨æ€çš„æ·»åŠ æˆ–åˆ é™¤ã€‚</p>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NewsSubscribe</span> <span class="keyword">implements</span> <span class="title class_">Subscribe</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">observerList</span>: <span class="title class_">Observer</span>[];</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span> = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">register</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">push</span>(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">unregister</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">indexOf</span>(observer);</span><br><span class="line">    <span class="keyword">if</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">notify</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">observer</span>) =&gt;</span> &#123;</span><br><span class="line">      observer.<span class="title function_">update</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¢«è§‚å¯Ÿè€…ä¸çŸ¥é“è§‚å¯Ÿè€…çš„ç»†èŠ‚ï¼ŒåªçŸ¥é“è§‚å¯Ÿè€…å®ç°äº†è§‚å¯Ÿè€…æ¥å£ã€‚</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NewsInfo</span> &#123;</span><br><span class="line">  <span class="attr">news</span>: <span class="built_in">string</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">update</span>(<span class="attr">subscribe</span>: <span class="title class_">NewsSubscribe</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsObserver</span> <span class="keyword">implements</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">update</span>(<span class="attr">subscribe</span>: <span class="title class_">NewsSubscribe</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(subscribe.<span class="title function_">getNews</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> new1 = <span class="keyword">new</span> <span class="title class_">NewsObserver</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Subscribe</span> &#123;</span><br><span class="line">  <span class="title function_">register</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">unregister</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">getNews</span>(<span class="attr">city</span>: <span class="built_in">string</span>): <span class="title class_">NewsInfo</span>;</span><br><span class="line">  <span class="title function_">notify</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsSubscribe</span> <span class="keyword">implements</span> <span class="title class_">Subscribe</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">observerList</span>: <span class="title class_">Observer</span>[];</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span> = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">register</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">push</span>(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">unregister</span>(<span class="attr">observer</span>: <span class="title class_">Observer</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">indexOf</span>(observer);</span><br><span class="line">    <span class="keyword">if</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">notify</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observerList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">observer</span>) =&gt;</span> &#123;</span><br><span class="line">      observer.<span class="title function_">update</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getNews</span>(): <span class="title class_">NewsInfo</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">news</span>: [<span class="string">&quot;æ–°é—»&quot;</span>],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newsSubscribe = <span class="keyword">new</span> <span class="title class_">NewsSubscribe</span>();</span><br><span class="line">newsSubscribe.<span class="title function_">register</span>(<span class="keyword">new</span> <span class="title class_">NewsObserver</span>());</span><br><span class="line">newsSubscribe.<span class="title function_">register</span>(<span class="keyword">new</span> <span class="title class_">NewsObserver</span>());</span><br><span class="line"></span><br><span class="line">newsSubscribe.<span class="title function_">notify</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥ä¸ºè§‚å¯Ÿè€…æ¨¡å¼è®¾ç½® <code>setChanged</code>  <code>hasChanged</code> æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å¯ä»¥æ§åˆ¶é€šçŸ¥çš„æ¡ä»¶ï¼Œé¿å…é€šçŸ¥çš„é¢‘ç‡è¿‡é«˜</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ä¸»é¢˜ (ä¹Ÿå°±æ˜¯å¯è§‚å¯Ÿè€…) ç”¨å…±åŒçš„æ¥å£æ¥æ›´æ–°è§‚å¯Ÿè€…</li>
<li>è§‚å¯Ÿè€…å’Œå¯è§‚å¯Ÿè€…ä¹‹é—´ç”¨æ¾è€¦åˆæ–¹å¼ç»“åˆ (loosecoupling)ï¼Œå¯è§‚å¯Ÿè€…ä¸çŸ¥é“è§‚å¯Ÿè€…çš„ç»†èŠ‚ï¼ŒåªçŸ¥é“è§‚å¯Ÿè€…å®ç°äº†è§‚å¯Ÿè€…æ¥å£ã€‚<br>æœ‰å¼¹</li>
<li>ä½¿ç”¨æ­¤æ¨¡å¼æ—¶ï¼Œä½ å¯ä»è¢«è§‚å¯Ÿè€…å¤„æ¨ (push)æˆ–æ‹‰ (pul1)æ•°æ®(ç„¶è€Œï¼Œæ¨çš„æ–¹å¼è¢«è®¤ä¸ºæ›´â€œæ­£ç¡®â€)ã€‚</li>
<li>æœ‰å¤šä¸ªè§‚å¯Ÿè€…æ—¶ï¼Œä¸å¯ä»¥ä¾èµ–ç‰¹å®šçš„é€šçŸ¥æ¬¡åº</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-design/pattern/â‘ ç­–ç•¥æ¨¡å¼"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/0c95a2f8f35a/"
    >â‘ ä»ç»§æ‰¿ä¸­è§£è„±-ç­–ç•¥æ¨¡å¼</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/0c95a2f8f35a/" class="article-date">
  <time datetime="2022-12-27T04:49:16.000Z" itemprop="datePublished">2022-12-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="ç»§æ‰¿çœŸçš„åˆç†ä¹ˆ"><a href="#ç»§æ‰¿çœŸçš„åˆç†ä¹ˆ" class="headerlink" title="ç»§æ‰¿çœŸçš„åˆç†ä¹ˆ"></a>ç»§æ‰¿çœŸçš„åˆç†ä¹ˆ</h4><p>æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªæ±½è½¦ç±»ï¼Œä½ ç”¨å®ƒåˆ›é€ äº†å¾ˆå¤šæ±½è½¦ï¼Œä»–ä»¬éƒ½è·‘åœ¨è™šæ‹Ÿæ¸¸æˆä¸–ç•Œé‡Œé¢ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CarSuper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¿«å¿«è·‘&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">blow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ»´æ»´å«&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> benz = <span class="keyword">new</span> <span class="title class_">CarSuper</span>();</span><br><span class="line"><span class="keyword">const</span> bmw = <span class="keyword">new</span> <span class="title class_">CarSuper</span>();</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ±½è½¦éƒ½æ˜¯ <code>å¿«å¿«è·‘</code> ï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±çš„æé™é€Ÿåº¦ï¼Œæ‰€ä»¥ä½ å¾ˆå®¹æ˜“æƒ³åˆ°åº”è¯¥æœ‰ä¸€ä¸ªå­ç±»ï¼Œè®©å­ç±»å»å®ç°ç‰¹æœ‰æ–¹æ³•ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Benz</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CarSuper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é£é€Ÿè·‘&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> benz = <span class="keyword">new</span> <span class="title class_">Benz</span>();</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å·²ç»åœ¨ç»§æ‰¿ä¸­ä½“ä¼šåˆ°äº†å¥½å¤„ï¼Œçªç„¶æœ‰ä¸€å¤©ï¼Œä½ è§‰å¾—åˆ›é€ å‡ºæ¥çš„æ±½è½¦åº”è¯¥å¯ä»¥è½½äººï¼Œè¿™æ­£æ˜¯ä½ æ“…é•¿çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸å‡æ€ç´¢çš„åœ¨ <code>CarSuper</code>ç±»ä¸Šæ·»åŠ äº† <code>carrying</code> å…¬ç”¨æ–¹æ³•,å¹¶å¼€å¿ƒçš„ç¡è§‰å»äº†ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CarSuper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¿«å¿«è·‘&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">blow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ»´æ»´å«&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">carrying</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒå¤©èµ·æ¥ï¼Œä½ ä¸æ•¢ç›¸ä¿¡è‡ªå·±çš„çœ¼ç›ï¼Œä¸€ä½ä¹˜å®¢ä¸Šäº†ä¸€è¾†ç©å…·è½¦ï¼Œæ‰€ä»¥ä½ èµ¶ç´§å…³åœäº†æ¸¸æˆæœåŠ¡ã€‚å¹¶ç´§æ€¥çš„æ€è€ƒå¯¹ç­–ï¼Œæ˜¾ç„¶è½½äººçš„è¡Œä¸ºå¹¶ä¸é€šç”¨ï¼Œæ¯ä¸€ä¸ªä¸èƒ½è½½äººçš„è½¦ï¼Œéƒ½éœ€è¦é‡å†™è½½äººçš„æ–¹æ³•ï¼Œä¾‹å¦‚ç©å…·è½¦ã€‚</p>
<p>å…¶å®ä½ è¿˜æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œæ—¢ç„¶è½½äººçš„æ–¹æ³•ä¸é€šç”¨ï¼Œä¸å¦‚æŠŠç±»ä¼¼è½½äººè¿™æ ·çš„åŠŸèƒ½çœ‹ä½œæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¯ä¸€ä¸ªå­ç±»éƒ½éœ€è¦å®ç°è¿™ä¸ªæ¥å£</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Carrying</span> &#123;</span><br><span class="line">  <span class="attr">carrying</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Benz</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CarSuper</span> <span class="keyword">implements</span> <span class="title class_">Carrying</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é£é€Ÿè·‘&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">carrying</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ‹‰å•†äºº&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ï¼Œ<strong>æ¥å£ä¸å…·æœ‰å®ç°ä»£ç </strong>ï¼Œè™½ç„¶å­ç±»è‡ªå·±å®ç°å¢åŠ äº†çµæ´»æ€§ï¼Œä½†å´ä½¿å­ç±»æ˜¾çš„éå¸¸å†—ä½™ï¼Œæ¯ä¸€ä¸ªå­ç±»åé¢éƒ½è·Ÿç€ä¸€ä¸²å„ä¸ç›¸åŒä¸”éœ€è¦ç‹¬ç«‹å®ç°çš„æ¥å£ã€‚</p>
<blockquote>
<p>ä¸ºäº†å¤ç”¨è€Œæ˜¯ç”¨ç»§æ‰¿å¯èƒ½æ˜¯å¯¼è‡´éš¾ä»¥ç»´æŠ¤<br>  æ¯”å¦‚ä¸Šé¢çš„ç©å…·è½¦å¯ä»¥è½½äººï¼Œæ˜¯å› ä¸ºæ²¡æœ‰é‡å†™å­ç±»è½½äººçš„æ–¹æ³•ã€‚</p>
</blockquote>
<h4 id="æ‰¾åˆ°å˜åŒ–ä¹‹å¤„"><a href="#æ‰¾åˆ°å˜åŒ–ä¹‹å¤„" class="headerlink" title="æ‰¾åˆ°å˜åŒ–ä¹‹å¤„"></a>æ‰¾åˆ°å˜åŒ–ä¹‹å¤„</h4><p>ç±»çš„è¡Œä¸ºåœ¨ä¸æ–­æ”¹å˜ï¼Œæ‰€ä»¥ä¸€æ—¦æŠŠè¿™ä¸ªè¡Œä¸ºå˜æˆç±»çš„ä¸€éƒ¨åˆ†ï¼Œå°±éœ€è¦å¤§é‡çš„ç»å†å»è·Ÿè¸ªè¿™äº›è¡Œä¸ºä¼šåœ¨é‚£é‡Œé€ æˆå½±å“ï¼Œæœ‰ä¸€ä¸ªåŸåˆ™èƒ½å¸®åŠ©æˆ‘ä»¬ <strong>â¤â€ğŸ”¥ æŠŠå˜åŒ–çš„å†…å®¹ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œç¨³å®šçš„ä»£ç æ··åœ¨ä¸€èµ·</strong></p>
<p>ç°åœ¨å°±å¯ä»¥ç€æ‰‹äºå°†è½½äººçš„è¡Œä¸ºåˆ†ç¦»å‡ºæ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡Œä¸ºåº”è¯¥ä»¥å“ªç§å½¢å¼å­˜åœ¨å‘¢ï¼Œæ–¹æ³•ï¼Œç±»ï¼Œè¿˜æ˜¯å¯¹è±¡ï¼Ÿ å…¶å®ä¸€è°ˆåˆ°è®¾è®¡æ¨¡å¼ç»•ä¸å¼€çš„å°±æ˜¯ OO(é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼)ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨ OO çš„æ€æƒ³ï¼Œä½¿ç”¨ç±»æ¥å®ç°è¿™ä¸ªè¡Œä¸ºã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">CarryingBehavior</span> &#123;</span><br><span class="line">  <span class="attr">carrying</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BusinessCarrying</span> <span class="keyword">implements</span> <span class="title class_">CarryingBehavior</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">carrying</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è½½å•†äºº&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ToyCarrying</span> <span class="keyword">implements</span> <span class="title class_">CarryingBehavior</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">carrying</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è½½ç©å…·&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarSuper</span> &#123;</span><br><span class="line">  <span class="keyword">protected</span> <span class="attr">carryingBehavior</span>: <span class="title class_">CarryingBehavior</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">&#123; carryingBehavior &#125;: &#123; carryingBehavior: CarryingBehavior &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">carryingBehavior</span> = carryingBehavior;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">blow</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">carrying</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">carryingBehavior</span>.<span class="title function_">carrying</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">setCarryingBehavior</span>(<span class="params">behavior: CarryingBehavior</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">carryingBehavior</span> = behavior;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Benz</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CarSuper</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(&#123;</span><br><span class="line">      <span class="attr">carryingBehavior</span>: <span class="keyword">new</span> <span class="title class_">BusinessCarrying</span>(),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é£é€Ÿè·‘&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> benz = <span class="keyword">new</span> <span class="title class_">Benz</span>();</span><br><span class="line">benz.<span class="title function_">carrying</span>();</span><br><span class="line">benz.<span class="title function_">setCarryingBehavior</span>(<span class="keyword">new</span> <span class="title class_">ToyCarrying</span>());</span><br><span class="line">benz.<span class="title function_">carrying</span>();</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†æ±½è½¦çš„è¡Œä¸ºæŠ½è±¡ä¸º <code>BusinessCarrying</code> ç±»ï¼ŒæŠ½è±¡ä¸ºç±»å’ŒæŠ½è±¡ä¸ºæ¥å£çš„åŒºåˆ«å°±æ˜¯<strong>åˆ†ç¦»äº†å®ç°</strong>ã€‚</p>
<p>è€Œ <code>BusinessCarrying</code> ç±»æœ‰è‡ªå·±çš„è¡Œä¸ºç±»æ¥å£ï¼Œå¯å°±ä¿è¯äº†è¡Œä¸ºç±»çš„çµæ´»æ€§ï¼Œä¸ºç›¸åŒçš„è¡Œä¸ºå®ç°ä¸åŒçš„æ•ˆæœï¼Œä¾‹å¦‚æ±½è½¦è½½äººååœ¨å‰æ’è¿˜æ˜¯åæ’ã€‚</p>
<p>é€šè¿‡ä¸Šé¢çš„æ”¹é€ ï¼Œåªéœ€è¦è®©æ±½è½¦ç±»æä¾›ä¸€ä¸ªèƒ½è®¾ç½®è¡Œä¸ºçš„æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°è¡Œä¸ºçš„åŠ¨æ€åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å¦ä¸€ä¸ªè®¾è®¡åŸåˆ™ <strong>â¤â€ğŸ”¥ é’ˆå¯¹æ¥å£ï¼Œè€Œä¸æ˜¯å®ç°ç¼–ç¨‹</strong>ã€‚ </p>
<blockquote>
<p>è¿™æ ·çš„è¯å’Œç§æœ‰æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ è¡Œä¸ºæ˜¯å¯æŠ½è±¡çš„ï¼Œæ˜¯å¯ä»¥è¢«ç©·ä¸¾çš„ï¼Œä»–ä¼šåŠ¨æ€çš„æ•£å¸ƒåœ¨å„ç§å„æ ·çš„æ±½è½¦å­ç±»ä¸­ã€‚è€Œç§æœ‰æ–¹æ³•æ˜¯æ— æ³•è¢«ç©·ä¸¾çš„ï¼Œä¸€æ—¦å®šä¹‰ä¸€ä¸ªæ–°çš„å­ç±»ï¼Œé‚£ä¹ˆä»–å°±æœ‰è‡ªå·±çš„ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§ã€‚</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬åˆ†ç¦»äº†ä¸€ç§è¡Œä¸ºç±»ï¼Œåœ¨å…±æœ‰ç±»ä¸­è¢«å£°æ˜ä½†ä¸ä¼šå®ç°ï¼Œè€Œæ˜¯åœ¨å­ç±»ä¸­å®ä¾‹åŒ–è¿™ä¸ªè¡Œä¸ºç±»ï¼Œè¿™å…¶ä¸­çš„åŸåˆ™å°±æ˜¯ <strong>â¤â€ğŸ”¥ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿</strong>ï¼Œ å·§åˆçš„æ˜¯ React å“²å­¦ä¸­ä¹Ÿæåˆ°äº†è¿™æ ·çš„æ€æƒ³ã€‚</p>
<p>æœ€åç”¨å®˜æ–¹è¯­è¨€å®šä¹‰ç­–ç•¥æ¨¡å¼ï¼š <strong>å®šä¹‰ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œè®©ç®—æ³•çš„å˜æ¢ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·</strong></p>
<ul>
<li>çŸ¥é“OOåŸºç¡€ï¼Œå¹¶ä¸è¶³ä»¥è®©ä½ è®¾è®¡å‡ºè‰¯å¥½çš„OOç³»ç»Ÿã€‚</li>
<li>è‰¯å¥½çš„OOè®¾è®¡å¿…é¡»å…·å¤‡å¯å¤ç”¨ã€å¯æ‰©å……ã€å¯ç»´æŠ¤ä¸‰ä¸ªç‰¹æ€§ã€‚</li>
<li>æ¨¡å¼å¯ä»¥è®©æˆ‘ä»¬å»ºé€ å‡ºå…·æœ‰è‰¯å¥½OOè®¾è®¡è´¨é‡çš„ç³»ç»Ÿã€‚</li>
<li>æ¨¡å¼è¢«è®¤ä¸ºæ˜¯å†ç»éªŒè¯çš„O0è®¾è®¡ç»éªŒã€‚</li>
<li>æ¨¡å¼ä¸æ˜¯ä»£ç ï¼Œè€Œæ˜¯é’ˆå¯¹è®¾è®¡é—®é¢˜çš„é€šç”¨è§£å†³æ–¹æ¡ˆã€‚ä½ å¯æŠŠå®ƒä»¬åº”ç”¨åˆ°ç‰¹å®šçš„åº”ç”¨ä¸­ã€‚</li>
<li>æ¨¡å¼ä¸æ˜¯è¢«å‘æ˜ï¼Œè€Œæ˜¯è¢«å‘ç°ã€‚</li>
<li>å¤§å¤šæ•°çš„æ¨¡å¼å’ŒåŸåˆ™ï¼Œéƒ½ç€çœ¼äºè½¯ä»¶å˜åŒ–çš„ä¸»é¢˜ã€‚</li>
<li>å¤§å¤šæ•°çš„æ¨¡å¼éƒ½å…è®¸ç³»ç»Ÿå±€éƒ¨æ”¹å˜ç‹¬ç«‹äºå…¶ä»–éƒ¨åˆ†ã€‚</li>
<li>æˆ‘ä»¬å¸¸æŠŠç³»ç»Ÿä¸­ä¼šå˜åŒ–çš„éƒ¨åˆ†æŠ½å‡ºæ¥å°è£…ã€‚</li>
<li>æ¨¡å¼è®©å¼€å‘äººå‘˜ä¹‹é—´æœ‰å…±äº«çš„è¯­è¨€ï¼Œèƒ½å¤Ÿæœ€å¤§åŒ–æ²Ÿé€šçš„ä»·å€¼ã€‚</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-webpack/webpackæ‰§è¡Œæµç¨‹"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/7a682c5de361/"
    >webpackæ‰§è¡Œæµç¨‹</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/7a682c5de361/" class="article-date">
  <time datetime="2022-11-15T01:50:56.000Z" itemprop="datePublished">2022-11-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="ä¸»è¦æµç¨‹"><a href="#ä¸»è¦æµç¨‹" class="headerlink" title="ä¸»è¦æµç¨‹"></a>ä¸»è¦æµç¨‹</h3><ul>
<li><p>åˆå§‹åŒ–é˜¶æ®µï¼ˆInitializationï¼‰:</p>
<p>è§£æé…ç½®ï¼šWebpack å¼€å§‹å¤„ç†é…ç½®æ–‡ä»¶ï¼ˆå¦‚ webpack.config.jsï¼‰ï¼ŒåŒ…æ‹¬è§£æå…¥å£ç‚¹ã€åŠ è½½å™¨ã€æ’ä»¶ç­‰ã€‚<br>åˆå§‹åŒ–æ’ä»¶ï¼šåŠ è½½å¹¶åˆå§‹åŒ–é…ç½®ä¸­æŒ‡å®šçš„æ’ä»¶ã€‚<br>ç¯å¢ƒå‡†å¤‡ï¼šè®¾ç½®ç¼–è¯‘ç¯å¢ƒï¼Œä¾‹å¦‚é€‰æ‹©å¼€å‘æ¨¡å¼æˆ–ç”Ÿäº§æ¨¡å¼ã€‚</p>
</li>
<li><p>ç¼–è¯‘é˜¶æ®µï¼ˆCompilationï¼‰:</p>
<p>åˆ›å»ºç¼–è¯‘å™¨ï¼šWebpack åˆ›å»ºä¸€ä¸ªç¼–è¯‘å™¨å®ä¾‹ï¼Œå®ƒç®¡ç†æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ã€‚<br>åˆ›å»ºç¼–è¯‘å¯¹è±¡ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç¼–è¯‘å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ­¤æ¬¡ç¼–è¯‘çš„æ‰€æœ‰ç»†èŠ‚ã€‚<br>è¯»å–è®°å½•ï¼šä»ä¹‹å‰çš„ç¼–è¯‘ä¸­è¯»å–è®°å½•ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œä»¥ä¼˜åŒ–ç¼–è¯‘ã€‚<br>è§£æå…¥å£ï¼šæ ¹æ®é…ç½®çš„å…¥å£ç‚¹ï¼Œåˆ†æå‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</p>
</li>
<li><p>æ„å»ºé˜¶æ®µï¼ˆBuildingï¼‰:</p>
<p>åŠ è½½æ¨¡å—ï¼šWebpack é€’å½’åœ°åŠ è½½æ¯ä¸ªä¾èµ–æ¨¡å—ï¼Œè¿™å¯èƒ½æ¶‰åŠåˆ°ä½¿ç”¨ä¸åŒçš„åŠ è½½å™¨å¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶ã€‚<br>æ¨¡å—è½¬æ¢ï¼šåº”ç”¨åŠ è½½å™¨å’Œæ’ä»¶ï¼Œè½¬æ¢æ¨¡å—å†…å®¹ï¼ˆå¦‚ TS è½¬ JSï¼ŒSASS è½¬ CSSï¼‰ã€‚<br>æ„å»ºä¾èµ–å›¾ï¼šæ„å»ºæ¨¡å—é—´çš„ä¾èµ–å…³ç³»å›¾ã€‚</p>
</li>
<li><p>ä¼˜åŒ–é˜¶æ®µï¼ˆOptimizationï¼‰:</p>
<p>ä¼˜åŒ–æ¨¡å—ï¼šåº”ç”¨å„ç§ä¼˜åŒ–ç­–ç•¥ï¼Œä»¥å‡å°æœ€ç»ˆèµ„äº§çš„å¤§å°ã€‚<br>ä»£ç åˆ†å‰²ï¼šæ ¹æ®éœ€è¦å°†ä»£ç åˆ†å‰²æˆä¸åŒçš„å—ã€‚<br>æ ‘æ‘‡ï¼ˆTree Shakingï¼‰ï¼šç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚</p>
</li>
<li><p>è¾“å‡ºé˜¶æ®µï¼ˆOutputï¼‰:</p>
<p>ç”Ÿæˆèµ„äº§ï¼šæ ¹æ®ä¾èµ–å›¾ï¼ŒWebpack å°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…æˆ<br>å°‘é‡çš„æ‰“åŒ…æ–‡ä»¶ï¼ˆèµ„äº§ï¼‰ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª JavaScript æ–‡ä»¶ã€CSS æ–‡ä»¶å’Œå…¶ä»–é™æ€èµ„æºæ–‡ä»¶ã€‚</p>
</li>
<li><p>è¾“å‡ºèµ„æºï¼šå°†ç”Ÿæˆçš„æ‰“åŒ…æ–‡ä»¶å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œé€šå¸¸æ˜¯è¾“å‡ºåˆ°æŒ‡å®šçš„ dist ç›®å½•ã€‚</p>
<p>å®Œæˆé˜¶æ®µï¼ˆCompletionï¼‰:<br>æ‰§è¡Œæ’ä»¶ï¼šæ‰§è¡Œå„ç§æ’ä»¶çš„å®Œæˆé’©å­ï¼Œå®Œæˆé¢å¤–çš„ä»»åŠ¡æˆ–æ¸…ç†å·¥ä½œã€‚<br>è¾“å‡ºç»“æœï¼šWebpack æä¾›ç¼–è¯‘è¿‡ç¨‹çš„æ‘˜è¦å’Œè¯¦æƒ…ï¼Œå¦‚ç¼–è¯‘æ—¶é—´ã€æ‰“åŒ…åçš„æ–‡ä»¶å¤§å°ç­‰ã€‚<br>ç›‘å¬æ¨¡å¼ï¼šå¦‚æœå¯ç”¨äº†ç›‘å¬æ¨¡å¼ï¼ˆwatch modeï¼‰ï¼ŒWebpack å°†ä¿æŒæ´»è·ƒçŠ¶æ€ï¼Œå¹¶åœ¨æºæ–‡ä»¶æ›´æ”¹æ—¶é‡æ–°ç¼–è¯‘ã€‚<br>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒWebpack é€šè¿‡å…¶å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿå’ŒåŠ è½½å™¨æœºåˆ¶ï¼Œæä¾›äº†é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œå…è®¸å¼€å‘äººå‘˜é’ˆå¯¹ä¸åŒçš„éœ€æ±‚å’Œåœºæ™¯è¿›è¡Œå®šåˆ¶å’Œä¼˜åŒ–ã€‚</p>
</li>
</ul>
<h3 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h3><h4 id="cli-run"><a href="#cli-run" class="headerlink" title="cli.run"></a>cli.run</h4><p>ä½¿ç”¨ commander å¤„ç†å‘½ä»¤è¡Œå‚æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å†™å¼‚å¸¸é€€å‡º</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">program</span>.<span class="title function_">exitOverride</span>(<span class="title function_">async</span>(<span class="function">(<span class="params"><span class="keyword">async</span></span>) =&gt;</span> &#123;&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬é€‰é¡¹ ä»¥åŠé€‰é¡¹è§¦å‘æ—¶çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">program</span>.<span class="title function_">option</span>(<span class="string">&quot;--no-color&quot;</span>, <span class="string">&quot;Disable colors on console.&quot;</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">program</span>.<span class="title function_">on</span>(<span class="string">&quot;option:no-color&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šå¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment">// æœ€ç»ˆæ‰§è¡Œwebpack</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">program</span>.<span class="title function_">action</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  compiler = <span class="variable language_">this</span>.<span class="title function_">webpack</span>(config.<span class="property">options</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»º-compiler"><a href="#åˆ›å»º-compiler" class="headerlink" title="åˆ›å»º compiler"></a>åˆ›å»º compiler</h4><blockquote>
<blockquote>
<p>node_modules\webpack\lib\webpack.js</p>
</blockquote>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createCompiler</span> = (<span class="params">rawOptions</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> options = <span class="title function_">getNormalizedWebpackOptions</span>(rawOptions);</span><br><span class="line">  <span class="title function_">applyWebpackOptionsBaseDefaults</span>(options);</span><br><span class="line">  <span class="keyword">const</span> compiler = <span class="keyword">new</span> <span class="title class_">Compiler</span>(options);</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">NodeEnvironmentPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">infrastructureLogging</span>: options.<span class="property">infrastructureLogging</span>,</span><br><span class="line">  &#125;).<span class="title function_">apply</span>(compiler);</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–æ‰€æœ‰çš„æ’ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(options.<span class="property">plugins</span>)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> plugin <span class="keyword">of</span> options.<span class="property">plugins</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> plugin === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        plugin.<span class="title function_">call</span>(compiler, compiler);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (plugin) &#123;</span><br><span class="line">        plugin.<span class="title function_">apply</span>(compiler);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">applyWebpackOptionsDefaults</span>(options);</span><br><span class="line">  compiler.<span class="property">hooks</span>.<span class="property">environment</span>.<span class="title function_">call</span>();</span><br><span class="line">  compiler.<span class="property">hooks</span>.<span class="property">afterEnvironment</span>.<span class="title function_">call</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ³¨å†Œå†…éƒ¨ä¾èµ–æ’ä»¶</span></span><br><span class="line">  <span class="comment">// ExternalsPlugin</span></span><br><span class="line">  <span class="comment">// ChunkPrefetchPreloadPlugin</span></span><br><span class="line">  <span class="comment">// ArrayPushCallbackChunkFormatPlugin</span></span><br><span class="line">  <span class="comment">// EnableChunkLoadingPlugin</span></span><br><span class="line">  <span class="comment">// JsonpChunkLoadingPlugin</span></span><br><span class="line">  <span class="comment">// ImportScriptsChunkLoadingPlugin</span></span><br><span class="line">  <span class="comment">// EnableWasmLoadingPlugin</span></span><br><span class="line">  <span class="comment">// CleanPlugin</span></span><br><span class="line">  <span class="comment">// JavascriptModulesPlugin</span></span><br><span class="line">  <span class="comment">// JsonModulesPlugin</span></span><br><span class="line">  <span class="comment">// AssetModulesPlugin</span></span><br><span class="line">  <span class="comment">// EntryOptionPlugin</span></span><br><span class="line">  <span class="comment">// EntryPlugin</span></span><br><span class="line">  <span class="comment">// RuntimePlugin</span></span><br><span class="line">  <span class="comment">// InferAsyncModulesPlugin</span></span><br><span class="line">  <span class="comment">// DataUriPlugin</span></span><br><span class="line">  <span class="comment">// FileUriPlugin</span></span><br><span class="line">  <span class="comment">// CompatibilityPlugin</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// HarmonyModulesPlugin</span></span><br><span class="line">  <span class="comment">// æ¨¡å—è§£æå’Œç»‘å®šï¼šå®ƒå¸®åŠ© Webpack è§£æå’Œç»‘å®š ES6 æ¨¡å—çš„ import å’Œ export è¯­å¥ï¼Œç¡®ä¿æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»è¢«æ­£ç¡®å¤„ç†ã€‚</span></span><br><span class="line">  <span class="comment">// æ ‘æ‘‡ï¼ˆTree Shakingï¼‰ï¼šè¿™ä¸ªæ’ä»¶æ”¯æŒæ ‘æ‘‡ä¼˜åŒ–ï¼Œå³ç§»é™¤æœªä½¿ç”¨çš„æ¨¡å—æˆ–æ¨¡å—éƒ¨åˆ†ï¼Œä»¥å‡å°æœ€ç»ˆæ‰“åŒ…æ–‡ä»¶çš„å¤§å°ã€‚è¿™æ˜¯é€šè¿‡é™æ€åˆ†æ import å’Œ export è¯­å¥æ¥å®ç°çš„ã€‚</span></span><br><span class="line">  <span class="comment">// ES6 æ¨¡å—çš„åŸç”Ÿæ”¯æŒï¼šç”±äº ES6 æ¨¡å—æ˜¯ JavaScript è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼ŒHarmonyModulesPlugin æä¾›äº†å¯¹è¿™äº›æ¨¡å—çš„åŸç”Ÿæ”¯æŒï¼Œæ— éœ€è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ã€‚</span></span><br><span class="line">  <span class="comment">// ä»£ç åˆ†å‰²å’Œå¼‚æ­¥åŠ è½½ï¼šæ’ä»¶æ”¯æŒåŸºäº ES6 æ¨¡å—çš„ä»£ç åˆ†å‰²å’Œå¼‚æ­¥åŠ è½½ï¼Œè¿™æœ‰åŠ©äºæé«˜å¤§å‹åº”ç”¨çš„æ€§èƒ½ã€‚</span></span><br><span class="line">  <span class="comment">// ä¸å…¶ä»– Webpack ç‰¹æ€§çš„é›†æˆï¼šHarmonyModulesPlugin ä¸ Webpack çš„å…¶ä»–åŠŸèƒ½ï¼ˆå¦‚æ¨¡å—çƒ­æ›¿æ¢ã€ä»£ç å‹ç¼©ç­‰ï¼‰ç´§å¯†é›†æˆã€‚</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// InferAsyncModulesPlugin</span></span><br><span class="line">  <span class="comment">// DataUriPlugin</span></span><br><span class="line">  <span class="comment">// FileUriPlugin</span></span><br><span class="line">  <span class="comment">// CompatibilityPlugin</span></span><br><span class="line">  <span class="comment">// HarmonyModulesPlugin</span></span><br><span class="line">  <span class="comment">// AMDPlugin</span></span><br><span class="line">  <span class="comment">// RequireJsStuffPlugin</span></span><br><span class="line">  <span class="comment">// CommonJsPlugin</span></span><br><span class="line">  <span class="comment">// LoaderPlugin</span></span><br><span class="line">  <span class="comment">// NodeStuffPlugin</span></span><br><span class="line">  <span class="comment">// APIPlugin</span></span><br><span class="line">  <span class="comment">// ExportsInfoApiPlugin</span></span><br><span class="line">  <span class="comment">// WebpackIsIncludedPlugin</span></span><br><span class="line">  <span class="comment">// ConstPlugin</span></span><br><span class="line">  <span class="comment">// UseStrictPlugin</span></span><br><span class="line">  <span class="comment">// RequireIncludePlugin</span></span><br><span class="line">  <span class="comment">// RequireEnsurePlugin</span></span><br><span class="line">  <span class="comment">// RequireContextPlugin</span></span><br><span class="line">  <span class="comment">// ImportPlugin</span></span><br><span class="line">  <span class="comment">// ImportMetaContextPlugin</span></span><br><span class="line">  <span class="comment">// SystemPlugin</span></span><br><span class="line">  <span class="comment">// ImportMetaPlugin</span></span><br><span class="line">  <span class="comment">// URLPlugin</span></span><br><span class="line">  <span class="comment">// DefaultStatsFactoryPlugin</span></span><br><span class="line">  <span class="comment">// DefaultStatsPresetPlugin</span></span><br><span class="line">  <span class="comment">// DefaultStatsPrinterPlugin</span></span><br><span class="line">  <span class="comment">// JavascriptMetaInfoPlugin</span></span><br><span class="line">  <span class="comment">// EnsureChunkConditionsPlugin</span></span><br><span class="line">  <span class="comment">// RemoveEmptyChunksPlugin</span></span><br><span class="line">  <span class="comment">// MergeDuplicateChunksPlugin</span></span><br><span class="line">  <span class="comment">// FlagIncludedChunksPlugin</span></span><br><span class="line">  <span class="comment">// SideEffectsFlagPlugin</span></span><br><span class="line">  <span class="comment">// FlagDependencyExportsPlugin</span></span><br><span class="line">  <span class="comment">// FlagDependencyUsagePlugin</span></span><br><span class="line">  <span class="comment">// InnerGraphPlugin</span></span><br><span class="line">  <span class="comment">// MangleExportsPlugin</span></span><br><span class="line">  <span class="comment">// ModuleConcatenationPlugin</span></span><br><span class="line">  <span class="comment">// SplitChunksPlugin</span></span><br><span class="line">  <span class="comment">// RuntimeChunkPlugin</span></span><br><span class="line">  <span class="comment">// NoEmitOnErrorsPlugin</span></span><br><span class="line">  <span class="comment">// RealContentHashPlugin</span></span><br><span class="line">  <span class="comment">// WasmFinalizeExportsPlugin</span></span><br><span class="line">  <span class="comment">// DeterministicModuleIdsPlugin</span></span><br><span class="line">  <span class="comment">// DeterministicChunkIdsPlugin</span></span><br><span class="line">  <span class="comment">// DefinePlugin</span></span><br><span class="line">  <span class="comment">// SizeLimitsPlugin</span></span><br><span class="line">  <span class="comment">// TemplatedPathPlugin</span></span><br><span class="line">  <span class="comment">// RecordIdsPlugin</span></span><br><span class="line">  <span class="comment">// WarnCaseSensitiveModulesPlugin</span></span><br><span class="line">  <span class="comment">// AddManagedPathsPlugin</span></span><br><span class="line">  <span class="comment">// ResolverCachePlugin</span></span><br><span class="line"></span><br><span class="line">  <span class="title class_">WorkerPlugin</span>;</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">WebpackOptionsApply</span>().<span class="title function_">process</span>(options, compiler);</span><br><span class="line">  compiler.<span class="property">hooks</span>.<span class="property">initialize</span>.<span class="title function_">call</span>();</span><br><span class="line">  <span class="keyword">return</span> compiler;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="compiler-run"><a href="#compiler-run" class="headerlink" title="compiler.run()"></a>compiler.run()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">beforeRun</span>.<span class="title function_">callAsync</span>(<span class="variable language_">this</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">run</span>.<span class="title function_">callAsync</span>(<span class="variable language_">this</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">readRecords</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">compile</span>(onCompiled);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-http/â‘¥æµè§ˆå™¨å·¥ä½œåŸç†"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/05d622acd2a4/"
    >æµè§ˆå™¨å·¥ä½œåŸç† â‘¥ é¡µé¢å…ƒç´ </a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/05d622acd2a4/" class="article-date">
  <time datetime="2022-08-08T01:18:10.000Z" itemprop="datePublished">2022-08-08</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTTP%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8/">HTTPä¸æµè§ˆå™¨</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="æ—¶é—´çº¿é¢æ¿çš„å‚æ•°"><a href="#æ—¶é—´çº¿é¢æ¿çš„å‚æ•°" class="headerlink" title="æ—¶é—´çº¿é¢æ¿çš„å‚æ•°"></a>æ—¶é—´çº¿é¢æ¿çš„å‚æ•°</h4><p><img src="/posts/05d622acd2a4/0001.png"></p>
<ul>
<li><strong>Queuing æ’é˜Ÿæ—¶é—´</strong></li>
</ul>
<p>å›¾ç‰‡,éŸ³é¢‘ç­‰ä½ä¼˜å…ˆçº§èµ„æºå¯èƒ½éœ€è¦ç»™ css, js ç­‰é«˜ä¼˜å…ˆçº§èµ„æºè®©è·¯ï¼Œæ‰€ä»¥è¿›å…¥æ’é˜ŸçŠ¶æ€ã€‚<br>åŒä¸€åŸŸåä¸‹åªå…è®¸6ä¸ªTcpé“¾æ¥ï¼Œè§£å†³æ–¹æ³•å¯ä»¥æ˜¯ä½¿ç”¨å¤šä¸ªäºŒçº§åŸŸåï¼Œæˆ–å‡çº§http2.</p>
<ul>
<li><strong>Stalled åœæ»äº‹ä»¶</strong></li>
</ul>
<p>åœ¨çœŸæ­£å‘èµ·é“¾æ¥ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰å› ä¸ºå…¶ä»–åŸå› æš‚åœä¸€æ®µæ—¶é—´ã€‚</p>
<ul>
<li><strong>Request sent å‘é€æ•°æ®æ—¶é—´</strong></li>
</ul>
<p>å› ä¸ºä¸éœ€è¦å…³å¿ƒæ•°æ®æ˜¯å¦å‘é€æˆåŠŸï¼Œè¿™ä¸€æ—¶é—´ä¸€èˆ¬éƒ½æ¯”è¾ƒå¿«ã€‚</p>
<ul>
<li><strong>Waiting for server</strong></li>
</ul>
<p>ä¸€èˆ¬ä¹Ÿå«åšTTFB,ç¬¬ä¸€å­—èŠ‚å“åº”æ—¶é—´ï¼Œå‘èµ·è¯·æ±‚ååˆ°æ”¶åˆ°ç¬¬ä¸€ä¸ªç›¸åº”å­—èŠ‚èŠ±è´¹çš„æ—¶é—´ã€‚<br>æ…¢çš„åŸå› å¯èƒ½æ˜¯æœåŠ¡å™¨ç”Ÿæˆé¡µé¢æ—¶é—´è¿‡ä¹…ï¼Œè¯·æ±‚å¤´ä¸­æºå¸¦çš„cookieè¿‡å¤šï¼Œä¹Ÿå¯èƒ½æ˜¯ç½‘ç»œåŸå› ã€‚</p>
<ul>
<li><strong>Content Download</strong></li>
</ul>
<p>ä»æ¥å—ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°æ”¶åˆ°å…¨éƒ¨æ•°æ®æ‰€ç”¨çš„æ—¶é—´ã€‚</p>
<h4 id="JS-CSS-å¯¹DOMè§£æçš„å½±å“"><a href="#JS-CSS-å¯¹DOMè§£æçš„å½±å“" class="headerlink" title="JS,CSS å¯¹DOMè§£æçš„å½±å“"></a>JS,CSS å¯¹DOMè§£æçš„å½±å“</h4><p>HTMLè§£æå™¨ï¼ˆHTML Parserï¼‰å®ç°DOMæœ‰ä¸‰ä¸ªä½œç”¨:</p>
<ul>
<li>æè¿°é¡µé¢ç»“æ„</li>
<li>æä¾›Apiä¾›JSæ¶ˆè´¹</li>
<li>å®‰å…¨é˜²æŠ¤ï¼Œé˜²æ­¢ä¸å®‰å…¨çš„å†…å®¹</li>
</ul>
<p>DOMçš„è§£æå’Œæ–‡æ¡£çš„åŠ è½½æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œç½‘ç»œè¿›ç¨‹å›åˆæ¸²æŸ“è¿›ç¨‹åˆ›å»ºç®¡é“é“¾æ¥ï¼ŒHTMLæ–‡æ¡£ä¼šä»¥å­—èŠ‚æµçš„å½¢å¼å‘é€åˆ°æ¸²æŸ“è¿›ç¨‹ä¸­ã€‚</p>
<p>è§£æçš„è¿‡ç¨‹æ˜¯é€šè¿‡åˆ†è¯å™¨å°†å­—èŠ‚æµåˆ†æˆä¸åŒçš„Token,å¦‚æœæ˜¯StartTagä¼šè¢«å‹å…¥æ ˆä¸­ï¼Œæ ˆä¸­é»˜è®¤æœ‰ä¸€ä¸ªDocumentæ ¹èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯EndTagå¹¶ä¸”åŒ¹é…å°±ä¼šå¼¹å‡ºæ ˆã€‚</p>
<p>å½“åœ¨è§£æçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†scriptæ ‡ç­¾ï¼Œå› ä¸ºJSè„šæœ¬å¯èƒ½ä¼šä¿®æ”¹DOMç»“æ„ï¼Œæ‰€ä»¥ä¼šæš‚åœHTMLçš„è§£æï¼Œè€Œä¸”å½“å‰scriptæ ‡ç­¾åé¢çš„å…ƒç´ æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚</p>
<p>å¦‚æœscriptæ ‡ç­¾æ˜¯ä¸€ä¸ªå¤–éƒ¨èµ„æºçš„å¼•ç”¨ï¼Œå°±ä¼šåœæ­¢HTMLè§£æå¹¶ä¸‹è½½JSæ–‡ä»¶ï¼Œå› ä¸ºä¸‹è½½æ–‡ä»¶æ˜¯ä¸€ä¸ªè€—æ—¶çš„æ“ä½œï¼Œæ‰€ä»¥æµè§ˆå™¨æœ¬èº«ä¼šåšä¸€äº›ä¼˜åŒ–ï¼Œå…¶ä¸­åŒ…æ‹¬<strong>é¢„è§£ææ“ä½œ</strong>ï¼Œæµè§ˆå™¨ä¼šå•ç‹¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè§£æé¡µé¢ä¸­çš„JS,CSSèµ„æºï¼Œå¹¶å°†è¿™äº›èµ„æºæå‰ä¸‹è½½ã€‚</p>
<p>å¦å¤–å¦‚æœJSæ–‡ä»¶ä¸­æ²¡æœ‰æ“ä½œDOMçš„é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨async,deferå±æ€§ï¼Œè®©JSæ–‡ä»¶è€ŒHTMLè§£æï¼Œå¹¶è¡Œæ‰§è¡Œã€‚</p>
<p>CSSæ–‡ä»¶åŠ è½½å’ŒJSçš„åŠ è½½ä¹Ÿæ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œä½†æ˜¯ä¸€å®šè¦ç­‰CSSåŠ è½½ç»“æŸä¹‹åå¹¶ç”Ÿæˆ CSSOM ä¹‹åï¼Œæ‰ä¼šæ‰§è¡ŒJSè„šæœ¬ã€‚</p>
<h4 id="åˆ†å±‚ï¼Œåˆ†å—ï¼Œä¸åˆæˆæœºåˆ¶"><a href="#åˆ†å±‚ï¼Œåˆ†å—ï¼Œä¸åˆæˆæœºåˆ¶" class="headerlink" title="åˆ†å±‚ï¼Œåˆ†å—ï¼Œä¸åˆæˆæœºåˆ¶"></a>åˆ†å±‚ï¼Œåˆ†å—ï¼Œä¸åˆæˆæœºåˆ¶</h4><p>æ˜¾ç¤ºå›¾åƒçš„æœ¬è´¨å°±æ˜¯ä¸æ–­ä»æ˜¾å¡çš„å‰ç¼“å†²åŒºä¸­è¯»å–å›¾ç‰‡å¹¶ç»˜åˆ¶åˆ°æ˜¾ç¤ºå™¨çš„è¿‡ç¨‹ï¼Œåˆ›å»ºå›¾ç‰‡çš„é¢‘ç‡å’Œæ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ä¸€èˆ¬ç›¸åŒï¼Œæ–°åˆ›å»ºçš„å›¾ç‰‡ä¼šæ”¾åˆ°åç¼“å†²åŒºï¼Œå¹¶å°†å‰åç¼“å†²åŒºäº’æ¢ã€‚</p>
<p>ç»˜åˆ¶ä¸€å¸§å›¾åƒçš„æ–¹å¼ï¼Œå¯èƒ½æ˜¯é‡æ’ï¼Œé‡ç»˜ï¼Œåˆæˆï¼Œå…¶ä¸­çš„ä¸€ä¸ªæˆ–æ˜¯å‡ ä¸ªã€‚ä¸åŒçš„æ–¹å¼éœ€è¦çš„æ€§èƒ½ä¸åŒã€‚</p>
<p>å®ç°åˆæˆçš„ç›®çš„å°±æ˜¯é¿å…æ¯ä¸€å¸§éƒ½éœ€è¦æ•´ä¸ªé¡µé¢ç»å†é‡æ’é‡ç»˜çš„è¿‡ç¨‹ï¼Œä»è€Œæé«˜ç»˜åˆ¶æ€§èƒ½ã€‚æµè§ˆå™¨ä¼šå°†æŸäº›å±æ€§ä¸‹çš„å…ƒç´ ï¼Œæˆ–ç‰¹å®šçš„å…ƒç´ å•ç‹¬åˆ†å‡ºä¸€å±‚ã€‚ç”Ÿæˆå¸ƒå±€æ ‘ä¹‹åï¼Œæ¸²æŸ“å¼•æ“ä¼šæ ¹æ®å¸ƒå±€æ ‘çš„ç‰¹ç‚¹å°†å…¶è½¬æ¢ä¸ºå±‚æ ‘ï¼ˆLayer Treeï¼‰ã€‚</p>
<p>å¦å¤–ï¼Œç»˜åˆ¶å›¾ç‰‡çš„è¿‡ç¨‹å¹¶ä¸æ˜¯çœŸçš„åœ¨æ˜¾å¡å†…å­˜ä¸­ä¿å­˜ä¸€å¸§å›¾ç‰‡ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨ï¼Œå±‚æ ‘ä¸­çš„æ¯ä¸€å±‚å¯¹åº”ç€ä¸€å¼ å¾…åˆæˆçš„å›¾ç‰‡ï¼Œæœ€ç»ˆåˆæˆçº¿ç¨‹ä¼šå°†è¿™äº›å›¾å±‚åˆæˆä¸€å¼ å®Œæ•´çš„å›¾ç‰‡ï¼Œå¹¶å‘é€åˆ°åç¼“å†²åŒºä¸­ã€‚</p>
<p>ä¹Ÿå› ä¸ºæ˜¯åœ¨åˆæˆçº¿ç¨‹æ‰§è¡Œçš„åŸå› ï¼Œå½“JSä¸»çº¿ç¨‹å¡ä½çš„æ—¶å€™ï¼ŒCSSåŠ¨ç”»è¿˜æ˜¯å¯ä»¥ä¸€ç›´æ‰§è¡Œã€‚</p>
<p>åˆ†å—æ˜¯æµè§ˆå™¨ä¸ºäº†æå‡ç»˜åˆ¶æ€§èƒ½ï¼Œåœ¨åº•å±‚åšçš„ä¸€äº›ä¼˜åŒ–ï¼Œå¯¹ç”¨æˆ·æ¥è®²æ˜¯æ— æ„Ÿçš„ã€‚åˆ†å—çš„ç›®çš„æ˜¯ä¼˜å…ˆç»˜åˆ¶é è¿‘è§†å£çš„å›¾å—ï¼Œå› ä¸ºæ•´ä¸ªé¡µé¢å¯èƒ½æ¯”è¾ƒå¤§ï¼Œåªç»˜åˆ¶ç”¨æˆ·å¯è§èŒƒå›´å³å¯ã€‚ä¸è¿‡æœ‰æ—¶å€™ï¼Œ å³ä½¿åªç»˜åˆ¶é‚£äº›ä¼˜å…ˆçº§æœ€é«˜çš„å›¾å—ï¼Œä¹Ÿè¦è€—è´¹ä¸å°‘çš„æ—¶é—´ï¼Œå› ä¸ºæ¶‰åŠåˆ°ä¸€ä¸ªå¾ˆå…³é”®çš„å› ç´ â€”â€”<strong>çº¹ç†ä¸Šä¼ </strong>ï¼Œè¿™æ˜¯å› ä¸ºä»è®¡ç®—æœºå†…å­˜ä¸Šä¼ åˆ° GPU å†…å­˜çš„æ“ä½œä¼šæ¯”è¾ƒæ…¢ã€‚Chrome åˆé‡‡å–äº†ä¸€ä¸ªç­–ç•¥ï¼šåœ¨é¦–æ¬¡åˆæˆå›¾å—çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸ªä½åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚æ¯”å¦‚å¯ä»¥æ˜¯æ­£å¸¸åˆ†è¾¨ç‡çš„ä¸€åŠï¼Œåˆ†è¾¨ç‡å‡å°‘ä¸€åŠï¼Œçº¹ç†å°±å‡å°‘äº†å››åˆ†ä¹‹ä¸‰ã€‚åœ¨é¦–æ¬¡æ˜¾ç¤ºé¡µé¢å†…å®¹çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªä½åˆ†è¾¨ç‡çš„å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ï¼Œç„¶ååˆæˆå™¨ç»§ç»­ç»˜åˆ¶æ­£å¸¸æ¯”ä¾‹çš„ç½‘é¡µå†…å®¹ï¼Œå½“æ­£å¸¸æ¯”ä¾‹çš„ç½‘é¡µå†…å®¹ç»˜åˆ¶å®Œæˆåï¼Œå†æ›¿æ¢æ‰å½“å‰æ˜¾ç¤ºçš„ä½åˆ†è¾¨ç‡å†…å®¹ã€‚è¿™ç§æ–¹å¼ä¼šè®©ç”¨æˆ·åœ¨å¼€å§‹æ—¶çœ‹åˆ°çš„æ˜¯ä½åˆ†è¾¨ç‡çš„å†…å®¹,ä½†ä¼šé™ä½ç­‰å¾…æ—¶é—´</p>
<p>CSS will-change å±æ€§ä¼šè®©å…ƒç´ å•ç‹¬åœ¨ä¸€å±‚ä¸­ï¼Œä»è€Œä¼˜åŒ–å˜æ¢æ—¶çš„æ€§èƒ½ã€‚</p>
<h4 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h4><p>Progressive Web App æ¸è¿›å¼åº”ç”¨ï¼Œ ç›¸å½“äºæ¸è¿›å¼ + webåº”ç”¨</p>
<p>ä¸‹é¢æ¥ç†è§£ä¸€ä¸‹æ¸è¿›å¼çš„å«ä¹‰, PWAè®©Webåº”ç”¨é€æ¸æ‹¥æœ‰æœ¬åœ°åº”ç”¨çš„èƒ½åŠ›ï¼Œå¯ä»¥é€æ­¥æ”¯æŒå„ç§æ–°çš„æŠ€æœ¯ï¼Œä¸æ–­ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼ŒåŠ¨ç”»æ•ˆæœç­‰ã€‚ä¸æ–­çš„ç¼©çŸ­ä¸æœ¬åœ°åº”ç”¨çš„è·ç¦»ï¼Œè¿™ç§ç†å¿µä¸‹çš„æŠ€æœ¯éƒ½ç®—æ˜¯PWA.</p>
<p>Webåº”ç”¨ç›¸å¯¹äºæœ¬åœ°åº”ç”¨ç¼ºå°‘ï¼š</p>
<ul>
<li>ç¦»çº¿ï¼Œæˆ–å¼±ç½‘ç¯å¢ƒä¸­çš„ä½¿ç”¨èƒ½åŠ›ã€‚(serviceWorker)</li>
<li>webåº”ç”¨ç¼ºå°‘äº†æ¶ˆæ¯æ¨é€èƒ½åŠ› (serviceWorker)</li>
<li>webåº”ç”¨ç¼ºå°‘ä¸€çº§å…¥å£ï¼Œå¸Œæœ›å¯ä»¥ä»æ¡Œé¢ç›´æ¥æ‰“å¼€è€Œä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­ã€‚(manifest.json)</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-react/v18æ–°ç‰¹æ€§"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/0dfb128a2887/"
    >React 18 æ–°ç‰¹æ€§</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/0dfb128a2887/" class="article-date">
  <time datetime="2022-06-01T02:11:46.000Z" itemprop="datePublished">2022-06-01</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h4><p>V18 å·²ä¸å†æ”¯æŒ IE11,è®¡åˆ’æ—¶é—´æ˜¯ 2022 å¹´ 6 æœˆ 15 æ—¥, å› ä¸ºç”¨åˆ°çš„ä¸€äº›ç°ä»£æµè§ˆå™¨æ–°ç‰¹æ€§å¦‚ <code>micro-tasks</code>,åœ¨ IE ä¸­æ— æ³•å……åˆ† polyfill .</p>
<h4 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h4><p>V18 ç‰ˆæœ¬åœ¨ V17 çš„åŸºç¡€ä¸Šåˆåšäº†ä¸€äº›è°ƒæ•´ã€‚åœ¨è¿‡å»çš„ V17 ç‰ˆæœ¬ä¸­,ä¼ ç»Ÿæ¨¡å¼å’Œå¹¶å‘æ¨¡å¼æ˜¯å…±å­˜çš„ï¼Œ é€šè¿‡ <code>createRoot</code> API å°±å¯ä»¥å¯ç”¨å¹¶å‘æ¨¡å¼ã€‚React ä¸ºå‘å¹¶å‘æ¨¡å¼è¿ç§»çš„æœ€åˆç­–ç•¥æ˜¯è®¾è®¡ä¸‰ç§æ¨¡å¼ã€‚</p>
<ul>
<li>Legacy æ¨¡å¼ï¼š V17 ä¸­é»˜è®¤ä½¿ç”¨çš„æ¨¡å¼ã€‚é»˜è®¤å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚é»˜è®¤åŒæ­¥æ›´æ–°ã€‚Legacy Suspense semanticsã€‚</li>
<li>Blocking æ¨¡å¼ï¼š Legacy å’Œ Concurrent æ··åˆæ¨¡å¼ã€‚é»˜è®¤å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚é»˜è®¤åŒæ­¥æ›´æ–°ã€‚å¼€æ”¾ä¸€äº›æ–°ç‰¹æ€§ã€‚</li>
<li>Concurrent æ¨¡å¼ï¼šV18 ä½¿ç”¨çš„æ¨¡å¼ã€‚é»˜è®¤å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚é»˜è®¤å¹¶å‘æ›´æ–°ã€‚å¼€å‘æ‰€æœ‰çš„æ–°ç‰¹æ€§ã€‚</li>
</ul>
<p>React æœ€åˆçš„è®¡åˆ’æ˜¯ç”¨æˆ·å¯ä»¥ä» Legacy åˆ‡æ¢åˆ° Blocking æ¨¡å¼ï¼Œå¹¶ä¸éœ€è¦ä¿®æ”¹ä»»ä½•è¯­æ³•ï¼Œé…åˆä¸¥æ ¼æ¨¡å¼ï¼ˆStrictModeï¼‰ä¿®æ”¹å…¶ä¸­çš„æŠ¥é”™ï¼Œå½“æ‰€æœ‰é”™è¯¯è¢«è§£å†³ä¹‹åï¼Œå¯ä»¥ç›´æ¥åˆ‡æ¢åˆ°çš„ Concurrent æ¨¡å¼ã€‚</p>
<p>ä½†åœ¨å®é™…çš„åœºæ™¯ React æ€è€ƒäº†ä»¥ä¸‹å‡ ä¸ªé—®é¢˜:</p>
<ul>
<li>é¡¹ç›®ä¸­ä¼šæœ‰æˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ï¼Œå¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œä¼šæœ‰å¤§é‡çš„é”™è¯¯ä¿¡æ¯ï¼Œè™½ç„¶ä¸å½±å“ç¨‹åºè¿è¡Œï¼Œä½†æ˜¯ä¼šå¹²æ‰°å¼€å‘å¹¶ä¸”ä¸èƒ½å¿«é€Ÿçš„ä¸€æ¬¡æ€§è§£å†³ã€‚</li>
<li>å¯ç”¨å¹¶å‘æ¨¡å¼çš„å¥½å¤„ä¸è¨€è€Œå–»ï¼Œå¯èƒ½ä¼šåœ¨æœªæ¥é»˜è®¤å¯ç”¨ã€‚æä¾› <code>startTransition</code> <code>Suspense</code> ç­‰ API åœ¨å†…éƒ¨å®ç°å¹¶å‘ç‰¹æ€§ã€‚ç”¨æˆ·å¯ä»¥å¢é‡çš„é€‰æ‹©æ€§çš„ä½¿ç”¨è¿™äº› API ä»è€Œè·å¾—å¹¶å‘çš„ç‰¹æ€§ã€‚</li>
<li>å¦‚æœæŒ‰ç…§ä¸Šè¿°çš„æ€è·¯ï¼Œé‚£ä¹ˆ Concurrent æ¨¡å¼å’Œ Blocking æ¨¡å¼çš„å”¯ä¸€åŒºåˆ«å°±åªæœ‰æ˜¯å¦æç¤ºé”™è¯¯ä¿¡æ¯ã€‚é‚£ä¹ˆå¦‚æœé»˜è®¤ä¸å¯ç”¨å¹¶å‘æ¨¡å¼ï¼Œå°±å¯ä»¥ä¸å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œç”¨äºæç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<p>åŸºäºä¸Šé¢çš„æ€è€ƒï¼ŒV18 çš„ç­–ç•¥æ˜¯ä¸ä¼šé»˜è®¤å¯ç”¨å¹¶å‘çš„ç‰¹æ€§ï¼Œå³ä½¿ç”¨ <code>createRoot</code> å¯ç”¨å¹¶å‘æ¨¡å¼å¹¶ä¸èƒ½ä½“éªŒå¹¶å‘çš„ç‰¹æ€§ï¼Œå¦‚æœæƒ³ä½“éªŒå¹¶å‘çš„ç‰¹æ€§ï¼Œéœ€è¦ä½¿ç”¨ä¾‹å¦‚ <code>startTransition</code> ç­‰æ”¯æŒå¹¶å‘ç‰¹æ€§çš„ API. æ‰€ä»¥å®˜æ–¹æè¿°ä¸º <strong>æ²¡æœ‰å¹¶å‘æ¨¡å¼ï¼Œåªæœ‰å¹¶å‘ç‰¹æ€§</strong></p>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><ul>
<li>startTransition</li>
</ul>
<p>è¿™ä¸ª API å¯ä»¥é˜²æ­¢æ¸²æŸ“ä»»åŠ¡ç«‹å³æ‰§è¡Œï¼Œå…è®¸å°†åº”ç”¨ç¨‹åºä¸­çš„æŸäº›æ›´æ–°æ ‡è®°ä¸ºéç´§æ€¥æ›´æ–°ï¼Œå› æ­¤å®ƒä»¬ä¼šæš‚åœï¼ŒåŒæ—¶ä¼˜å…ˆè€ƒè™‘æ›´ç´§æ€¥çš„æ›´æ–°ã€‚è¿™å¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æ›´æ–°ä¸­ç›¸åº”ç”¨æˆ·è¾“å…¥ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">aaaaaaaaaaaaaaa</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [num, setNum] = useState&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> [list, setList] = useState&lt;<span class="built_in">any</span>[]&gt;([]);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setList</span>(<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">20000</span>).<span class="title function_">fill</span>(<span class="literal">null</span>));</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> event = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&quot;MouseEvents&quot;</span>);</span><br><span class="line">    event.<span class="title function_">initEvent</span>(<span class="string">&quot;click&quot;</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;button&quot;</span>)!.<span class="title function_">dispatchEvent</span>(event);</span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">id</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNum(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          aaaaaaaaaaaaaaa();</span></span><br><span class="line"><span class="language-xml">          return &quot;123&quot;;</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      ç‚¹å‡»</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;list.map((_, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;Math.random()&#125;</span>&gt;</span>&#123;i&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ))&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>åœ¨æ²¡æœ‰ä½¿ç”¨å¹¶å‘ç‰¹æ€§çš„æ—¶å€™ï¼Œåˆ—è¡¨çš„æ¸²æŸ“æ˜¯ä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œä¸ä¼šç›¸åº”æ¨¡æ‹Ÿçš„ç”¨æˆ·äº‹ä»¶</p>
<p><img src="/posts/0dfb128a2887/0001.png"></p>
<p>å½“å¼€å¯äº†å¹¶å‘ç‰¹æ€§ä¹‹åï¼Œä¼šè¢«æ‹†åˆ†æˆå°ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">startTransition</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setList</span>(<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">20000</span>).<span class="title function_">fill</span>(<span class="literal">null</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/posts/0dfb128a2887/0002.png"></p>
<ul>
<li>useDeferredValue</li>
</ul>
<p>ä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®çš„å‰¯æœ¬ï¼Œå¦‚æœå½“å‰æ›´æ–°æ˜¯ä¸€ä¸ªç´§æ€¥æ›´æ–°ï¼ŒuseDeferredValue ä¼šè¿”å›ä¹‹å‰çš„çŠ¶æ€ï¼Œä»è€Œä¼˜å…ˆå“åº”ç´§æ€¥æ›´æ–°ã€‚å½“ç´§æ€¥æ›´æ–°æ¸²æŸ“å®Œæˆåï¼Œæ‰ä¼šå»æ‰§è¡Œçš„å½“å‰æ›´æ–°ã€‚åº•å±‚å®ç°ä¸ useDeferredValue ç±»ä¼¼ã€‚</p>
<p>ä½¿ç”¨ <code>useDeferredValue</code> ä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœ</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [list, setList] = useState&lt;<span class="built_in">any</span>[]&gt;([]);</span><br><span class="line"><span class="keyword">const</span> dList = <span class="title function_">useDeferredValue</span>(list);</span><br></pre></td></tr></table></figure>

<ul>
<li>useId</li>
</ul>
<p>ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ ID, åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ç”Ÿæˆçš„ç›¸åŒï¼Œé˜²æ­¢ ID ä¸åŒ¹é…</p>
<ul>
<li>useSyncExternalStore</li>
</ul>
<p>useSyncExternalStoreÂ  æ˜¯ä¸€ä¸ªæ–°çš„ apiï¼Œç»å†äº†ä¸€æ¬¡ä¿®æ”¹ï¼Œç”± Â useMutableSourceÂ  æ”¹å˜è€Œæ¥ï¼Œä¸»è¦ç”¨æ¥è§£å†³å¤–éƒ¨æ•°æ®æ’•è£‚é—®é¢˜ã€‚</p>
<p>useSyncExternalStore èƒ½å¤Ÿé€šè¿‡å¼ºåˆ¶åŒæ­¥æ›´æ–°æ•°æ®è®© React ç»„ä»¶åœ¨ CM ä¸‹å®‰å…¨åœ°æœ‰æ•ˆåœ°è¯»å–å¤–æ¥æ•°æ®æºã€‚ åœ¨ Concurrent Mode ä¸‹ï¼ŒReact ä¸€æ¬¡æ¸²æŸ“ä¼šåˆ†ç‰‡æ‰§è¡Œï¼ˆä»¥ fiber ä¸ºå•ä½ï¼‰ï¼Œä¸­é—´å¯èƒ½ç©¿æ’ä¼˜å…ˆçº§æ›´é«˜çš„æ›´æ–°ã€‚å‡å¦‚åœ¨é«˜ä¼˜å…ˆçº§çš„æ›´æ–°ä¸­æ”¹å˜äº†å…¬å…±æ•°æ®ï¼ˆæ¯”å¦‚ redux ä¸­çš„æ•°æ®ï¼‰ï¼Œé‚£ä¹‹å‰ä½ä¼˜å…ˆçš„æ¸²æŸ“å¿…é¡»è¦é‡æ–°å¼€å§‹æ‰§è¡Œï¼Œå¦åˆ™å°±ä¼šå‡ºç°å‰åçŠ¶æ€ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<p>useSyncExternalStore ä¸€èˆ¬æ˜¯ä¸‰æ–¹çŠ¶æ€ç®¡ç†åº“ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä¸šåŠ¡ä¸­ä¸éœ€è¦å…³æ³¨ã€‚å› ä¸º React è‡ªèº«çš„ useState å·²ç»åŸç”Ÿçš„è§£å†³çš„å¹¶å‘ç‰¹æ€§ä¸‹çš„ tearï¼ˆæ’•è£‚ï¼‰é—®é¢˜ã€‚useSyncExternalStore ä¸»è¦å¯¹äºæ¡†æ¶å¼€å‘è€…ï¼Œæ¯”å¦‚ reduxï¼Œå®ƒåœ¨æ§åˆ¶çŠ¶æ€æ—¶å¯èƒ½å¹¶éç›´æ¥ä½¿ç”¨çš„ React çš„ stateï¼Œè€Œæ˜¯è‡ªå·±åœ¨å¤–éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª store å¯¹è±¡ï¼Œç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°äº†æ•°æ®æ›´æ–°ï¼Œè„±ç¦»äº† React çš„ç®¡ç†ï¼Œä¹Ÿå°±æ— æ³•ä¾é  React è‡ªåŠ¨è§£å†³æ’•è£‚é—®é¢˜ã€‚å› æ­¤ React å¯¹å¤–æä¾›äº†è¿™æ ·ä¸€ä¸ª APIã€‚</p>
<p>ç›®å‰ React-Redux 8.0 å·²ç»åŸºäº useSyncExternalStore å®ç°ã€‚</p>
<ul>
<li>useInsertionEffect</li>
</ul>
<p>è¿™ä¸ª <a target="_blank" rel="noopener" href="https://github.com/reactwg/react-18/discussions/110">Hooks</a> åªå»ºè®® Â css-in-js åº“æ¥ä½¿ç”¨ã€‚ è¿™ä¸ª Hooks æ‰§è¡Œæ—¶æœºåœ¨ DOM ç”Ÿæˆä¹‹åï¼ŒuseLayoutEffect ä¹‹å‰ï¼Œå®ƒçš„å·¥ä½œåŸç†å¤§è‡´å’Œ Â useLayoutEffectÂ  ç›¸åŒï¼Œåªæ˜¯æ­¤æ—¶æ— æ³•è®¿é—® Â DOMÂ  èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä¸€èˆ¬ç”¨äºæå‰æ³¨å…¥ Â <code>&lt;style&gt;</code>Â  è„šæœ¬ã€‚</p>
<ul>
<li>Suspense</li>
</ul>
<p>å®˜æ–¹å¯¹ ç©ºçš„ fallback å±æ€§çš„å¤„ç†æ–¹å¼åšäº†æ”¹å˜ï¼šä¸å†è·³è¿‡ ç¼ºå¤±å€¼ æˆ– å€¼ä¸º null çš„ fallback çš„ Suspenseã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š fallback å°†ä¼šæŠŠ fallback å‘ˆç°ä¸º nullã€‚</p>
<h4 id="æ‰¹å¤„ç†"><a href="#æ‰¹å¤„ç†" class="headerlink" title="æ‰¹å¤„ç†"></a>æ‰¹å¤„ç†</h4><p>åœ¨ 18 ä¹‹å‰ï¼Œåªæœ‰åœ¨ react äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæ‰ä¼šè‡ªåŠ¨æ‰§è¡Œæ‰¹å¤„ç†ï¼Œå…¶å®ƒæƒ…å†µä¼šå¤šæ¬¡æ›´æ–°</p>
<p>åœ¨ 18 ä¹‹åï¼Œä»»ä½•æƒ…å†µéƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œæ‰¹å¤„ç†ï¼Œå¤šæ¬¡æ›´æ–°å§‹ç»ˆåˆå¹¶ä¸ºä¸€æ¬¡</p>
<p>å¦‚æœæƒ³è¦è·³å‡ºæ‰¹å¤„ç†ä½¿ç”¨ <code>flushSync</code></p>
<h4 id="å…³äºå¸è½½ç»„ä»¶æ—¶çš„æ›´æ–°çŠ¶æ€è­¦å‘Š"><a href="#å…³äºå¸è½½ç»„ä»¶æ—¶çš„æ›´æ–°çŠ¶æ€è­¦å‘Š" class="headerlink" title="å…³äºå¸è½½ç»„ä»¶æ—¶çš„æ›´æ–°çŠ¶æ€è­¦å‘Š"></a>å…³äºå¸è½½ç»„ä»¶æ—¶çš„æ›´æ–°çŠ¶æ€è­¦å‘Š</h4><p>æœ‰çš„æ—¶å€™ä¼šé‡åˆ°å¦‚ä¸‹çš„é”™è¯¯</p>
<p><img src="/posts/0dfb128a2887/0003.png"></p>
<p>è¿™ä¸ªé”™è¯¯è¡¨ç¤ºï¼šæ— æ³•å¯¹æœªæŒ‚è½½ï¼ˆå·²å¸è½½ï¼‰çš„ç»„ä»¶æ‰§è¡ŒçŠ¶æ€æ›´æ–°ã€‚è¿™æ˜¯ä¸€ä¸ªæ— æ•ˆæ“ä½œï¼Œå¹¶ä¸”è¡¨æ˜æˆ‘ä»¬çš„ä»£ç ä¸­å­˜åœ¨å†…å­˜æ³„æ¼ã€‚</p>
<p>å®é™…ä¸Šï¼Œè¿™ä¸ªé”™è¯¯å¹¶ä¸å¤šè§ï¼Œåœ¨ä»¥å¾€çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªè­¦å‘Šè¢«å¹¿æ³›è¯¯è§£ï¼Œå¹¶ä¸”æœ‰äº›è¯¯å¯¼ã€‚</p>
<p>è¿™ä¸ªé”™è¯¯çš„åˆè¡·ï¼ŒåŸæœ¬æ—¨åœ¨é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œè­¬å¦‚ ä½ åœ¨ useEffect é‡Œé¢è®¾ç½®äº†å®šæ—¶å™¨ï¼Œæˆ–è€…è®¢é˜…äº†æŸä¸ªäº‹ä»¶ï¼Œä»è€Œåœ¨ç»„ä»¶å†…éƒ¨äº§ç”Ÿäº†å‰¯ä½œç”¨ï¼Œè€Œä¸”å¿˜è®° return ä¸€ä¸ªå‡½æ•°æ¸…é™¤å‰¯ä½œç”¨ï¼Œåˆ™ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼â€¦â€¦ ä¹‹ç±»çš„åœºæ™¯</p>
<p>ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åœºæ™¯æ˜¯ï¼Œæˆ‘ä»¬åœ¨ useEffect é‡Œé¢å‘é€äº†ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œåœ¨å¼‚æ­¥å‡½æ•°è¿˜æ²¡æœ‰è¢« resolve æˆ–è€…è¢« reject çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸è½½äº†ç»„ä»¶ã€‚ åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œè­¦å‘ŠåŒæ ·ä¼šè§¦å‘ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»„ä»¶å†…éƒ¨å¹¶æ²¡æœ‰å†…å­˜æ³„æ¼ï¼Œå› ä¸ºè¿™ä¸ªå¼‚æ­¥å‡½æ•°å·²ç»è¢«åƒåœ¾å›æ”¶äº†ï¼Œæ­¤æ—¶ï¼Œè­¦å‘Šå…·æœ‰è¯¯å¯¼æ€§ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°åŸå› ï¼Œåœ¨ React 18 ä¸­ï¼Œå®˜æ–¹åˆ é™¤äº†è¿™ä¸ªæŠ¥é”™ã€‚</p>
<h4 id="è¿”å›å€¼ç±»å‹"><a href="#è¿”å›å€¼ç±»å‹" class="headerlink" title="è¿”å›å€¼ç±»å‹"></a>è¿”å›å€¼ç±»å‹</h4><p>åœ¨ React 18 ä¸­ï¼Œä¸å†æ£€æŸ¥å› è¿”å› undefined è€Œå¯¼è‡´å´©æºƒã€‚æ—¢èƒ½è¿”å› nullï¼Œä¹Ÿèƒ½è¿”å› undefinedã€‚ä½†éœ€è¦ä¿®æ”¹ç›¸åº”çš„ dts æ–‡ä»¶ã€‚</p>
<h4 id="Strict-Mode"><a href="#Strict-Mode" class="headerlink" title="Strict Mode"></a>Strict Mode</h4><p>ä¸¥æ ¼æ¨¡å¼ä¼šæ‰“å°ä¸¤æ¬¡æ—¥å¿—ï¼Œå¯ä»¥åœ¨ React DevTools ä¸­å…³é—­ã€‚</p>
<p>åœ¨ React 17 ä¸­ï¼Œå–æ¶ˆäº†å…¶ä¸­ä¸€æ¬¡æ¸²æŸ“çš„æ§åˆ¶å°æ—¥å¿—ï¼Œä»¥ä¾¿è®©æ—¥å¿—æ›´å®¹æ˜“é˜…è¯»ã€‚</p>
<p>åœ¨ React 18 ä¸­ï¼Œå®˜æ–¹å–æ¶ˆäº†è¿™ä¸ªé™åˆ¶ã€‚å¦‚æœä½ å®‰è£…äº† React DevToolsï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“çš„æ—¥å¿—ä¿¡æ¯å°†æ˜¾ç¤ºä¸ºç°è‰²ï¼Œä»¥æŸ”å’Œçš„æ–¹å¼æ˜¾å¼åœ¨æ§åˆ¶å°ã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-http/â‘¤æµè§ˆå™¨å·¥ä½œåŸç†"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/91913fe965fd/"
    >æµè§ˆå™¨å·¥ä½œåŸç† â‘¤ é¡µé¢å¾ªç¯ç³»ç»Ÿ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/91913fe965fd/" class="article-date">
  <time datetime="2022-05-29T03:30:52.000Z" itemprop="datePublished">2022-05-29</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTTP%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8/">HTTPä¸æµè§ˆå™¨</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å¤„ç†æ–°ä»»åŠ¡"><a href="#å¤„ç†æ–°ä»»åŠ¡" class="headerlink" title="å¤„ç†æ–°ä»»åŠ¡"></a>å¤„ç†æ–°ä»»åŠ¡</h4><p>å½“ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œå¦‚ä½•å¯ä»¥å¤„ç†æ–°ä»»åŠ¡ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯é€šè¿‡ä¸€ä¸ªå¾ªç¯ï¼Œä¸æ–­æ£€æµ‹æ˜¯å¦æœ‰æ–°çš„ä»»åŠ¡äº§ç”Ÿã€‚</p>
<p>è¿™æ ·å¯ä»¥è§£å†³åŒä¸€ä¸ªçº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°ä»»åŠ¡ï¼Œä½†æ˜¯æ— æ³•è§£å†³å…¶ä»–çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°ä»»åŠ¡ã€‚å› ä¸ºæ²¡æœ‰åŠæ³•ç›´æ¥æ£€æµ‹å…¶ä»–çº¿ç¨‹æ˜¯å¦æœ‰æ–°ä»»åŠ¡çš„äº§ç”Ÿã€‚</p>
<p>é€šç”¨çš„æ¨¡å‹å°±æ˜¯<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥å­˜æ”¾è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚å®ƒç¬¦åˆé˜Ÿåˆ—â€œå…ˆè¿›å…ˆå‡ºâ€çš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æ·»åŠ ä»»åŠ¡çš„è¯ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼›è¦å–å‡ºä»»åŠ¡çš„è¯ï¼Œä»é˜Ÿåˆ—å¤´éƒ¨å»å–ã€‚</p>
<p><strong>æ¸²æŸ“è¿›ç¨‹ä¸“é—¨æœ‰ä¸€ä¸ª IO çº¿ç¨‹ç”¨æ¥æ¥æ”¶å…¶ä»–è¿›ç¨‹ä¼ è¿›æ¥çš„æ¶ˆæ¯</strong>ï¼Œæ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šå°†è¿™äº›æ¶ˆæ¯ç»„è£…æˆä»»åŠ¡å‘é€ç»™æ¸²æŸ“ä¸»çº¿ç¨‹</p>
<h4 id="ä»»åŠ¡ç±»å‹"><a href="#ä»»åŠ¡ç±»å‹" class="headerlink" title="ä»»åŠ¡ç±»å‹"></a>ä»»åŠ¡ç±»å‹</h4><p>ä»»åŠ¡ç±»å‹åŒ…æ‹¬ï¼Œ è¾“å…¥äº‹ä»¶ï¼ˆé¼ æ ‡æ»šåŠ¨ã€ç‚¹å‡»ã€ç§»åŠ¨ï¼‰ã€å¾®ä»»åŠ¡ã€æ–‡ä»¶è¯»å†™ã€WebSocketã€JavaScript å®šæ—¶å™¨ç­‰ç­‰ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿˜åŒ…å«äº†å¾ˆå¤šä¸é¡µé¢ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ JavaScript æ‰§è¡Œã€è§£æ DOMã€æ ·å¼è®¡ç®—ã€å¸ƒå±€è®¡ç®—ã€CSS åŠ¨ç”»ç­‰ã€‚</p>
<p>ä»¥ä¸Šè¿™äº›äº‹ä»¶éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ç¼–å†™ Web åº”ç”¨æ—¶ï¼Œä½ è¿˜éœ€è¦è¡¡é‡è¿™äº›äº‹ä»¶æ‰€å ç”¨çš„æ—¶é•¿ï¼Œå¹¶æƒ³åŠæ³•è§£å†³å•ä¸ªä»»åŠ¡å ç”¨ä¸»çº¿ç¨‹è¿‡ä¹…çš„é—®é¢˜ã€‚</p>
<h4 id="é«˜ä¼˜å…ˆçº§ä»»åŠ¡"><a href="#é«˜ä¼˜å…ˆçº§ä»»åŠ¡" class="headerlink" title="é«˜ä¼˜å…ˆçº§ä»»åŠ¡"></a>é«˜ä¼˜å…ˆçº§ä»»åŠ¡</h4><p>ä¸€ä¸ªå…¸å‹çš„åœºæ™¯æ˜¯ç›‘å¬ DOM çš„æ”¹å˜åšä¸€äº›é€»è¾‘å¤„ç†ï¼Œå¦‚æœä¸åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©åŒæ­¥å¤„ç†ï¼Œåœ¨ DOM é¢‘ç¹æ”¹å˜çš„æ—¶å€™ï¼Œå½“å‰ä»»åŠ¡ä¼šè¢«å»¶é•¿ï¼Œå¯¼è‡´åé¢çš„ä»»åŠ¡ä¸èƒ½åŠæ—¶å¤„ç†ã€‚</p>
<p>å¦‚æœåŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿå°¾éƒ¨ï¼Œåˆå¯èƒ½å½±å“æ•ˆç‡ï¼Œå› ä¸ºå¯èƒ½å·²ç»æœ‰å¾ˆå¤šä»»åŠ¡åœ¨æ’é˜Ÿäº†ã€‚</p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µ<strong>å¾®ä»»åŠ¡</strong>å°±äº§ç”Ÿäº†ï¼Œé€šå¸¸æˆ‘ä»¬æŠŠæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ï¼Œæ¯ä¸ªå®ä»»åŠ¡ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨æ‰§è¡Œå®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ DOM æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šå°†è¯¥å˜åŒ–æ·»åŠ åˆ°å¾®ä»»åŠ¡åˆ—è¡¨ä¸­ï¼Œç­‰å®ä»»åŠ¡ä¸­çš„ä¸»è¦åŠŸèƒ½éƒ½ç›´æ¥å®Œæˆä¹‹åï¼Œè¿™æ—¶å€™ï¼Œæ¸²æŸ“å¼•æ“å¹¶ä¸ç€æ€¥å»æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡ï¼Œå› ä¸º DOM å˜åŒ–çš„äº‹ä»¶éƒ½ä¿å­˜åœ¨è¿™äº›å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·ä¹Ÿå°±è§£å†³äº†å®æ—¶æ€§é—®é¢˜ã€‚</p>
<h4 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h4><p>æµè§ˆå™¨å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ç”¨åˆ°äº†äº‹ä»¶å¾ªç¯ç³»ç»Ÿï¼Œä½†è¿™ä¸ªäº‹ä»¶å¾ªç¯ä¸ nodejs äº‹ä»¶å¾ªç¯æ²¡æœ‰å…³ç³»ã€‚</p>
<ul>
<li>V8: V8 å¼•æ“è‡ªå·±å®ç°äº†ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œä½†æ˜¯ nodejs å’Œ æµè§ˆå™¨éƒ½æ²¡æœ‰é‡‡ç”¨</li>
<li>æµè§ˆå™¨ï¼š ä¸åŒçš„å‚å•†å®ç°å¯èƒ½ä¸åŒï¼Œchrome æµè§ˆå™¨ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://libevent.org/">libevent</a> å®ç°äº‹ä»¶å¾ªç¯ã€‚</li>
<li>nodejsï¼š ä½¿ç”¨ <a target="_blank" rel="noopener" href="http://docs.libuv.org/en/v1.x/">libuv</a> å®ç°äº‹ä»¶å¾ªç¯ã€‚</li>
</ul>
<h4 id="setTimeout-å¦‚ä½•å®ç°"><a href="#setTimeout-å¦‚ä½•å®ç°" class="headerlink" title="setTimeout å¦‚ä½•å®ç°"></a>setTimeout å¦‚ä½•å®ç°</h4><p>ä»ä½¿ç”¨æ–¹å¼ä¸Šèƒ½æ„Ÿè§‰åˆ°ï¼ŒsetTimeout éœ€è¦ç­‰å¾…æŒ‡å®šæ—¶é—´æ‰èƒ½æ‰§è¡Œï¼Œè€Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ setTimeout ä¸­çš„å›è°ƒå‡½æ•°ä¸èƒ½ç«‹å³åŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</p>
<p>æ‰€ä»¥æµè§ˆå™¨è¿˜ç»´æŠ¤ç€ä¸€ä¸ªå»¶æ—¶ä»»åŠ¡åˆ—è¡¨ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å’Œå†…éƒ¨ä¸€äº›å»¶æ—¶ä»»åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šå°†è¯¥å®šæ—¶å™¨çš„å›è°ƒä»»åŠ¡æ·»åŠ åˆ°å»¶è¿Ÿé˜Ÿåˆ—ä¸­ã€‚è¿™ä¸ªå›è°ƒä»»åŠ¡åŒ…æ‹¬ï¼Œå®šä¹‰çš„å›è°ƒå‡½æ•°ï¼Œå‘èµ·æ—¶é—´ï¼Œå»¶æ—¶æ—¶é—´ã€‚</p>
<p>åœ¨å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å‡ºå»¶æ—¶ä»»åŠ¡çš„æ–¹æ³• ProcessTimerTask ã€‚è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶æœºæ˜¯å½“å‰äº‹ä»¶å¾ªç¯ä¸­ä¸€ä¸ªä»»åŠ¡å¤„ç†ç»“æŸåå¼€å§‹æ‰§è¡Œã€‚</p>
<p>ProcessDelayTask å‡½æ•°ä¼šæ ¹æ®å‘èµ·æ—¶é—´å’Œå»¶è¿Ÿæ—¶é—´è®¡ç®—å‡ºåˆ°æœŸçš„ä»»åŠ¡ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œè¿™äº›åˆ°æœŸçš„ä»»åŠ¡ã€‚ç­‰åˆ°æœŸçš„ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œå†ç»§ç»­ä¸‹ä¸€ä¸ªå¾ªç¯è¿‡ç¨‹ã€‚</p>
<p><strong>åœ¨ Chrome ä¸­ï¼Œå®šæ—¶å™¨è¢«åµŒå¥—è°ƒç”¨ 5 æ¬¡ä»¥ä¸Šï¼Œç³»ç»Ÿä¼šåˆ¤æ–­è¯¥å‡½æ•°æ–¹æ³•è¢«é˜»å¡äº†ï¼Œåœ¨ 5 æ¬¡è°ƒç”¨ä¹‹åï¼Œå¦‚æœå®šæ—¶å™¨çš„è°ƒç”¨æ—¶é—´é—´éš”å°äº 4 æ¯«ç§’ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå°†æ¯æ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”è®¾ç½®ä¸º 4 æ¯«ç§’ã€‚</strong></p>
<p><strong>æœªè¢«æ¿€æ´»çš„é¡µé¢ä¸­å®šæ—¶å™¨æœ€å°å€¼å¤§äº 1000 æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ ‡ç­¾ä¸æ˜¯å½“å‰çš„æ¿€æ´»æ ‡ç­¾ï¼Œé‚£ä¹ˆå®šæ—¶å™¨æœ€å°çš„æ—¶é—´é—´éš”æ˜¯ 1000 æ¯«ç§’ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¼˜åŒ–åå°é¡µé¢çš„åŠ è½½æŸè€—ä»¥åŠé™ä½è€—ç”µé‡ã€‚</strong></p>
<p>Chromeã€Safariã€Firefox éƒ½æ˜¯ä»¥ 32 ä¸ª bit æ¥å­˜å‚¨å»¶æ—¶å€¼çš„ï¼Œ32bit <strong>æœ€å¤§åªèƒ½å­˜æ”¾çš„æ•°å­—æ˜¯ 2147483647 æ¯«ç§’</strong>ï¼Œè¿™å°±æ„å‘³ç€ï¼Œå¦‚æœ setTimeout è®¾ç½®çš„å»¶è¿Ÿå€¼å¤§äº 2147483647 æ¯«ç§’ï¼ˆå¤§çº¦ 24.8 å¤©ï¼‰æ—¶å°±ä¼šæº¢å‡ºï¼Œé‚£ä¹ˆç›¸å½“äºå»¶æ—¶å€¼è¢«è®¾ç½®ä¸º 0 äº†ï¼Œè¿™å¯¼è‡´å®šæ—¶å™¨ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚</p>
<h4 id="XMLHttpRequest-å®ç°æµç¨‹"><a href="#XMLHttpRequest-å®ç°æµç¨‹" class="headerlink" title="XMLHttpRequest å®ç°æµç¨‹"></a>XMLHttpRequest å®ç°æµç¨‹</h4><p>æ¸²æŸ“è¿›ç¨‹ä¼šå°†è¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹ï¼Œç„¶åç½‘ç»œè¿›ç¨‹è´Ÿè´£èµ„æºçš„ä¸‹è½½ï¼Œç­‰ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå°±ä¼šåˆ©ç”¨ IPC æ¥é€šçŸ¥æ¸²æŸ“è¿›ç¨‹ï¼›æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šå°† xhr çš„å›è°ƒå‡½æ•°å°è£…æˆä»»åŠ¡å¹¶æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹å¾ªç¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ä¼šæ ¹æ®ç›¸å…³çš„çŠ¶æ€æ¥è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<h4 id="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h4><p>å‰é¢å·²ç»ä»‹ç»è¿‡å¾®ä»»åŠ¡çš„ç”±æ¥ã€‚</p>
<p><strong>å®ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>æ¸²æŸ“äº‹ä»¶ï¼ˆå¦‚è§£æ DOMã€è®¡ç®—å¸ƒå±€ã€ç»˜åˆ¶ï¼‰ï¼›</li>
<li>ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»ã€æ»šåŠ¨é¡µé¢ã€æ”¾å¤§ç¼©å°ç­‰ï¼‰ï¼›</li>
<li>JavaScript è„šæœ¬æ‰§è¡Œäº‹ä»¶ï¼›</li>
<li>ç½‘ç»œè¯·æ±‚å®Œæˆ</li>
<li>æ–‡ä»¶è¯»å†™å®Œæˆäº‹ä»¶</li>
</ul>
<p><strong>WHATWG è§„èŒƒä¸­å®šä¹‰äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼š</strong></p>
<ul>
<li>å…ˆä»å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªæœ€è€çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ç§°ä¸º oldestTaskï¼›</li>
<li>ç„¶åå¾ªç¯ç³»ç»Ÿè®°å½•ä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ï¼Œå¹¶æŠŠè¿™ä¸ª oldestTask è®¾ç½®ä¸ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼›</li>
<li>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œåˆ é™¤å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä»å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­åˆ é™¤æ‰è¿™ä¸ª oldestTaskï¼›</li>
<li>æœ€åç»Ÿè®¡æ‰§è¡Œå®Œæˆçš„æ—¶é•¿ç­‰ä¿¡æ¯ã€‚</li>
</ul>
<p>ç”±äºå®ä»»åŠ¡ä¸èƒ½ç²¾ç»†çš„æ§åˆ¶æ‰§è¡Œçš„æ—¶æœºï¼Œå› ä¸ºä¸¤ä¸ªçº¢ä»»åŠ¡ä¹‹é—´å¯èƒ½è¢«æ’å…¥äº†å¾ˆå¤šç³»ç»Ÿçº§çš„ä»»åŠ¡ã€‚</p>
<p><strong>å¾®ä»»åŠ¡ï¼š</strong></p>
<p>å¾®ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚</p>
<ul>
<li>MutationObserver ç›‘æ§æŸä¸ª DOM èŠ‚ç‚¹ï¼Œç„¶åå†é€šè¿‡ JavaScript æ¥ä¿®æ”¹è¿™ä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€…ä¸ºè¿™ä¸ªèŠ‚ç‚¹æ·»åŠ ã€åˆ é™¤éƒ¨åˆ†å­èŠ‚ç‚¹ï¼Œå½“ DOM èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”Ÿ DOM å˜åŒ–è®°å½•çš„å¾®ä»»åŠ¡ã€‚</li>
<li>Promise å½“è°ƒç”¨ Promise.resolve() æˆ–è€… Promise.reject() çš„æ—¶å€™ï¼Œä¹Ÿä¼šäº§ç”Ÿå¾®ä»»åŠ¡ã€‚</li>
</ul>
<p>åœ¨å½“å‰å®ä»»åŠ¡ä¸­çš„ JavaScript å¿«æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¹Ÿå°±åœ¨ JavaScript å¼•æ“å‡†å¤‡é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ¸…ç©ºè°ƒç”¨æ ˆçš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šæ£€æŸ¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ã€‚WHATWG æŠŠæ‰§è¡Œå¾®ä»»åŠ¡çš„æ—¶é—´ç‚¹ç§°ä¸ºæ£€æŸ¥ç‚¹ã€‚</p>
<p>å¦‚æœåœ¨æ‰§è¡Œå¾®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†æ–°çš„å¾®ä»»åŠ¡ï¼ŒåŒæ ·ä¼šå°†è¯¥å¾®ä»»åŠ¡æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒV8 å¼•æ“ä¸€ç›´å¾ªç¯æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæ‰ç®—æ‰§è¡Œç»“æŸã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°çš„å¾®ä»»åŠ¡å¹¶ä¸ä¼šæ¨è¿Ÿåˆ°ä¸‹ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å½“å‰çš„å®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œã€‚</p>
<ul>
<li>å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡æ˜¯ç»‘å®šçš„ï¼Œæ¯ä¸ªå®ä»»åŠ¡åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºè‡ªå·±çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>
<li>å¾®ä»»åŠ¡çš„æ‰§è¡Œæ—¶é•¿ä¼šå½±å“åˆ°å½“å‰å®ä»»åŠ¡çš„æ—¶é•¿ã€‚</li>
<li>åœ¨ä¸€ä¸ªå®ä»»åŠ¡ä¸­ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªç”¨äºå›è°ƒçš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå¾®ä»»åŠ¡éƒ½æ—©äºå®ä»»åŠ¡æ‰§è¡Œã€‚</li>
</ul>
<p>é€šè¿‡å¼‚æ­¥æ“ä½œè§£å†³äº†åŒæ­¥æ“ä½œçš„æ€§èƒ½é—®é¢˜ï¼›é€šè¿‡å¾®ä»»åŠ¡è§£å†³äº†å®æ—¶æ€§çš„é—®é¢˜ã€‚</p>
<p><strong>W3C æœ€æ–°è§£é‡Š</strong>:</p>
<ul>
<li><p>æ¯ä¸€ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡ç±»å‹ï¼ŒåŒä¸€ä¸ªç±»å‹çš„ä»»åŠ¡å¿…é¡»åœ¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸åŒç±»å‹çš„ä»»åŠ¡å¯ä»¥åˆ†å±äºä¸åŒçš„é˜Ÿåˆ—ï¼Œåœ¨ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä»ä¸åŒçš„é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚</p>
</li>
<li><p>æµè§ˆå™¨å¿…é¡»å‡†å¤‡å¥½ä¸€ä¸ªå¾®é˜Ÿåˆ—ï¼Œå¾®é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼˜å…ˆæ‰€æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œã€‚</p>
</li>
</ul>
<p>å› æ­¤ç°åœ¨ chrome ä¸­è‡³å°‘æœ‰ 3 ä¸ªé˜Ÿåˆ—ï¼š</p>
<ul>
<li>å»¶æ—¶é˜Ÿåˆ—ï¼š ç”¨äºå­˜æ”¾å®šæ—¶å™¨åˆ°è¾¾åçš„å›è°ƒä»»åŠ¡ï¼Œä¼˜å…ˆçº§ä¸­</li>
<li>äº¤äº’ä»»åŠ¡ï¼š ç”¨äºå­˜æ”¾ç”¨æˆ·äº¤äº’äº§ç”Ÿçš„ä»»åŠ¡ï¼Œä¼˜å…ˆçº§é«˜</li>
<li>å¾®é˜Ÿåˆ—ï¼š ç”¨äºå­˜æ”¾æœ€å¿«éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¼˜å…ˆçº§æœ€é«˜</li>
</ul>
<h4 id="Promise-then-è¿”å›-Promise-çš„è¡Œä¸º"><a href="#Promise-then-è¿”å›-Promise-çš„è¡Œä¸º" class="headerlink" title="Promise.then è¿”å› Promise çš„è¡Œä¸º"></a>Promise.then è¿”å› Promise çš„è¡Œä¸º</h4><p>å½“ä¸€ä¸ª promise.then æ–¹æ³•è¿”å›å¦ä¸€ä¸ª Promise æ—¶ï¼Œthenable çš„çŠ¶æ€ä¼šå¸æ”¶è¿”å›çš„ promise çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ thenable çš„çŠ¶æ€ä¸è¿”å›çš„ promise çŠ¶æ€ä¿æŒä¸€è‡´</p>
<p>ä½†æ˜¯è¿™ç§çŠ¶æ€å¹¶ä¸æ˜¯ç«‹å³å¸æ”¶çš„ï¼Œè¿”å›çš„ promise ä¼šè¢«ä½¿ç”¨ then æ–¹æ³•ï¼ŒåŒ…è£…æˆæ–°çš„ promise å¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°å¾®é˜Ÿåˆ—ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//1 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//3 æ‰“å°0</span></span><br><span class="line">    <span class="comment">//4 åŒ…è£…æˆ (Promise.resolve(4).then(res=&gt;res)).then(res=&gt;res)  =&gt; p4.then(res=&gt;res)æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="comment">//7 res=&gt;res æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">4</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res);</span><br><span class="line">    <span class="comment">//10 å®ŒæˆçŠ¶æ€</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//11 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    <span class="comment">//14 æ‰“å°4</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//2 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//5 æ‰“å°1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//6 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">//8 æ‰“å°2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//9 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">//12 æ‰“å°3</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//13 æ·»åŠ åˆ°å¾®é˜Ÿåˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">//15 æ‰“å°3</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-http/â‘£æµè§ˆå™¨å·¥ä½œåŸç†"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/142898c1a436/"
    >æµè§ˆå™¨å·¥ä½œåŸç† â‘£ V8ç›¸å…³åŸç†</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/142898c1a436/" class="article-date">
  <time datetime="2022-05-25T01:55:26.000Z" itemprop="datePublished">2022-05-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTTP%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8/">HTTPä¸æµè§ˆå™¨</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h4><p>JavaScript æ˜¯ä¸€ç§å¼±ç±»å‹çš„ã€åŠ¨æ€çš„è¯­è¨€.</p>
<ul>
<li>å¼±ç±»å‹ï¼Œæ„å‘³ç€ä½ ä¸éœ€è¦å‘Šè¯‰ JavaScript å¼•æ“è¿™ä¸ªæˆ–é‚£ä¸ªå˜é‡æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼ŒJavaScript å¼•æ“åœ¨è¿è¡Œä»£ç çš„æ—¶å€™è‡ªå·±ä¼šè®¡ç®—å‡ºæ¥ã€‚</li>
<li>åŠ¨æ€ï¼Œæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ã€‚</li>
</ul>
<p>æ•°æ®ç§‘æŠ€åˆ†ä¸º<strong>åŸå§‹ç±»å‹</strong>å’Œ<strong>å¼•ç”¨ç±»å‹</strong></p>
<p>åŸå§‹ç±»å‹çš„æ•°æ®ä¿å­˜åœ¨ç¯å¢ƒå˜é‡æˆ–è¯æ³•ç¯å¢ƒä¸­,åŒ…å«è¿™ä¸¤ä¸ªåŒºåŸŸçš„æ‰§è¡Œä¸Šä¸‹æ–‡åˆè¢«å‹å…¥è°ƒç”¨æ ˆä¸­,æ‰€ä»¥å¯ä»¥è¯´åŸå§‹ç±»å‹æ˜¯ä¿å­˜åœ¨æ ˆç©ºé—´ä¸­çš„.</p>
<p><strong>å­—ç¬¦ä¸²ï¼Œsymbolï¼Œbigint è™½ç„¶æ˜¯åŸå§‹ç±»å‹ï¼Œå®é™…è¿˜æ˜¯å­˜æ”¾åœ¨å †ç©ºé—´çš„ã€‚</strong></p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹,ä¼šå•ç‹¬å­˜æ”¾åˆ°å †ç©ºé—´ä¸­,åœ¨åˆ†é…äº†å¼•ç”¨ç±»å‹æ•°æ®ä¹‹åä¼šæ‹¿åˆ°ä¸€ä¸ªå †ä¸­çš„åœ°å€,åœ¨æŠŠè¿™ä¸ªåœ°å€ä¿å­˜åˆ°ç¯å¢ƒå˜é‡ä¸­.</p>
<p>JavaScript å¼•æ“éœ€è¦ç”¨æ ˆæ¥ç»´æŠ¤ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œå¦‚æœæ ˆç©ºé—´å¤§äº†è¯ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜æ”¾åœ¨æ ˆç©ºé—´é‡Œé¢ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡ï¼Œè¿›è€Œåˆå½±å“åˆ°æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚JavaScript å¼•æ“éœ€è¦ç¦»å¼€å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåªéœ€è¦å°†æŒ‡é’ˆä¸‹ç§»åˆ°ä¸Šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„åœ°å€å°±å¯ä»¥äº†.</p>
<p>æ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œæ ˆç©ºé—´éƒ½ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾ä¸€äº›åŸå§‹ç±»å‹çš„å°æ•°æ®ã€‚è€Œå¼•ç”¨ç±»å‹çš„æ•°æ®å ç”¨çš„ç©ºé—´éƒ½æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¿™ä¸€ç±»æ•°æ®ä¼šè¢«å­˜æ”¾åˆ°å †ä¸­ï¼Œå †ç©ºé—´å¾ˆå¤§ï¼Œèƒ½å­˜æ”¾å¾ˆå¤šå¤§çš„æ•°æ®ï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯åˆ†é…å†…å­˜å’Œå›æ”¶å†…å­˜éƒ½ä¼šå ç”¨ä¸€å®šçš„æ—¶é—´ã€‚</p>
<p><strong>åŸå§‹ç±»å‹çš„èµ‹å€¼ä¼šå®Œæ•´å¤åˆ¶å˜é‡å€¼ï¼Œè€Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯å¤åˆ¶å¼•ç”¨åœ°å€ã€‚</strong></p>
<p>ä»å†…å­˜çš„è§’åº¦æ¥ç†è§£<a href="/posts/6a1cb22d998b/#%E9%97%AD%E5%8C%85">é—­åŒ…</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;one&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setName</span>(<span class="params">_name</span>) &#123;</span><br><span class="line">      name = _name;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="title function_">foo</span>();</span><br><span class="line">bar.<span class="title function_">setName</span>(<span class="string">&quot;two&quot;</span>);</span><br><span class="line">bar.<span class="title function_">getName</span>();</span><br></pre></td></tr></table></figure>

<p>å½“ foo å‡½æ•°æ‰§è¡Œçš„æ—¶å€™,é¦–å…ˆæ˜¯ç¼–è¯‘çš„è¿‡ç¨‹,å½“é‡åˆ°å¯¹è±¡çš„ä¸¤ä¸ªæ–¹æ³•æ—¶è¿˜éœ€è¦å¯¹ä¸¤ä¸ªæ–¹æ³•è¿›è¡Œè¯æ³•åˆ†æ, å‘ç°å¼•ç”¨äº† name å˜é‡.</p>
<p>JavaScript å¼•æ“åˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œäºæ˜¯åœ¨å †ç©ºé—´åˆ›å»ºæ¢ä¸€ä¸ªâ€œclosure(foo)â€çš„å¯¹è±¡ï¼ˆè¿™æ˜¯ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼ŒJavaScript æ˜¯æ— æ³•è®¿é—®çš„ï¼‰ï¼Œç”¨æ¥ä¿å­˜ name å˜é‡ã€‚å¹¶æŠŠå †ç©ºé—´çš„åœ°å€ä¿å­˜åœ¨ foo æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ç¯å¢ƒå˜é‡ä¸­.</p>
<h4 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h4><p>åˆ†ä¸ºæ ˆå†…å­˜å›æ”¶,å †å†…å­˜å›æ”¶</p>
<p>æ ˆå†…å­˜å›æ”¶éœ€è¦ç”¨åˆ°ä¸€ä¸ª<strong>è®°å½•å½“å‰æ‰§è¡ŒçŠ¶æ€çš„æŒ‡é’ˆï¼ˆç§°ä¸º ESPï¼‰</strong>,æŒ‡å‘çš„å°±æ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡,JavaScript å¼•æ“ä¼šé€šè¿‡å‘ä¸‹ç§»åŠ¨ ESP æ¥é”€æ¯è¯¥å‡½æ•°ä¿å­˜åœ¨æ ˆä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å½“ä¸‹ç§»ä¹‹åå¦‚æœæœ‰æ–°çš„å‡½æ•°è°ƒç”¨,åŸæ¥çš„å†…å­˜ä½ç½®å°±ä¼šå†™å…¥æ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡.</p>
<p>å›æ”¶å †ä¸­çš„åƒåœ¾æ•°æ®ï¼Œå°±éœ€è¦ç”¨åˆ° JavaScript ä¸­çš„åƒåœ¾å›æ”¶å™¨,åƒåœ¾å›æ”¶çš„ç­–ç•¥éƒ½æ˜¯å»ºç«‹<strong>ä»£é™…å‡è¯´</strong>çš„åŸºç¡€ä¹‹ä¸Šçš„</p>
<p>ä»£é™…å‡è¯´æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ˜¯å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜åœ¨çš„æ—¶é—´å¾ˆçŸ­ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¾ˆå¤šå¯¹è±¡ä¸€ç»åˆ†é…å†…å­˜ï¼Œå¾ˆå¿«å°±å˜å¾—ä¸å¯è®¿é—®ï¼›</li>
<li>ç¬¬äºŒä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ï¼Œä¼šæ´»å¾—æ›´ä¹…ã€‚</li>
</ul>
<p>éœ€è¦æ ¹æ®å¯¹è±¡å˜é‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸé•¿çŸ­ä½¿ç”¨ä¸åŒçš„ç­–ç•¥:</p>
<p>åœ¨ V8 ä¸­ä¼šæŠŠå †åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>å’Œ<strong>è€ç”Ÿä»£</strong>ä¸¤ä¸ªåŒºåŸŸï¼Œæ–°ç”Ÿä»£ä¸­å­˜æ”¾çš„æ˜¯ç”Ÿå­˜æ—¶é—´çŸ­çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£ä¸­å­˜æ”¾çš„ç”Ÿå­˜æ—¶é—´ä¹…çš„å¯¹è±¡ã€‚æ–°ç”ŸåŒºé€šå¸¸åªæ”¯æŒ 1 ï½ 8M çš„å®¹é‡.å‰¯åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚ä¸»åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚</p>
<p>åƒåœ¾å›æ”¶å¤§è‡´éƒ½åˆ†ä¸ºä¸€ä¸‹å‡ ä¸ªæ­¥éª¤:</p>
<ul>
<li>æ ‡è®°æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡</li>
<li>æ¸…æ¥šéæ´»åŠ¨å¯¹è±¡</li>
<li>å†…å­˜æ•´ç†,å¹¶ä¸æ˜¯æ‰€æœ‰çš„å›æ”¶ç­–ç•¥éƒ½éœ€è¦è¿™ä¸€æ­¥</li>
</ul>
<p><strong>å‰¯åƒåœ¾å›æ”¶å™¨</strong>ä¸»è¦è´Ÿè´£æ–°ç”ŸåŒºçš„åƒåœ¾å›æ”¶. å¤§å¤šæ•°å°çš„å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…åˆ°æ–°ç”ŸåŒºï¼Œè¿™ä¸ªåŒºåŸŸè™½ç„¶ä¸å¤§ï¼Œä½†æ˜¯åƒåœ¾å›æ”¶è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ã€‚ç”¨ <strong>Scavenge[ËˆskÃ¦vÉªndÊ’]</strong> ç®—æ³•æ¥å¤„ç†.åŸç†æ˜¯:</p>
<p>æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒº.</p>
<p>æ–°åŠ å…¥çš„å¯¹è±¡éƒ½ä¼šå­˜æ”¾åˆ°å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºåŸŸå¿«è¢«å†™æ»¡æ—¶ï¼Œå°±éœ€è¦æ‰§è¡Œä¸€æ¬¡åƒåœ¾æ¸…ç†æ“ä½œã€‚åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦å¯¹å¯¹è±¡åŒºåŸŸä¸­çš„åƒåœ¾åšæ ‡è®°ï¼›æ ‡è®°å®Œæˆä¹‹åï¼Œå°±è¿›å…¥åƒåœ¾æ¸…ç†é˜¶æ®µï¼Œå‰¯åƒåœ¾å›æ”¶å™¨ä¼šæŠŠè¿™äº›å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸä¸­ï¼ŒåŒæ—¶å®ƒè¿˜ä¼šæŠŠè¿™äº›å¯¹è±¡æœ‰åºåœ°æ’åˆ—èµ·æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªå¤åˆ¶è¿‡ç¨‹ï¼Œä¹Ÿå°±ç›¸å½“äºå®Œæˆäº†å†…å­˜æ•´ç†æ“ä½œï¼Œå¤åˆ¶åç©ºé—²åŒºåŸŸå°±æ²¡æœ‰å†…å­˜ç¢ç‰‡äº†ã€‚</p>
<p>å®Œæˆå¤åˆ¶åï¼Œå¯¹è±¡åŒºåŸŸä¸ç©ºé—²åŒºåŸŸè¿›è¡Œè§’è‰²ç¿»è½¬ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„å¯¹è±¡åŒºåŸŸå˜æˆç©ºé—²åŒºåŸŸï¼ŒåŸæ¥çš„ç©ºé—²åŒºåŸŸå˜æˆäº†å¯¹è±¡åŒºåŸŸã€‚è¿™æ ·å°±å®Œæˆäº†åƒåœ¾å¯¹è±¡çš„å›æ”¶æ“ä½œï¼ŒåŒæ—¶è¿™ç§è§’è‰²ç¿»è½¬çš„æ“ä½œè¿˜èƒ½è®©æ–°ç”Ÿä»£ä¸­çš„è¿™ä¸¤å—åŒºåŸŸæ— é™é‡å¤ä½¿ç”¨ä¸‹å»ã€‚</p>
<p>ç”±äºæ–°ç”Ÿä»£ä¸­é‡‡ç”¨çš„ Scavenge ç®—æ³•ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰§è¡Œæ¸…ç†æ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å°†å­˜æ´»çš„å¯¹è±¡ä»å¯¹è±¡åŒºåŸŸå¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸã€‚ä½†å¤åˆ¶æ“ä½œéœ€è¦æ—¶é—´æˆæœ¬ï¼Œå¦‚æœæ–°ç”ŸåŒºç©ºé—´è®¾ç½®å¾—å¤ªå¤§äº†ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸…ç†çš„æ—¶é—´å°±ä¼šè¿‡ä¹…ï¼Œæ‰€ä»¥ä¸ºäº†æ‰§è¡Œæ•ˆç‡ï¼Œä¸€èˆ¬æ–°ç”ŸåŒºçš„ç©ºé—´ä¼šè¢«è®¾ç½®å¾—æ¯”è¾ƒå°ã€‚</p>
<p>ä¹Ÿæ­£æ˜¯å› ä¸ºæ–°ç”ŸåŒºçš„ç©ºé—´ä¸å¤§ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è¢«å­˜æ´»çš„å¯¹è±¡è£…æ»¡æ•´ä¸ªåŒºåŸŸã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript å¼•æ“é‡‡ç”¨äº†å¯¹è±¡æ™‹å‡ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ç»è¿‡ä¸¤æ¬¡åƒåœ¾å›æ”¶ä¾ç„¶è¿˜å­˜æ´»çš„å¯¹è±¡ï¼Œä¼šè¢«ç§»åŠ¨åˆ°è€ç”ŸåŒºä¸­ã€‚</p>
<p><strong>ä¸»åƒåœ¾å›æ”¶å™¨</strong> ä¸»è¦è´Ÿè´£è€ç”ŸåŒºä¸­çš„åƒåœ¾å›æ”¶ã€‚</p>
<p>é™¤äº†æ–°ç”ŸåŒºä¸­æ™‹å‡çš„å¯¹è±¡ï¼Œä¸€äº›å¤§çš„å¯¹è±¡ä¼šç›´æ¥è¢«åˆ†é…åˆ°è€ç”ŸåŒºã€‚å› æ­¤è€ç”ŸåŒºä¸­çš„å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡å ç”¨ç©ºé—´å¤§ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´é•¿ã€‚</p>
<p>ï¼Œè‹¥è¦åœ¨è€ç”ŸåŒºä¸­ä½¿ç”¨ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¤åˆ¶è¿™äº›å¤§çš„å¯¹è±¡å°†ä¼šèŠ±è´¹æ¯”è¾ƒå¤šçš„æ—¶é—´ï¼Œä»è€Œå¯¼è‡´å›æ”¶æ‰§è¡Œæ•ˆç‡ä¸é«˜ï¼ŒåŒæ—¶è¿˜ä¼šæµªè´¹ä¸€åŠçš„ç©ºé—´ã€‚å› è€Œï¼Œä¸»åƒåœ¾å›æ”¶å™¨æ˜¯é‡‡ç”¨æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰çš„ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</p>
<p>æ ‡è®°é˜¶æ®µå°±æ˜¯ä»ä¸€ç»„æ ¹å…ƒç´ (è°ƒç”¨æ ˆ)å¼€å§‹ï¼Œé€’å½’éå†è¿™ç»„æ ¹å…ƒç´ ï¼Œåœ¨è¿™ä¸ªéå†è¿‡ç¨‹ä¸­ï¼Œèƒ½åˆ°è¾¾çš„å…ƒç´ ç§°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œæ²¡æœ‰åˆ°è¾¾çš„å…ƒç´ å°±å¯ä»¥åˆ¤æ–­ä¸ºåƒåœ¾æ•°æ®ã€‚</p>
<p>å› ä¸ºæ¸…é™¤éƒ¨åˆ†å†…å­˜ä¼šäº§ç”Ÿç¢ç‰‡,è€Œç¢ç‰‡è¿‡å¤šä¼šå¯¼è‡´å¤§å¯¹è±¡æ— æ³•åˆ†é…åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜ï¼Œäºæ˜¯åˆäº§ç”Ÿäº†å¦å¤–ä¸€ç§ç®—æ³•â€”â€”<strong>æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰</strong>,è¿™ä¸ªæ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸æ ‡è®° - æ¸…é™¤ç®—æ³•é‡Œçš„æ˜¯ä¸€æ ·çš„ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚</p>
<p><strong>å…¨åœé¡¿</strong>,å†…å­˜å›æ”¶è¿‡ç¨‹è¿‡é•¿,åˆå› ä¸º JS ä¸ºå•çº¿ç¨‹è€Œé˜»å¡ JS æ‰§è¡Œ,è¿™ä¸ªé—®é¢˜å«å…¨åœé¡¿.</p>
<p>å¯¹äºæ–°ç”Ÿä»£çš„å†…å­˜å›æ”¶å½±å“ä¸å¤§,å› ä¸ºå†…å­˜æ¯”è¾ƒå°,å¯ä»¥å…¨åœé¡¿ç­‰å¾…æ‰§è¡Œå®Œæˆ.å¯¹äºè€ç”Ÿä»£ä¼šå°†æ ‡è®°è¿‡ç¨‹åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å­æ ‡è®°è¿‡ç¨‹ï¼ŒåŒæ—¶è®©åƒåœ¾å›æ”¶æ ‡è®°å’Œ JavaScript åº”ç”¨é€»è¾‘äº¤æ›¿è¿›è¡Œï¼Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç®—æ³•ç§°ä¸º<strong>å¢é‡æ ‡è®°ï¼ˆIncremental Markingï¼‰ç®—æ³•</strong></p>
<p>ä½¿ç”¨å¢é‡æ ‡è®°ç®—æ³•ï¼Œå¯ä»¥æŠŠä¸€ä¸ªå®Œæ•´çš„åƒåœ¾å›æ”¶ä»»åŠ¡æ‹†åˆ†ä¸ºå¾ˆå¤šå°çš„ä»»åŠ¡ï¼Œè¿™äº›å°çš„ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ¯”è¾ƒçŸ­ï¼Œå¯ä»¥ç©¿æ’åœ¨å…¶ä»–çš„ JavaScript ä»»åŠ¡ä¸­é—´æ‰§è¡Œï¼Œè¿™æ ·å½“æ‰§è¡Œä¸Šè¿°åŠ¨ç”»æ•ˆæœæ—¶ï¼Œå°±ä¸ä¼šè®©ç”¨æˆ·å› ä¸ºåƒåœ¾å›æ”¶ä»»åŠ¡è€Œæ„Ÿå—åˆ°é¡µé¢çš„å¡é¡¿äº†ã€‚</p>
<h4 id="JS-å¦‚ä½•æ‰§è¡Œ"><a href="#JS-å¦‚ä½•æ‰§è¡Œ" class="headerlink" title="JS å¦‚ä½•æ‰§è¡Œ"></a>JS å¦‚ä½•æ‰§è¡Œ</h4><p>ç”±è§£é‡Šå‹è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œåœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½éœ€è¦é€šè¿‡è§£é‡Šå™¨å¯¹ç¨‹åºè¿›è¡ŒåŠ¨æ€è§£é‡Šå’Œæ‰§è¡Œã€‚</p>
<p>ç¼–è¯‘å‹è¯­è¨€åœ¨ç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦ç»è¿‡ç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå¹¶ä¸”ç¼–è¯‘ä¹‹åä¼šç›´æ¥ä¿ç•™æœºå™¨èƒ½è¯»æ‡‚çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™æ ·æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œéƒ½å¯ä»¥ç›´æ¥è¿è¡Œè¯¥äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å†æ¬¡é‡æ–°ç¼–è¯‘äº†</p>
<p><img src="/posts/142898c1a436/0001.webp"></p>
<p>å­—èŠ‚ç å°±æ˜¯ä»‹äº AST å’Œæœºå™¨ç ä¹‹é—´çš„ä¸€ç§ä»£ç ã€‚ä½†æ˜¯ä¸ç‰¹å®šç±»å‹çš„æœºå™¨ç æ— å…³ï¼Œå­—èŠ‚ç éœ€è¦é€šè¿‡è§£é‡Šå™¨å°†å…¶è½¬æ¢ä¸ºæœºå™¨ç åæ‰èƒ½æ‰§è¡Œã€‚</p>
<p>å¦‚æœæœ‰ä¸€æ®µç¬¬ä¸€æ¬¡æ‰§è¡Œçš„å­—èŠ‚ç ï¼Œè§£é‡Šå™¨ Ignition ä¼šé€æ¡è§£é‡Šæ‰§è¡Œã€‚è§£é‡Šå™¨ Ignition é™¤äº†è´Ÿè´£ç”Ÿæˆå­—èŠ‚ç ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ã€‚åœ¨ Ignition æ‰§è¡Œå­—èŠ‚ç çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æœ‰çƒ­ç‚¹ä»£ç ï¼ˆHotSpotï¼‰ï¼Œæ¯”å¦‚ä¸€æ®µä»£ç è¢«é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œè¿™ç§å°±ç§°ä¸ºçƒ­ç‚¹ä»£ç ï¼Œé‚£ä¹ˆåå°çš„ç¼–è¯‘å™¨ TurboFan å°±ä¼šæŠŠè¯¥æ®µçƒ­ç‚¹çš„å­—èŠ‚ç ç¼–è¯‘ä¸ºé«˜æ•ˆçš„æœºå™¨ç ï¼Œç„¶åå½“å†æ¬¡æ‰§è¡Œè¿™æ®µè¢«ä¼˜åŒ–çš„ä»£ç æ—¶ï¼Œåªéœ€è¦æ‰§è¡Œç¼–è¯‘åçš„æœºå™¨ç å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>å­—èŠ‚ç é…åˆè§£é‡Šå™¨å’Œç¼–è¯‘å™¨æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´å¾ˆç«çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ Java å’Œ Python çš„è™šæ‹Ÿæœºä¹Ÿéƒ½æ˜¯åŸºäºè¿™ç§æŠ€æœ¯å®ç°çš„ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æŠ€æœ¯ç§°ä¸ºå³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ã€‚</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-javascript/æ‰§è¡Œæœºåˆ¶"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/b672c2864ca4/"
    >Javascript æ‰§è¡Œæœºåˆ¶</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/b672c2864ca4/" class="article-date">
  <time datetime="2022-05-24T01:17:59.000Z" itemprop="datePublished">2022-05-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> / <a class="article-category-link" href="/categories/JavaScript/%E5%9F%BA%E7%A1%80/">åŸºç¡€</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="å˜é‡æå‡ä¸æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#å˜é‡æå‡ä¸æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="å˜é‡æå‡ä¸æ‰§è¡Œä¸Šä¸‹æ–‡"></a>å˜é‡æå‡ä¸æ‰§è¡Œä¸Šä¸‹æ–‡</h4><p>JS ä»£ç è¿è¡Œä¼šåˆ†ä¸º<strong>ç¼–è¯‘</strong>å’Œ<strong>æ‰§è¡Œ</strong>ä¸¤ä¸ªé˜¶æ®µ</p>
<p>æ‰€è°“çš„å˜é‡æå‡ï¼Œæ˜¯æŒ‡åœ¨ JavaScript ä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ŒJavaScript å¼•æ“æŠŠå˜é‡çš„å£°æ˜éƒ¨åˆ†å’Œå‡½æ•°çš„å£°æ˜éƒ¨åˆ†æå‡åˆ°ä»£ç å¼€å¤´çš„â€œè¡Œä¸ºâ€ã€‚å˜é‡è¢«æå‡åï¼Œä¼šç»™å˜é‡è®¾ç½®é»˜è®¤å€¼å¹¶å­˜åˆ°å†…å­˜ä¸­ï¼Œè¿™ä¸ªé»˜è®¤å€¼å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ undefinedã€‚</p>
<p>æœ€ç»ˆåœ¨ç¼–è¯‘é˜¶æ®µä¼šç”Ÿæˆä¸¤éƒ¨åˆ†å†…å®¹ï¼š<strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution context</strong>ï¼‰å’Œ <strong>å¯æ‰§è¡Œä»£ç </strong>ã€‚</p>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ JavaScript æ‰§è¡Œä¸€æ®µä»£ç æ—¶çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿›å…¥è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¡®å®šè¯¥å‡½æ•°åœ¨æ‰§è¡ŒæœŸé—´ç”¨åˆ°çš„è¯¸å¦‚ thisã€å˜é‡ã€å¯¹è±¡ä»¥åŠå‡½æ•°ç­‰ã€‚</p>
<p><img src="/posts/b672c2864ca4/0003.webp"></p>
<ul>
<li>å½“ JavaScript æ‰§è¡Œå…¨å±€ä»£ç çš„æ—¶å€™ï¼Œä¼šç¼–è¯‘å…¨å±€ä»£ç å¹¶åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè€Œä¸”åœ¨æ•´ä¸ªé¡µé¢çš„ç”Ÿå­˜å‘¨æœŸå†…ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åªæœ‰ä¸€ä»½ã€‚</li>
<li>å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä½“å†…çš„ä»£ç ä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œåˆ›å»ºçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¢«é”€æ¯ã€‚</li>
<li>å½“ä½¿ç”¨ eval å‡½æ•°çš„æ—¶å€™ï¼Œeval çš„ä»£ç ä¹Ÿä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h4 id="è°ƒç”¨æ ˆ"><a href="#è°ƒç”¨æ ˆ" class="headerlink" title="è°ƒç”¨æ ˆ"></a>è°ƒç”¨æ ˆ</h4><p>å…ˆè¿›å…ˆå‡º,æ‰§è¡Œä¸Šä¸‹æ–‡é€šè¿‡è°ƒç”¨æ ˆæ¥ç®¡ç†</p>
<p>å…¨å±€æ‰§è¡Œæ˜¯ä¸Šä¸‹æ–‡æœ€å…ˆè¢«å‹å…¥æ ˆä¸­, æ¥ä¸‹æ¥å¦‚æœæœ‰å‡½æ•°æ‰§è¡Œ,å½“ä¸ºå‡½æ•°åˆ›å»ºå¥½æ‰§è¡Œä¸Šä¸‹æ–‡å,ä¹Ÿä¼šè¢«å‹å…¥æ ˆä¸­,å½“å‡½æ•°è¿”å›æ—¶,æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆé¡¶å¼¹å‡º.</p>
<p>è°ƒç”¨æ ˆæ˜¯ JavaScript å¼•æ“è¿½è¸ªå‡½æ•°æ‰§è¡Œçš„ä¸€ä¸ªæœºåˆ¶ï¼Œå½“ä¸€æ¬¡æœ‰å¤šä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œé€šè¿‡è°ƒç”¨æ ˆå°±èƒ½å¤Ÿè¿½è¸ªåˆ°å“ªä¸ªå‡½æ•°æ­£åœ¨è¢«æ‰§è¡Œä»¥åŠå„å‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚</p>
<p>ä½¿ç”¨ <code>console.trace()</code> å¯ä»¥æŸ¥çœ‹å½“å‰çš„è°ƒç”¨æ ˆä¿¡æ¯.</p>
<h4 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h4><p>ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œè¯¥ä½ç½®å†³å®šäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚é€šä¿—åœ°ç†è§£ï¼Œä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå³ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡å’Œå‡½æ•°çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ES6 æ€»å…±æœ‰ä¸‰ç§ä½œç”¨äº, <strong>å…¨å±€ä½œç”¨åŸŸ</strong>,<strong>å‡½æ•°ä½œç”¨åŸŸ</strong>,<strong>å—çº§ä½œç”¨åŸŸ</strong>,å¦‚æœæ²¡æœ‰å—çº§ä½œç”¨åŸŸä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜</p>
<ul>
<li>å˜é‡å®¹æ˜“åœ¨ä¸è¢«å¯Ÿè§‰çš„æƒ…å†µä¸‹è¢«è¦†ç›–æ‰</li>
<li>æœ¬åº”é”€æ¯çš„å˜é‡æ²¡æœ‰è¢«é”€æ¯</li>
</ul>
<p>JS é€šè¿‡ <code>const</code>, <code>let</code> å®ç°å—çº§ä½œç”¨åŸŸ,åœ¨åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„æ—¶å€™, è¿™ä¸¤ä¸ªå…³é”®å­—ä¼šå•ç‹¬å­˜æ”¾åœ¨<strong>è¯æ³•ç¯å¢ƒ</strong>ä¸­,è€Œ <code>var</code> å£°æ˜çš„å˜é‡äºå‡½æ•°ä¼šå­˜æ”¾åœ¨å˜é‡ç¯å¢ƒä¸­.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="number">5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>

<p>åœ¨è¯æ³•ç¯å¢ƒå†…éƒ¨ï¼Œç»´æŠ¤äº†ä¸€ä¸ªå°å‹æ ˆç»“æ„ï¼Œæ ˆåº•æ˜¯å‡½æ•°æœ€å¤–å±‚çš„å˜é‡ï¼Œè¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸå—åï¼Œå°±ä¼šæŠŠè¯¥ä½œç”¨åŸŸå—å†…éƒ¨çš„å˜é‡å‹åˆ°æ ˆé¡¶ï¼›å½“ä½œç”¨åŸŸæ‰§è¡Œå®Œæˆä¹‹åï¼Œè¯¥ä½œç”¨åŸŸçš„ä¿¡æ¯å°±ä¼šä»æ ˆé¡¶å¼¹å‡ºï¼Œè¿™å°±æ˜¯è¯æ³•ç¯å¢ƒçš„ç»“æ„ã€‚è¿™é‡Œæ‰€è®²çš„å˜é‡æ˜¯æŒ‡é€šè¿‡ let æˆ–è€… const å£°æ˜çš„å˜é‡ã€‚</p>
<p><img src="/posts/b672c2864ca4/0001.webp"></p>
<p>æŸ¥æ‰¾æ–¹å¼æ˜¯ï¼šæ²¿ç€è¯æ³•ç¯å¢ƒçš„æ ˆé¡¶å‘ä¸‹æŸ¥è¯¢ï¼Œå¦‚æœåœ¨è¯æ³•ç¯å¢ƒä¸­çš„æŸä¸ªå—ä¸­æŸ¥æ‰¾åˆ°äº†ï¼Œå°±ç›´æ¥è¿”å›ç»™ JavaScript å¼•æ“ï¼Œå¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œé‚£ä¹ˆç»§ç»­åœ¨å˜é‡ç¯å¢ƒä¸­æŸ¥æ‰¾ã€‚</p>
<p><img src="/posts/b672c2864ca4/0002.webp"></p>
<h4 id="ä½œç”¨åŸŸé“¾äºè¯æ³•ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸé“¾äºè¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸé“¾äºè¯æ³•ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸé“¾äºè¯æ³•ä½œç”¨åŸŸ</h4><p><strong>ä½œç”¨åŸŸé“¾æ˜¯ç”±è¯æ³•ä½œç”¨åŸŸå†³å®šçš„.</strong></p>
<p>ä¸‹é¢çš„ä»£ç å½“ <code>bar</code> åœ¨ <code>foo</code> å†…éƒ¨è°ƒç”¨çš„æ—¶å€™, ä¼šå…ˆæŸ¥æ‰¾è‡ªå·±çš„è¯æ³•ç¯å¢ƒä¸­æœ‰æ²¡æœ‰ <code>name</code>, ç„¶åæŸ¥æ‰¾è‡ªå·±çš„ç¯å¢ƒå˜é‡.</p>
<p>ä½†æ˜¯å½“å‘ç°éƒ½æ²¡æœ‰çš„æ—¶å€™å¹¶ä¸ä¼šåœ¨ <code>foo</code> çš„è¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒä¸­æŸ¥æ‰¾,è€Œæ˜¯ç›´æ¥æŸ¥æ‰¾å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„è¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;one&quot;</span>;</span><br><span class="line">  <span class="title function_">bar</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;tow&quot;</span>;</span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å˜é‡æŸ¥æ‰¾é¡ºåºçš„å°±æ˜¯ä½œç”¨åŸŸé“¾,å…¶å®åœ¨æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡ç¯å¢ƒä¸­ï¼Œéƒ½åŒ…å«äº†ä¸€ä¸ªå¤–éƒ¨å¼•ç”¨ï¼Œç”¨æ¥æŒ‡å‘å¤– éƒ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªå¤–éƒ¨å¼•ç”¨ç§°ä¸º <code>outer</code>. ä½†æ˜¯<strong>å†³å®šä½œç”¨åŸŸé“¾çš„ä¸æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡,è€Œæ˜¯è¯æ³•ä½œç”¨åŸŸ</strong></p>
<p><strong>è¯æ³•ä½œç”¨åŸŸå°±æ˜¯æŒ‡ä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¸­å‡½æ•°å£°æ˜çš„ä½ç½®æ¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯æ³•ä½œç”¨åŸŸæ˜¯é™æ€çš„ä½œç”¨åŸŸï¼Œé€šè¿‡å®ƒå°±èƒ½å¤Ÿé¢„æµ‹ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•æŸ¥æ‰¾æ ‡è¯†ç¬¦ã€‚</strong></p>
<p><code>foo</code> å’Œ <code>bar</code> çš„ä¸Šçº§ä½œç”¨åŸŸéƒ½æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¦‚æœ foo æˆ–è€… bar å‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªå®ƒä»¬æ²¡æœ‰å®šä¹‰çš„å˜é‡ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šåˆ°å…¨å±€ä½œç”¨åŸŸå»æŸ¥æ‰¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯æ³•ä½œç”¨åŸŸæ˜¯ä»£ç ç¼–è¯‘é˜¶æ®µå°±å†³å®šå¥½çš„ï¼Œå’Œå‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„æ²¡æœ‰å…³ç³»ã€‚</p>
<h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><p><strong>æ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•° getName å’Œ setName æ€»æ˜¯å¯ä»¥è®¿é—®å®ƒä»¬çš„å¤–éƒ¨å‡½æ•° foo ä¸­çš„å˜é‡</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;one&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setName</span>(<span class="params">_name</span>) &#123;</span><br><span class="line">      name = _name;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="title function_">foo</span>();</span><br><span class="line">bar.<span class="title function_">setName</span>(<span class="string">&quot;two&quot;</span>);</span><br><span class="line">bar.<span class="title function_">getName</span>();</span><br></pre></td></tr></table></figure>

<p>å½“ obj å¯¹è±¡è¿”å›ç»™å…¨å±€å˜é‡ bar æ—¶ï¼Œè™½ç„¶ foo å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸï¼Œä½†æ˜¯ getName å’Œ setName å‡½æ•°ä¾ç„¶å¯ä»¥ä½¿ç”¨ foo å‡½æ•°ä¸­çš„å˜é‡ name.</p>
<p>è™½ç„¶ foo å‡½æ•°æ‰§è¡Œç»“æŸåæ‰§è¡Œä¸Šä¸‹æ–‡å·²ç»ä»è°ƒç”¨æ ˆä¸­å¼¹å‡º,ä½†æ˜¯ç”±äº obj å¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨äº†å†…éƒ¨ name å˜é‡,æ‰€ä»¥ name å˜é‡è¿˜æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­,è€Œä¿å­˜ name å˜é‡ç§°ä½œé—­åŒ…. æ— è®ºåœ¨é‚£é‡Œè°ƒç”¨ obj å¯¹è±¡çš„æ–¹æ³•,éƒ½å¯ä»¥è®¿é—®åˆ° name å˜é‡.</p>
<p><strong>åœ¨ JavaScript ä¸­ï¼Œæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿è¯¥å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å°±æŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ã€‚</strong></p>
<p>è€Œè°ƒç”¨ obj æ–¹æ³•çš„æ—¶å€™,ä½œç”¨åŸŸé“¾çš„é¡ºåºå°±æ˜¯:å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡â€“&gt;foo å‡½æ•°é—­åŒ…â€“&gt; å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</p>
<h4 id="é—­åŒ…å›æ”¶"><a href="#é—­åŒ…å›æ”¶" class="headerlink" title="é—­åŒ…å›æ”¶"></a>é—­åŒ…å›æ”¶</h4><p>å¦‚æœå¼•ç”¨é—­åŒ…çš„å‡½æ•°æ˜¯ä¸ªå±€éƒ¨å˜é‡ï¼Œç­‰å‡½æ•°é”€æ¯åï¼Œåœ¨ä¸‹æ¬¡ JavaScript å¼•æ“æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåˆ¤æ–­é—­åŒ…è¿™å—å†…å®¹å¦‚æœå·²ç»ä¸å†è¢«ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆ JavaScript å¼•æ“çš„åƒåœ¾å›æ”¶å™¨å°±ä¼šå›æ”¶è¿™å—å†…å­˜ã€‚</p>
<p><strong>å¦‚æœè¯¥é—­åŒ…ä¼šä¸€ç›´ä½¿ç”¨ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ä½œä¸ºå…¨å±€å˜é‡è€Œå­˜åœ¨ï¼›ä½†å¦‚æœä½¿ç”¨é¢‘ç‡ä¸é«˜ï¼Œè€Œä¸”å ç”¨å†…å­˜åˆæ¯”è¾ƒå¤§çš„è¯ï¼Œé‚£å°±å°½é‡è®©å®ƒæˆä¸ºä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚</strong></p>
<h4 id="this"><a href="#this" class="headerlink" title="this"></a>this</h4><p>å®ç° this çš„ä¸€ä¸ªåˆè¡·å°±æ˜¯ <strong>åœ¨å¯¹è±¡å†…éƒ¨çš„æ–¹æ³•ä¸­ä½¿ç”¨å¯¹è±¡å†…éƒ¨çš„å±æ€§</strong></p>
<p>å› ä¸ºä½œç”¨åŸŸé“¾ç”±è¯æ³•ä½œç”¨åŸŸå†³å®š,æ‰€ä»¥è°ƒç”¨ getName å¹¶ä¸ä¼šè·å–å¯¹è±¡å±æ€§è€Œæ˜¯åœ¨å…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;one&quot;</span>,</span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„-this"><a href="#å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„-this" class="headerlink" title="å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this"></a>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this</h5><p>this å’Œä½œç”¨åŸŸé“¾çš„å”¯ä¸€äº¤ç‚¹ï¼Œä½œç”¨åŸŸé“¾çš„æœ€åº•ç«¯åŒ…å«äº† window å¯¹è±¡ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this ä¹Ÿæ˜¯æŒ‡å‘ window å¯¹è±¡ã€‚</p>
<p>è¿™ç§è®¾è®¡å¾ˆå®¹æ˜“è¯¯æ“ä½œ,æ‰€ä»¥ä¸¥æ ¼æ¨¡å¼ä¸‹é»˜è®¤æ‰§è¡Œä¸€ä¸ªå‡½æ•° this ä¸º undefined</p>
<h5 id="å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„-this"><a href="#å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„-this" class="headerlink" title="å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this"></a>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this</h5><p>ç›´æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this ä¹Ÿæ˜¯æŒ‡å‘ window å¯¹è±¡çš„. ä½†æ˜¯å¯ä»¥é€šè¿‡ <code>call</code> <code>apply</code> <code>bind</code> ä¿®æ”¹ this çš„æŒ‡å‘</p>
<h5 id="é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•-this"><a href="#é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•-this" class="headerlink" title="é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³• this"></a>é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³• this</h5><p>this æ˜¯æŒ‡å‘å¯¹è±¡æœ¬èº«çš„ã€‚ ä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨è°ƒç”¨çš„æ—¶å€™è½¬åŒ–ä¸ºäº†è¿™æ ·çš„å½¢å¼ <code>myObj.showThis.call(myObj)</code></p>
<h4 id="æ„é€ å‡½æ•°ä¸­çš„-this"><a href="#æ„é€ å‡½æ•°ä¸­çš„-this" class="headerlink" title="æ„é€ å‡½æ•°ä¸­çš„ this"></a>æ„é€ å‡½æ•°ä¸­çš„ this</h4><p>this æŒ‡å‘åˆ›å»ºçš„å®ä¾‹. new æ“ä½œç¬¦å®é™…ä¸Šåšäº†ä¸€ä¸‹å‡ ä»¶äº‹.</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å• JavaScript å¯¹è±¡ï¼ˆå³{}ï¼‰ï¼›</li>
<li>ä¸ºæ­¥éª¤ 1 æ–°åˆ›å»ºçš„å¯¹è±¡æ·»åŠ å±æ€§__proto__ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ ï¼›</li>
<li>å°†æ­¥éª¤ 1 æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸º this çš„ä¸Šä¸‹æ–‡ ï¼›</li>
<li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å› thisã€‚</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6%E5%9F%BA%E7%A1%80/" rel="tag">ES6åŸºç¡€</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="posts-http/â‘¢æµè§ˆå™¨å·¥ä½œåŸç†"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/posts/52cc0ef48986/"
    >æµè§ˆå™¨å·¥ä½œåŸç† â‘¢ æ¸²æŸ“æµç¨‹</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/52cc0ef48986/" class="article-date">
  <time datetime="2022-05-22T09:31:30.000Z" itemprop="datePublished">2022-05-22</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/HTTP%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8/">HTTPä¸æµè§ˆå™¨</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="æ¸²æŸ“æµç¨‹"><a href="#æ¸²æŸ“æµç¨‹" class="headerlink" title="æ¸²æŸ“æµç¨‹"></a>æ¸²æŸ“æµç¨‹</h4><ul>
<li><p>è§£æ HTML ç”Ÿæˆ DOM æ ‘</p>
</li>
<li><p>è®¡ç®—æ ·å¼</p>
<p>å°† CSS æ–‡æœ¬è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ç»“æ„â€”â€”styleSheetsã€‚</p>
<p>CSS æ–‡æœ¬ä¸­æœ‰å¾ˆå¤šå±æ€§å€¼ï¼Œå¦‚ 2emã€blueã€boldï¼Œè¿™äº›ç±»å‹æ•°å€¼ä¸å®¹æ˜“è¢«æ¸²æŸ“å¼•æ“ç†è§£ï¼Œæ‰€ä»¥éœ€è¦å°†æ‰€æœ‰å€¼è½¬æ¢ä¸ºæ¸²æŸ“å¼•æ“å®¹æ˜“ç†è§£çš„ã€æ ‡å‡†åŒ–çš„è®¡ç®—å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å±æ€§å€¼æ ‡å‡†åŒ–ã€‚</p>
<p>è®¡ç®—å‡º DOM æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“æ ·å¼,æœ€ç»ˆçš„æ ·å¼ä¿å­˜åœ¨ ComputedStyle ç»“æ„å†…,åœ¨æµè§ˆå™¨çš„å¼€å‘è¿™å·¥å…·ä¸­å¯ä»¥æŸ¥çœ‹.</p>
</li>
<li><p>å¸ƒå±€é˜¶æ®µ</p>
<p>æ¥ä¸‹æ¥å°±éœ€è¦è®¡ç®—å‡º DOM æ ‘ä¸­å¯è§å…ƒç´ çš„å‡ ä½•ä½ç½®ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å«åšå¸ƒå±€ã€‚</p>
<p>DOM æ ‘è¿˜å«æœ‰å¾ˆå¤šä¸å¯è§çš„å…ƒç´ ,æ‰€ä»¥åœ¨æ˜¾ç¤ºä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜è¦é¢å¤–åœ°æ„å»ºä¸€æ£µåªåŒ…å«å¯è§å…ƒç´ å¸ƒå±€æ ‘ã€‚DOM æ ‘ä¸­æ‰€æœ‰ä¸å¯è§çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰åŒ…å«åˆ°å¸ƒå±€æ ‘ä¸­ã€‚</p>
<ul>
<li>éå† DOM æ ‘ä¸­çš„æ‰€æœ‰å¯è§èŠ‚ç‚¹ï¼Œå¹¶æŠŠè¿™äº›èŠ‚ç‚¹åŠ åˆ°å¸ƒå±€æ ‘ä¸­ï¼›</li>
<li>ä¸å¯è§çš„èŠ‚ç‚¹ä¼šè¢«å¸ƒå±€æ ‘å¿½ç•¥æ‰ï¼Œ</li>
<li>åœ¨æ‰§è¡Œå¸ƒå±€æ“ä½œçš„æ—¶å€™ï¼Œä¼šæŠŠå¸ƒå±€è¿ç®—çš„ç»“æœé‡æ–°å†™å›å¸ƒå±€æ ‘ä¸­ï¼Œæ‰€ä»¥å¸ƒå±€æ ‘æ—¢æ˜¯è¾“å…¥å†…å®¹ä¹Ÿæ˜¯è¾“å‡ºå†…å®¹ï¼Œè¿™æ˜¯å¸ƒå±€é˜¶æ®µä¸€ä¸ªä¸åˆç†çš„åœ°æ–¹ï¼Œå› ä¸ºåœ¨å¸ƒå±€é˜¶æ®µå¹¶æ²¡æœ‰æ¸…æ™°åœ°å°†è¾“å…¥å†…å®¹å’Œè¾“å‡ºå†…å®¹åŒºåˆ†å¼€æ¥ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒChrome å›¢é˜Ÿæ­£åœ¨é‡æ„å¸ƒå±€ä»£ç ï¼Œä¸‹ä¸€ä»£å¸ƒå±€ç³»ç»Ÿå« LayoutNGï¼Œè¯•å›¾æ›´æ¸…æ™°åœ°åˆ†ç¦»è¾“å…¥å’Œè¾“å‡ºï¼Œä»è€Œè®©æ–°è®¾è®¡çš„å¸ƒå±€ç®—æ³•æ›´åŠ ç®€å•ã€‚</li>
</ul>
</li>
</ul>
<h4 id="åˆ†å±‚"><a href="#åˆ†å±‚" class="headerlink" title="åˆ†å±‚"></a>åˆ†å±‚</h4><p>å› ä¸ºé¡µé¢ä¸­æœ‰å¾ˆå¤šå¤æ‚çš„æ•ˆæœï¼Œå¦‚ä¸€äº›å¤æ‚çš„ 3D å˜æ¢ã€é¡µé¢æ»šåŠ¨ï¼Œæˆ–è€…ä½¿ç”¨ z-indexing åš z è½´æ’åºç­‰ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™äº›æ•ˆæœï¼Œæ¸²æŸ“å¼•æ“è¿˜éœ€è¦ä¸ºç‰¹å®šçš„èŠ‚ç‚¹ç”Ÿæˆä¸“ç”¨çš„å›¾å±‚ï¼Œå¹¶ç”Ÿæˆä¸€æ£µå¯¹åº”çš„å›¾å±‚æ ‘ï¼ˆLayerTreeï¼‰ã€‚</p>
<p>æ‰“å¼€ Chrome çš„â€œå¼€å‘è€…å·¥å…·â€ï¼Œé€‰æ‹©â€œLayersâ€æ ‡ç­¾ï¼Œå°±å¯ä»¥å¯è§†åŒ–é¡µé¢çš„åˆ†å±‚æƒ…å†µ,æµè§ˆå™¨çš„é¡µé¢å®é™…ä¸Šè¢«åˆ†æˆäº†å¾ˆå¤šå›¾å±‚ï¼Œè¿™äº›å›¾å±‚å åŠ ååˆæˆäº†æœ€ç»ˆçš„é¡µé¢ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<strong>å¹¶ä¸æ˜¯å¸ƒå±€æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªå›¾å±‚ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å¯¹åº”çš„å±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä»å±äºçˆ¶èŠ‚ç‚¹çš„å›¾å±‚ã€‚</strong></p>
<ul>
<li><p>æ‹¥æœ‰ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/web/css/css_positioning/understanding_z_index/the_stacking_context">å±‚å ä¸Šä¸‹æ–‡</a> å±æ€§çš„å…ƒç´ ä¼šè¢«æå‡ä¸ºå•ç‹¬çš„ä¸€å±‚ã€‚<br>æ˜ç¡®å®šä½å±æ€§çš„å…ƒç´ ã€å®šä¹‰é€æ˜å±æ€§çš„å…ƒç´ ã€ä½¿ç”¨ CSS æ»¤é•œçš„å…ƒç´ ç­‰ï¼Œéƒ½æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡å±æ€§ã€‚</p>
</li>
<li><p>éœ€è¦å‰ªè£ï¼ˆclipï¼‰çš„åœ°æ–¹ä¹Ÿä¼šè¢«åˆ›å»ºä¸ºå›¾å±‚ã€‚<br>div çš„å¤§å°é™å®šä¸º 200*200 åƒç´ ï¼Œè€Œ div é‡Œé¢çš„æ–‡å­—å†…å®¹æ¯”è¾ƒå¤šï¼Œæ–‡å­—æ‰€æ˜¾ç¤ºçš„åŒºåŸŸè‚¯å®šä¼šè¶…å‡º 200*200 çš„é¢ç§¯ï¼Œè¿™æ—¶å€™å°±äº§ç”Ÿäº†å‰ªè£ï¼Œæ¸²æŸ“å¼•æ“ä¼šæŠŠè£å‰ªæ–‡å­—å†…å®¹çš„ä¸€éƒ¨åˆ†ç”¨äºæ˜¾ç¤ºåœ¨ div åŒºåŸŸ</p>
<p>å‡ºç°è¿™ç§è£å‰ªæƒ…å†µçš„æ—¶å€™ï¼Œæ¸²æŸ“å¼•æ“ä¼šä¸ºæ–‡å­—éƒ¨åˆ†å•ç‹¬åˆ›å»ºä¸€ä¸ªå±‚ï¼Œå¦‚æœå‡ºç°æ»šåŠ¨æ¡ï¼Œæ»šåŠ¨æ¡ä¹Ÿä¼šè¢«æå‡ä¸ºå•ç‹¬çš„å±‚ã€‚</p>
</li>
</ul>
<h4 id="ç»˜åˆ¶å›¾å±‚"><a href="#ç»˜åˆ¶å›¾å±‚" class="headerlink" title="ç»˜åˆ¶å›¾å±‚"></a>ç»˜åˆ¶å›¾å±‚</h4><p>å›¾å±‚çš„ç»˜åˆ¶æ‹†åˆ†æˆå¾ˆå¤šå°çš„ç»˜åˆ¶æŒ‡ä»¤ï¼Œç„¶åå†æŠŠè¿™äº›æŒ‡ä»¤æŒ‰ç…§é¡ºåºç»„æˆä¸€ä¸ªå¾…ç»˜åˆ¶åˆ—è¡¨,å¼€å‘è€…å·¥å…· çš„ Layers æ ‡ç­¾ï¼Œå¯ä»¥æŸ¥çœ‹ç»˜åˆ¶è¿‡ç¨‹</p>
<p><img src="/posts/52cc0ef48986/0001.webp"></p>
<h4 id="æ …æ ¼åŒ–æ“ä½œ"><a href="#æ …æ ¼åŒ–æ“ä½œ" class="headerlink" title="æ …æ ¼åŒ–æ“ä½œ"></a>æ …æ ¼åŒ–æ“ä½œ</h4><p>å®é™…ä¸Šç»˜åˆ¶æ“ä½œæ˜¯ç”±æ¸²æŸ“å¼•æ“ä¸­çš„åˆæˆçº¿ç¨‹æ¥å®Œæˆçš„ã€‚</p>
<p><img src="/posts/52cc0ef48986/0002.webp"></p>
<p>å½“å›¾å±‚çš„ç»˜åˆ¶åˆ—è¡¨å‡†å¤‡å¥½ä¹‹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠè¯¥ç»˜åˆ¶åˆ—è¡¨æäº¤ï¼ˆcommitï¼‰ç»™åˆæˆçº¿ç¨‹.</p>
<p>åˆæˆçº¿ç¨‹ä¼šå°†å›¾å±‚åˆ’åˆ†ä¸ºå›¾å—ï¼ˆtileï¼‰ï¼Œè¿™äº›å›¾å—çš„å¤§å°é€šå¸¸æ˜¯ 256x256 æˆ–è€… 512x512.</p>
<p>ç„¶å<strong>åˆæˆçº¿ç¨‹ä¼šæŒ‰ç…§è§†å£é™„è¿‘çš„å›¾å—æ¥ä¼˜å…ˆç”Ÿæˆä½å›¾ï¼Œå®é™…ç”Ÿæˆä½å›¾çš„æ“ä½œæ˜¯ç”±æ …æ ¼åŒ–æ¥æ‰§è¡Œçš„ã€‚æ‰€è°“æ …æ ¼åŒ–ï¼Œæ˜¯æŒ‡å°†å›¾å—è½¬æ¢ä¸ºä½å›¾ã€‚è€Œå›¾å—æ˜¯æ …æ ¼åŒ–æ‰§è¡Œçš„æœ€å°å•ä½</strong>.æ¸²æŸ“è¿›ç¨‹ç»´æŠ¤äº†ä¸€ä¸ªæ …æ ¼åŒ–çš„çº¿ç¨‹æ± ï¼Œæ‰€æœ‰çš„å›¾å—æ …æ ¼åŒ–éƒ½æ˜¯åœ¨çº¿ç¨‹æ± å†…æ‰§è¡Œçš„ï¼Œ</p>
<p>é€šå¸¸ï¼Œæ …æ ¼åŒ–è¿‡ç¨‹éƒ½ä¼šä½¿ç”¨ GPU æ¥åŠ é€Ÿç”Ÿæˆï¼Œä½¿ç”¨ GPU ç”Ÿæˆä½å›¾çš„è¿‡ç¨‹å«å¿«é€Ÿæ …æ ¼åŒ–ï¼Œæˆ–è€… GPU æ …æ ¼åŒ–ï¼Œç”Ÿæˆçš„ä½å›¾è¢«ä¿å­˜åœ¨ GPU å†…å­˜ä¸­ã€‚</p>
<p><img src="/posts/52cc0ef48986/0003.webp"></p>
<h4 id="åˆæˆå’Œæ˜¾ç¤º"><a href="#åˆæˆå’Œæ˜¾ç¤º" class="headerlink" title="åˆæˆå’Œæ˜¾ç¤º"></a>åˆæˆå’Œæ˜¾ç¤º</h4><p>å½“æ‰€æœ‰å›¾å—éƒ½è¢«å…‰æ …åŒ–ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—çš„å‘½ä»¤â€”â€”â€œDrawQuadâ€ï¼Œç„¶åå°†è¯¥å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚</p>
<p>æµè§ˆå™¨è¿›ç¨‹é‡Œé¢æœ‰ä¸€ä¸ªå« viz çš„ç»„ä»¶ï¼Œç”¨æ¥æ¥æ”¶åˆæˆçº¿ç¨‹å‘è¿‡æ¥çš„ DrawQuad å‘½ä»¤ï¼Œç„¶åæ ¹æ® DrawQuad å‘½ä»¤ï¼Œå°†å…¶é¡µé¢å†…å®¹ç»˜åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæœ€åå†å°†å†…å­˜æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p>
<h4 id="æµç¨‹æ€»ç»“"><a href="#æµç¨‹æ€»ç»“" class="headerlink" title="æµç¨‹æ€»ç»“"></a>æµç¨‹æ€»ç»“</h4><ul>
<li>æ¸²æŸ“è¿›ç¨‹å°† HTML å†…å®¹è½¬æ¢ä¸ºèƒ½å¤Ÿè¯»æ‡‚çš„ DOM æ ‘ç»“æ„ã€‚</li>
<li>æ¸²æŸ“å¼•æ“å°† CSS æ ·å¼è¡¨è½¬åŒ–ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ styleSheetsï¼Œè®¡ç®—å‡º DOM èŠ‚ç‚¹çš„æ ·å¼ã€‚</li>
<li>åˆ›å»ºå¸ƒå±€æ ‘ï¼Œå¹¶è®¡ç®—å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯ã€‚</li>
<li>å¯¹å¸ƒå±€æ ‘è¿›è¡Œåˆ†å±‚ï¼Œå¹¶ç”Ÿæˆåˆ†å±‚æ ‘ã€‚ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹ã€‚</li>
<li>åˆæˆçº¿ç¨‹å°†å›¾å±‚åˆ†æˆå›¾å—ï¼Œå¹¶åœ¨å…‰æ …åŒ–çº¿ç¨‹æ± ä¸­å°†å›¾å—è½¬æ¢æˆä½å›¾ã€‚</li>
<li>åˆæˆçº¿ç¨‹å‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤ DrawQuad ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚</li>
<li>æµè§ˆå™¨è¿›ç¨‹æ ¹æ® DrawQuad æ¶ˆæ¯ç”Ÿæˆé¡µé¢ï¼Œå¹¶æ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</li>
</ul>
<h4 id="é‡ç»˜ä¸é‡æ’"><a href="#é‡ç»˜ä¸é‡æ’" class="headerlink" title="é‡ç»˜ä¸é‡æ’"></a>é‡ç»˜ä¸é‡æ’</h4><p>å¦‚æœä½ é€šè¿‡ JavaScript æˆ–è€… CSS ä¿®æ”¹å…ƒç´ çš„å‡ ä½•ä½ç½®å±æ€§ï¼Œä¾‹å¦‚æ”¹å˜å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ç­‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè§£æä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡æ’ã€‚æ— ç–‘ï¼Œé‡æ’éœ€è¦æ›´æ–°å®Œæ•´çš„æ¸²æŸ“æµæ°´çº¿ï¼Œæ‰€ä»¥å¼€é”€ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚</p>
<p><img src="/posts/52cc0ef48986/0004.webp"></p>
<p>å¦‚æœä¿®æ”¹äº†å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆå¸ƒå±€é˜¶æ®µå°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºå¹¶æ²¡æœ‰å¼•èµ·å‡ ä½•ä½ç½®çš„å˜æ¢ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿›å…¥äº†ç»˜åˆ¶é˜¶æ®µï¼Œç„¶åæ‰§è¡Œä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡ç»˜ã€‚ç›¸è¾ƒäºé‡æ’æ“ä½œï¼Œé‡ç»˜çœå»äº†å¸ƒå±€å’Œåˆ†å±‚é˜¶æ®µï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡ä¼šæ¯”é‡æ’æ“ä½œè¦é«˜ä¸€äº›ã€‚</p>
<p><img src="/posts/52cc0ef48986/0005.webp"></p>
<p>å¦‚æœæ›´æ”¹ä¸€ä¸ªæ—¢ä¸è¦å¸ƒå±€ä¹Ÿä¸è¦ç»˜åˆ¶çš„å±æ€§,æŠŠè¿™ä¸ªè¿‡ç¨‹å«åšåˆæˆ</p>
<p>ä½¿ç”¨äº† CSS çš„ transform æ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œè¿™å¯ä»¥é¿å¼€é‡æ’å’Œé‡ç»˜é˜¶æ®µï¼Œç›´æ¥åœ¨éä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒåˆæˆåŠ¨ç”»æ“ä½œã€‚è¿™æ ·çš„æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºæ˜¯åœ¨éä¸»çº¿ç¨‹ä¸Šåˆæˆï¼Œå¹¶æ²¡æœ‰å ç”¨ä¸»çº¿ç¨‹çš„èµ„æºï¼Œå¦å¤–ä¹Ÿé¿å¼€äº†å¸ƒå±€å’Œç»˜åˆ¶ä¸¤ä¸ªå­é˜¶æ®µï¼Œæ‰€ä»¥ç›¸å¯¹äºé‡ç»˜å’Œé‡æ’ï¼Œåˆæˆèƒ½å¤§å¤§æå‡ç»˜åˆ¶æ•ˆç‡ã€‚</p>
<p><img src="/posts/52cc0ef48986/0006.webp"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/5/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> SunZhiqi
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.png" alt="å››æœˆå…«æ—¥"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Essay">éšç¬”</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>æ­¤æ—¶æ— å£°èƒœæœ‰å£°ï¼</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="/js/jquery.modal.min.js"></script>
<link rel="stylesheet" href="/css/jquery.modal.min.css" />
<script src="/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>

  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>

    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->

        <div class="pswp__counter"></div>

        <button
          class="pswp__button pswp__button--close"
          title="Close (Esc)"
        ></button>

        <button
          class="pswp__button pswp__button--share"
          style="display: none"
          title="Share"
        ></button>

        <button
          class="pswp__button pswp__button--fs"
          title="Toggle fullscreen"
        ></button>

        <button
          class="pswp__button pswp__button--zoom"
          title="Zoom in/out"
        ></button>

        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>

      <button
        class="pswp__button pswp__button--arrow--left"
        title="Previous (arrow left)"
      ></button>

      <button
        class="pswp__button pswp__button--arrow--right"
        title="Next (arrow right)"
      ></button>

      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/photoswipe.min.css" />
<link rel="stylesheet" href="/css/default-skin.min.css" />
<script src="/js/photoswipe.min.js"></script>
<script src="/js/photoswipe-ui-default.min.js"></script>

<script>
  function viewer_init() {
    let pswpElement = document.querySelectorAll(".pswp")[0];
    let $imgArr = document.querySelectorAll(
      ".article-entry img:not(.reward-img)"
    );

    $imgArr.forEach(($em, i) => {
      $em.onclick = () => {
        // sliderå±•å¼€çŠ¶æ€
        // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
        if (document.querySelector(".left-col.show")) return;
        let items = [];
        $imgArr.forEach(($em2, i2) => {
          let img = $em2.getAttribute("data-idx", i2);
          let src =
            $em2.getAttribute("data-target") || $em2.getAttribute("src");
          let title = $em2.getAttribute("alt");
          // è·å¾—åŸå›¾å°ºå¯¸
          const image = new Image();
          image.src = src;
          items.push({
            src: src,
            w: image.width || $em2.width,
            h: image.height || $em2.height,
            title: title,
          });
        });
        var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
          index: parseInt(i),
        });
        gallery.init();
      };
    });
  }
  viewer_init();
</script>
 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="/js/MathJax.js"></script>
<script src="/js/TeX-AMS-MML_HTMLorMML-full.js"></script>

<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="/js/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !(function (e, t, a) {
    var initCopyCode = function () {
      var copyHtml = "";
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += "</button>";
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS(".btn-copy", {
        target: function (trigger) {
          return trigger.nextElementSibling;
        },
      });
      clipboard.on("success", function (e) {
        let $btn = $(e.trigger);
        $btn.addClass("copied");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-checkbox-circle-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPIED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-checkbox-circle-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
      clipboard.on("error", function (e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass("copy-failed");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-time-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPY FAILED";

        wait(function () {
          // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass("ri-time-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
    };
    initCopyCode();
  })(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "default" });
  }
</script>


    
    

  </div>
</body>

</html>